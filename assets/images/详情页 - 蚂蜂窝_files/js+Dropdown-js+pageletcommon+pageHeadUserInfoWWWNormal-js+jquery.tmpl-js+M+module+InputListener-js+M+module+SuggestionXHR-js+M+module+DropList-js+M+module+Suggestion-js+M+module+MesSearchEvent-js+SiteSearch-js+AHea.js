M.define("/js/Dropdown",function(c,b,d){function a(e){this.$nav=typeof e.nav==="string"?$(e.nav):e.nav;this.$panel=typeof e.panel==="string"?$(e.panel):e.panel;this.showCallback=e.showCallback;this.hideCallback=e.hideCallback;this.delay=e.delay||0;this.event=e.event||"mouseenterleave";this._isShow=false;this.init()}a.prototype={init:function(){if(this.event==="mouseenterleave"){this.$nav.on("mouseenter.dropdown",M.bind(function(e){this.show()},this)).on("mouseleave.dropdown",M.bind(function(e){if($(e.relatedTarget).closest(this.$panel).length===0){this.hide(true)}},this));this.$panel.on("mouseenter.dropdown",M.bind(function(e){this.show()},this)).on("mouseleave.dropdown",M.bind(function(e){if($(e.relatedTarget).closest(this.$nav).length===0){this.hide(false)}},this))}if(this.event==="click"){this.$nav.on("click.dropdown",M.bind(function(e){this.show()},this));$(document).on("click.dropdown",M.bind(function(e){if($(e.target).closest(this.$nav).length===0&&$(e.target).closest(this.$panel).length===0){this.hide(false)}},this))}},show:function(){this.$panel.show();this._isShow=true;if(M.isFunction(this.showCallback)){this.showCallback.call(this,this.$nav,this.$panel)}},hide:function(e){this._isShow=false;if(e&&this.delay>0){setTimeout(M.bind(function(){if(!this._isShow){this.$panel.hide();if(M.isFunction(this.hideCallback)){this.hideCallback.call(this,this.$nav,this.$panel)}}},this),this.delay)}else{this.$panel.hide();if(M.isFunction(this.hideCallback)){this.hideCallback.call(this,this.$nav,this.$panel)}}},destory:function(){if(this.event==="mouseenterleave"){this.$nav.off("mouseenter.dropdown").off("mouseleave.dropdown");this.$panel.off("mouseenter.dropdown").off("mouseleave.dropdown")}if(this.event==="click"){this.$nav.off("click.dropdown")}this.$panel.hide()}};d.exports=a});M.define("/js/pageletcommon/pageHeadUserInfoWWWNormal",function(c){var a=c("/js/Dropdown"),b=window.Env||{};return{events:{},init:function(){var k=$("#head-btn-daka");$(function(){$(".new_daka_tips").addClass("on")});$(".ndt_close").on("click",function(){$(this).parent().hide()});M.Event.on("afterDaka",l);function l(q){if(q&&q.dakaFlag){k.closest(".head-daka").addClass("daka-complete")}}var e=i("dakaday");if(e!==null){$(".head-btn-daka").attr("data-day",e)}function i(q){var s=new RegExp("(^|&)"+q+"=([^&]*)(&|$)");var t=window.location.search.substr(1).match(s);if(t!==null){return unescape(t[2])}return null}var g=new a({nav:"#_j_head_user",panel:"#_j_user_panel",showCallback:function(q,r){q.find(".drop-trigger").addClass("drop-trigger-active")},hideCallback:function(q,r){q.find(".drop-trigger").removeClass("drop-trigger-active")},delay:500});var d=0,p=$("#_j_head_msg"),o=$("#_j_msg_panel"),n=p.find(".head-msg-new"),j=$("#_j_msg_float_panel");var f=new a({nav:p.selector,panel:o.selector,showCallback:function(q,r){q.find(".drop-trigger").addClass("drop-trigger-active")},hideCallback:function(q,r){q.find(".drop-trigger").removeClass("drop-trigger-active")},delay:200});M.Event.on("get new msg",function(q){if(q.msg||d>0){o.find("ul").html(q.menu_index);h()}});o.on("click","a",function(q){M.Event.fire("update msg")});j.on("click","ul a",function(q){M.Event.fire("update msg")});j.on("click",".close-newmsg",function(q){m()});function m(){n.hide();j.hide();$.ajax({url:"http://"+b.WWW_HOST+"/ajax/ajax_msg.php",dataType:"jsonp",data:{a:"ignore",from:"1"},success:function(q){M.Event.fire("update msg")}})}window.close_msg_tips=m;function h(){var q="";d=0;o.find(".num").each(function(r,t){var s=$(t);d+=Number(s.html());q+="<li>"+s.closest("li").html()+"</li>"});if(d>0){n.html((d>99?"99+":d)).show();j.find("ul").html(q).end().show()}else{n.hide();j.hide()}}h()}}});
/*!
 * jQuery Templates Plugin 1.0.0pre
 * http://github.com/jquery/jquery-tmpl
 * Requires jQuery 1.4.2
 *
 * Copyright 2011, Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */
(function(i,f){var t=i.fn.domManip,h="_tmplitem",u=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,p={},e={},y,x={key:0,data:{}},w=0,q=0,g=[];function k(B,A,D,E){var C={data:E||(E===0||E===false)?E:(A?A.data:{}),_wrap:A?A._wrap:null,tmpl:null,parent:A||null,nodes:[],calls:c,nest:b,wrap:n,html:r,update:z};if(B){i.extend(C,B,{nodes:[],parent:A})}if(D){C.tmpl=D;C._ctnt=C._ctnt||C.tmpl(i,C);C.key=++w;(g.length?e:p)[w]=C}return C}i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(A,B){i.fn[A]=function(C){var F=[],I=i(C),E,G,D,J,H=this.length===1&&this[0].parentNode;y=p||{};if(H&&H.nodeType===11&&H.childNodes.length===1&&I.length===1){I[B](this[0]);F=this}else{for(G=0,D=I.length;G<D;G++){q=G;E=(G>0?this.clone(true):this).get();i(I[G])[B](E);F=F.concat(E)}q=0;F=this.pushStack(F,A,I.selector)}J=y;y=null;i.tmpl.complete(J);return F}});i.fn.extend({tmpl:function(C,B,A){return i.tmpl(this[0],C,B,A)},tmplItem:function(){return i.tmplItem(this[0])},template:function(A){return i.template(A,this[0])},domManip:function(E,H,G,I){if(E[0]&&i.isArray(E[0])){var B=i.makeArray(arguments),A=E[0],F=A.length,C=0,D;while(C<F&&!(D=i.data(A[C++],"tmplItem"))){}if(D&&q){B[2]=function(J){i.tmpl.afterManip(this,J,G)}}t.apply(this,B)}else{t.apply(this,arguments)}q=0;if(!y){i.tmpl.complete(p)}return this}});i.extend({tmpl:function(C,F,E,B){var D,A=!B;if(A){B=x;C=i.template[C]||i.template(null,C);e={}}else{if(!C){C=B.tmpl;p[B.key]=B;B.nodes=[];if(B.wrapped){s(B,B.wrapped)}return i(m(B,null,B.tmpl(i,B)))}}if(!C){return[]}if(typeof F==="function"){F=F.call(B||{})}if(E&&E.wrapped){s(E,E.wrapped)}D=i.isArray(F)?i.map(F,function(G){return G?k(E,B,C,G):null}):[k(E,B,C,F)];return A?i(m(B,null,D)):D},tmplItem:function(B){var A;if(B instanceof i){B=B[0]}while(B&&B.nodeType===1&&!(A=i.data(B,"tmplItem"))&&(B=B.parentNode)){}return A||x},template:function(B,A){if(A){if(typeof A==="string"){A=l(A)}else{if(A instanceof i){A=A[0]||{}}}if(A.nodeType){A=i.data(A,"tmpl")||i.data(A,"tmpl",l(A.innerHTML))}return typeof B==="string"?(i.template[B]=A):A}return B?(typeof B!=="string"?i.template(null,B):(i.template[B]||i.template(null,u.test(B)?B:i(B)))):null},encode:function(A){return(""+A).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});i.extend(i.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(A){p={}},afterManip:function v(C,A,D){var B=A.nodeType===11?i.makeArray(A.childNodes):A.nodeType===1?[A]:[];D.call(C,A);o(B);q++}});function m(A,E,C){var D,B=C?i.map(C,function(F){return(typeof F==="string")?(A.key?F.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+h+'="'+A.key+'" $2'):F):m(F,A,F._ctnt)}):A;if(E){return B}B=B.join("");B.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(G,H,F,I){D=i(F).get();o(D);if(H){D=a(H).concat(D)}if(I){D=D.concat(a(I))}});return D?D:a(B)}function a(B){var A=document.createElement("div");A.innerHTML=B;return i.makeArray(A.childNodes)}function l(A){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+i.trim(A).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(I,C,G,D,E,J,F){var L=i.tmpl.tag[G],B,H,K;if(!L){throw"Unknown template tag: "+G}B=L._default||[];if(J&&!/\w$/.test(E)){E+=J;J=""}if(E){E=j(E);F=F?(","+j(F)+")"):(J?")":"");H=J?(E.indexOf(".")>-1?E+j(J):("("+E+").call($item"+F)):E;K=J?H:"(typeof("+E+")==='function'?("+E+").call($item):("+E+"))"}else{K=H=B.$1||"null"}D=j(D);return"');"+L[C?"close":"open"].split("$notnull_1").join(E?"typeof("+E+")!=='undefined' && ("+E+")!=null":"true").split("$1a").join(K).split("$1").join(H).split("$2").join(D||B.$2||"")+"__.push('"})+"');}return __;")}function s(B,A){B._wrap=m(B,true,i.isArray(A)?A:[u.test(A)?A:i(A).html()]).join("")}function j(A){return A?A.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function d(A){var B=document.createElement("div");B.appendChild(A.cloneNode(true));return B.innerHTML}function o(G){var I="_"+q,B,A,E={},F,D,C;for(F=0,D=G.length;F<D;F++){if((B=G[F]).nodeType!==1){continue}A=B.getElementsByTagName("*");for(C=A.length-1;C>=0;C--){H(A[C])}H(B)}function H(P){var L,O=P,N,J,K;if((K=P.getAttribute(h))){while(O.parentNode&&(O=O.parentNode).nodeType===1&&!(L=O.getAttribute(h))){}if(L!==K){O=O.parentNode?(O.nodeType===11?0:(O.getAttribute(h)||0)):0;if(!(J=p[K])){J=e[K];J=k(J,p[O]||e[O]);J.key=++w;p[w]=J}if(q){Q(K)}}P.removeAttribute(h)}else{if(q&&(J=i.data(P,"tmplItem"))){Q(J.key);p[J.key]=J;O=i.data(P.parentNode,"tmplItem");O=O?O.key:0}}if(J){N=J;while(N&&N.key!=O){N.nodes.push(P);N=N.parent}delete J._ctnt;delete J._wrap;i.data(P,"tmplItem",J)}function Q(R){R=R+I;J=E[R]=(E[R]||k(J,p[J.parent.key+I]||J.parent))}}}function c(C,A,D,B){if(!C){return g.pop()}g.push({_:C,tmpl:A,item:this,data:D,options:B})}function b(A,C,B){return i.tmpl(i.template(A),C,B,this)}function n(C,A){var B=C.options||{};B.wrapped=A;return i.tmpl(i.template(C.tmpl),C.data,B,C.item)}function r(B,C){var A=this._wrap;return i.map(i(i.isArray(A)?A.join(""):A).filter(B||"*"),function(D){return C?D.innerText||D.textContent:D.outerHTML||d(D)})}function z(){var A=this.nodes;i.tmpl(null,null,null,this).insertBefore(A[0]);i(A).remove()}if(window.M&&typeof M.define=="function"){M.define("jq-tmpl",function(){return i})}})(jQuery);M.define("InputListener",function(c,b,d){var a={listen:function(f,e){f=$(f);f.each($.proxy(function(g,h){h=$(h);if(!h.is("input")&&!h.is("textarea")){throw new Error("input listener only apply to input or textarea")}this.initListen(h,e)},this))},unlisten:function(e){e=$(e);e.each($.proxy(function(h,k){k=$(k);if(!k.is("input")&&!k.is("textarea")){throw new Error("input listener only apply to input or textarea")}if(arguments.length==1){k.unbind("focus",this.getStartListenFunc());k.unbind("blur",this.getStopListenFunc());k.removeData("__input_listener_handlers")}else{if(typeof arguments[1]=="function"){var j=arguments[1],g=k.data("__input_listener_listeninterval");for(var h=0,f=g.length;h<f;h++){if(g[h]==j){g.splice(h,1);h--}}}}},this))},initListen:function(f,e){f.data("__input_listener_currentval",f.val());if(!f.data("__input_listener_handlers")){this.bindListenEvent(f)}this.addListenHandler(f,e);if(f.is(":focus")){f.blur();f.focus()}},bindListenEvent:function(e){e.data("__input_listener_handlers",[]);e.focus(this.getStartListenFunc());e.blur(this.getStopListenFunc())},getStartListenFunc:function(){if(!this.bindStartListenFunc){this.bindStartListenFunc=$.proxy(this.startListen,this)}return this.bindStartListenFunc},getStopListenFunc:function(){if(!this.bindStopListenFunc){this.bindStopListenFunc=$.proxy(this.stopListen,this)}return this.bindStopListenFunc},startListen:function(e){var f=$(e.target);f.data("__input_listener_currentval",f.val());f.data("__input_listener_listeninterval",setInterval($.proxy(function(){var h=f.data("__input_listener_currentval"),g=f.val();if(h!=g){f.data("__input_listener_currentval",g);this.triggerListenHandler(f)}},this),100))},stopListen:function(e){var f=$(e.target);clearInterval(f.data("__input_listener_listeninterval"))},addListenHandler:function(f,e){if(typeof e=="function"){f.data("__input_listener_handlers").push(e)}},triggerListenHandler:function(h){var f=h.data("__input_listener_handlers");for(var g=0,e=f.length;g<e;g++){f[g].call(null,{target:h.get(0)})}}};return a});M.define("SuggestionXHR",function(b,a,c){function d(e){this.URL=null;this.delay=200;this.dataType="text";$.extend(this,e);this.delayTimer=null;this.xhr=null;this.cache={};this.init()}d.prototype={init:function(){if(!this.URL){throw new Error("no url for suggestion")}},getSuggestion:function(g,h){var f=this.getQuery(g),e=this.cache[f];h=typeof h==="function"?h:$.noop;this.stop();if(e){h(e)}else{this.getXHRData(f,h)}},stop:function(){clearTimeout(this.delayTimer);if(this.xhr&&this.xhr.readyState!==4){this.xhr.abort()}},getQuery:function(h){var g="";if(typeof h=="string"){g=encodeURIComponent(h)}else{if(h&&typeof h=="object"){var e=[];for(var f in h){if(h.hasOwnProperty(f)){e.push(f+"="+encodeURIComponent(h[f]))}}g=e.join("&")}}return g},getXHRData:function(e,h){var f=this.xhr,g={url:this.URL,data:e,dataType:this.dataType,success:M.bind(function(i){h(i);this.cache[e]=i},this)};this.delayTimer=setTimeout(M.bind(function(){this.xhr=$.ajax(g)},this),this.delay)}};return d});M.define("DropList",function(c,b,d){var a=M.Event;function e(f){this.trigger=null;this.container=null;this.itemSelector="._j_listitem";this.itemHoverClass="on";this.firstItemHover=false;$.extend(this,f);this.trigger=$(this.trigger);this.container=$(this.container);this.mouseon=false;this.visible=false;this.init()}M.mix(e.prototype,{createContainer:$.noop,updateList:$.noop,init:function(){if(!this.trigger.length){M.error("no trigger for drop list")}if(!this.container.length){this.container=this.createContainer()}if(!this.container.length){M.error("no container for drop list")}this.bindEvents()},bindEvents:function(){this.trigger.on("keydown",$.proxy(function(g){var h=g.keyCode;if(this.visible&&h==13){var f=this.getFocusItem();if(f.length){this.selectItem(f);g.preventDefault()}}else{if(this.visible&&h==38){this.moveFocus(-1)}else{if(this.visible&&h==40){this.moveFocus(1)}}}},this));this.container.on("mouseenter",this.itemSelector,$.proxy(this.moveFocus,this)).on("click",this.itemSelector,$.proxy(this.clickItem,this)).on("mouseenter",$.proxy(this.mouseOverCnt,this)).on("mouseleave",$.proxy(this.mouseOutCnt,this))},show:function(g){this.updateList(g);this.container.show();if(this.firstItemHover){var f=this.container.find(this.itemSelector);if(f.length){this.moveFocus(1)}}this.visible=true},hide:function(){this.container.hide();this.visible=false},clickItem:function(g){var f=this.getFocusItem();this.selectItem(f);g.preventDefault()},selectItem:function(f){a(this).fire("itemselected",{item:f})},moveFocus:function(i){var h=this.container.find(this.itemSelector),j=this.getFocusItem(),g=j,f;if(i===-1){if(j.length){f=h.index(j)-1}if(!j.length||f==-1){g=h.last()}else{g=h.eq(f)}}else{if(i===1){if(j.length){f=h.index(j)+1}if(!j.length||f==h.length){g=h.first()}else{g=h.eq(f)}}else{if(i.currentTarget){g=$(i.currentTarget)}}}j.removeClass(this.itemHoverClass);g.addClass(this.itemHoverClass);a(this).fire("itemfocused",{prevItem:j,focusItem:g})},getFocusItem:function(){var f=this.container.find(this.itemSelector);return f.filter("."+this.itemHoverClass)},mouseOverCnt:function(){this.mouseon=true},mouseOutCnt:function(){this.mouseon=false}});return e});M.define("Suggestion",function(c){c("jq-tmpl");var a=c("InputListener");var b='{{each(i, item) list}}<li class="${listItemClass}" data-value="${item.value}">${item.text}</li>{{/each}}';function d(e){e.suggestionURL=e.url||$(e.input).data("suggestionurl");this.dropListClass="droplist";this.listItemSelector="._j_listitem";this.listItemHoverClass="on";this.listFirstItemHover=false;this.keyParamName="key";this.dataType="json";this.suggestionParams={};this.listContainer=null;M.mix(this,e);this.input=$(this.input);this.listTmpl=this.listTmpl||b;this.actOnList=false;this.init()}M.mix(d.prototype,{init:function(){a.listen(this.input,$.proxy(this.inputChange,this));this.input.blur($.proxy(function(f){var e=$(f.currentTarget);if(e.data("droplist")){setTimeout($.proxy(function(){if(!this.actOnList&&e.data("droplist")){e.data("droplist").hide()}this.actOnList=false},this),200)}},this));this.input.keyup($.proxy(function(f){var e=$(f.currentTarget);if(f.keyCode==40&&(!e.data("droplist")||!e.data("droplist").visible)){this.inputChange(f)}},this))},inputChange:function(i){var f=$(i.target),k=$.trim(f.val()),j=c("SuggestionXHR"),h=c("DropList");var g=f.data("droplist");if(!g){f.data("droplist",g=new h({trigger:f,itemSelector:this.listItemSelector,itemHoverClass:this.listItemHoverClass,firstItemHover:this.listFirstItemHover,container:this.listContainer,createContainer:$.proxy(function(){var l=this.createListContainer(f);this.listContainer=l;return l},this),updateList:$.proxy(this.updateList,this)}));M.Event(g).on("itemselected",$.proxy(function(l){this.dropItemSelected(f,l.item)},this));M.Event(g).on("itemfocused",$.proxy(function(l){M.Event(this).fire("itemfocused",l)},this))}g.hide=function(){setTimeout($.proxy(function(){if(M.windowFocused){this.container.hide();this.visible=false}},this),1)};var e=f.data("suggestion");if(!e){f.data("suggestion",e=new j({URL:this.suggestionURL,dataType:this.dataType}))}if(!k.length){e.stop();g.hide();M.Event(this).fire("after hide list")}else{this.suggestionParams[this.keyParamName]=k;M.Event(this).fire("before suggestion xhr");e.getSuggestion(this.suggestionParams,$.proxy(function(m){M.Event(this).fire("before show list");var l=this.handleSuggest(m);if(l){f.data("droplist").show(l)}},this))}},handleSuggest:function(f){var e="";if(this.dataType=="json"){e=$.tmpl(this.listTmpl,f)}return e},createListContainer:function(f){var g=$("<ul />"),e=f.position();g.css({display:"none",position:"absolute",left:e.left,top:e.top+f.outerHeight()}).addClass(this.dropListClass);g.insertAfter(f);return g},updateList:function(e){this.listContainer.html(e)},hideDropList:function(){this.input.data("droplist")&&this.input.data("droplist").hide()},dropItemSelected:function(e,f){a.unlisten(e);M.Event(this).fire("itemselected",{item:f,input:e});a.listen(e,$.proxy(this.inputChange,this))}});return d});M.define("MesSearchEvent",function(b,a,c){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");Math.uuid=function(f,j){var l=e,h=[],g;j=j||l.length;if(f){for(g=0;g<f;g++){h[g]=l[0|Math.random()*j]}}else{var k;h[8]=h[13]=h[18]=h[23]="-";h[14]="4";for(g=0;g<36;g++){if(!h[g]){k=0|Math.random()*16;h[g]=l[(g==19)?(k&3)|8:k]}}}return h.join("")};Math.uuidFast=function(){var k=e,h=new Array(36),g=0,j;for(var f=0;f<36;f++){if(f==8||f==13||f==18||f==23){h[f]="-"}else{if(f==14){h[f]="4"}else{if(g<=2){g=33554432+(Math.random()*16777216)|0}j=g&15;g=g>>4;h[f]=k[(f==19)?(j&3)|8:j]}}}return h.join("")};Math.uuidCompact=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(h){var g=Math.random()*16|0,f=h=="x"?g:(g&3|8);return f.toString(16)})};var d={uuid:function(){return Math.uuid()},search:function(f){var g=Math.uuid();f.id=g;!!mfwPageEvent&&mfwPageEvent("se","v2_search",f);return g},searchCache:function(f){var g=Math.uuid();f.id=g;!!mfwPageEvent&&mfwPageEvent("se","v2_search_cache",f);return g},resultClick:function(f){!!mfwPageEvent&&mfwPageEvent("se","v2_result_click",f);return f.id}};c.exports=d});M.define("/js/SiteSearch",function(e){var d="1.0.0",h=e("Suggestion"),f=e("MesSearchEvent"),g=M.cssSupport("transition"),b=M.cssSupport("transform"),c=window.Env||{};var a=function(C){var E=$("#"+C.input+""),T=!!C.submit?$("#"+C.submit+""):null,t=C.additionalClass?C.additionalClass:"",K=!!C.isRelevant,s=C.maxCount||0,z=C.hideOnScroll||false,n=false,J=false,i="",y="",l="",p="";if(C.input==="_j_index_search_input_all"){var H=[];if(E.val()===""&&H&&H.length){var S=Math.floor(Math.random()*H.length),I=H[S];E.val(I.name).data("url",I.url)}E.on("focus",function(V){if(E.data("url")){E.val("").data("url","")}})}if(c.is_async_site_search){n=true}var P=new h({url:(c.WWW_HOST?"http://"+c.WWW_HOST:"")+"/search/ss.php",suggestionParams:{isHeader:Number(K)},input:E,listItemHoverClass:"active",listFirstItemHover:false,dataType:"jsonp",createListContainer:function(){var V=$('<div class="m-search-suggest '+t+' hide"><ul class="mss-list"></ul></div>').appendTo("body");V.on("mouseenter",".mss-place .mss-title, .mss-place .mss-nav a",function(X){var W=$(X.currentTarget),Y=W.closest(".mss-place");Y.find(".mss-title").removeClass("active").removeClass("frozen").end().find(".mss-nav a").removeClass("active").end();W.addClass("active")}).on("mouseleave",".mss-place .mss-title, .mss-place .mss-nav a",function(X){var W=$(X.currentTarget);W.removeClass("active")});return V},handleSuggest:function(aB){i=aB.keyword;J=!!aB.is_hit;l="http://"+aB.www_host;var aw=aB.keyword_cut,ay=aB.show_types,W=aB.hide_types;var aq=$("<ul>");var aa=aB.first_poi;if(!!aa){var al=aa,aj=$('<li class="mss-item _j_listitem" data-type="poi">').appendTo(aq),ao=$('<div class="mss-title">').appendTo(aj);aj.attr("data-url",al.url);ao.append('<span class="mss-fr">'+(!!al.mddname?al.mddname:"")+al.typename+"</span>");ao.append('<span class="mss-cn">'+al.dis_name+"</span>")}var ag=aB.article_info;if(ag&&ag.result){for(var ar=0;ar<ag.result.length;ar++){var af=ag.result[ar],aj=$('<li class="mss-item _j_listitem" data-type="article_promoted">').appendTo(aq),ao=$('<div class="mss-title">').appendTo(aj);aj.attr("data-url",af.link);ao.html(af.name_display)}}var ak=aB.mdd_info;if(ak&&ak.result){for(var ar=0;ar<ak.result.length;ar++){var Z=ak.result[ar],aj=$('<li class="mss-item _j_listitem" data-type="mdd">').appendTo(aq),ao=$('<div class="mss-title">').appendTo(aj);aj.attr("data-url",Z.url);if(!!Z.parent){ao.append('<span class="mss-fr">'+Z.parent+"</span>")}ao.append('<span class="mss-cn">'+Z.dis_name+"</span>");ao.append('<span class="mss-gl"> '+Z.infoname+"</span>")}}var an=aB.hotel_info;if(an&&an.result&&!K){for(var ar=0;ar<an.result.length;ar++){var az=an.result[ar],aj=$('<li class="mss-item _j_listitem" data-type="hotel_promoted">').appendTo(aq),ao=$('<div class="mss-title">').appendTo(aj);aj.attr("data-url",az.url);ao.append('<span class="mss-fr">'+az.typename+"</span>");ao.append('<span class="mss-cn">'+az.title+"</span>");ao.append('<span class="mss-gl"> '+az.infoname+"</span>")}}var ad=aB.gl_info;if(ad&&ad.result){for(var ar=0;ar<ad.result.length;ar++){var ap=ad.result[ar],aj=$('<li class="mss-item _j_listitem" data-type="sales_gonglve">').appendTo(aq),ao=$('<div class="mss-title">').appendTo(aj);aj.attr("data-url",ap.url);ao.append('<span class="mss-fr">'+ap.typename+"</span>");ao.append('<span class="mss-cn">'+ap.title+"</span>")}}var Y=aB.sales_info;if(Y&&Y.result&&!K){for(var ar=0;ar<Y.result.length;ar++){var V=Y.result[ar],aj=$('<li class="mss-item _j_listitem" data-type="sales_promoted">').appendTo(aq),ao=$('<div class="mss-title">').appendTo(aj);aj.attr("data-url",V.url);ao.append('<span class="mss-fr">'+V.typename+"</span>");ao.append('<span class="mss-cn">'+V.title+"</span>");ao.append('<span class="mss-gl"> '+V.infoname+"</span>")}}var ae=aB.route_info;if(ae&&ae.result&&!K){for(var ar=0;ar<ae.result.length;ar++){var ax=ae.result[ar],aj=$('<li class="mss-item _j_listitem" data-type="route_promoted">').appendTo(aq),ao=$('<div class="mss-title">').appendTo(aj);aj.attr("data-url",ax.url);ao.append('<span class="mss-fr">'+ax.typename+"</span>");ao.append('<span class="mss-cn">'+ax.title+"</span>");ao.append('<span class="mss-gl"> '+ax.infoname+"</span>")}}var at=aB.qa_info;if(at&&at.result){for(var ar=0;ar<at.result.length;ar++){var ah=at.result[ar],aj=$('<li class="mss-item _j_listitem" data-type="wenda">').appendTo(aq),ao=$('<div class="mss-title">').appendTo(aj);aj.attr("data-url",ah.url);ao.append('<span class="mss-fr">'+ah.typename+"</span>");ao.append('<span class="mss-cn">'+ah.title+"</span>")}}var ac=aB.poi_info,av=!K;if(M.isArray(ay)&&M.indexOf(ay,"poi")!==-1){av=true}if(ac&&ac.result&&av){for(var ar=0;ar<ac.result.length;ar++){var al=ac.result[ar],X="hotel"===al.stype?"hotel":"poi",aj=$('<li class="mss-item _j_listitem" data-type="'+X+'">').appendTo(aq),ao=$('<div class="mss-title">').appendTo(aj);aj.attr("data-url",al.url);ao.append('<span class="mss-fr">'+(!!al.mddname?al.mddname:"")+al.typename+"</span>");ao.append('<span class="mss-cn" style="color:#999;">'+al.dis_name+"</span>")}}var ai=aB.sekey_info,au=K;if(M.isArray(W)&&M.indexOf(W,"sekey")!==-1){au=false}if(ai&&ai.result&&au){for(var ar=0;ar<ai.result.length;ar++){if(ar>4){break}var aA=ai.result[ar],aj=$('<li class="mss-item _j_listitem" data-type="sekey">').appendTo(aq);aj.attr("data-url",aA.url);aj.append('<div class="mss-title">'+aA.name+"</div>")}}var ab=aB.ginfo_num;if(!!ab){var aj=$('<li class="mss-item _j_listitem" data-type="info">').appendTo(aq);aj.append('<div class="mss-title">搜“<span class="mss-key">'+aw+'</span>”相关游记<span class="mss-num">'+ab+"篇</span></div>")}var am=aB.user_num;if(!!ab){var aj=$('<li class="mss-item _j_listitem" data-type="user">').appendTo(aq);aj.append('<div class="mss-title">搜“<span class="mss-key">'+aw+"</span>”相关用户</div>")}if(s>0){aq.find("._j_listitem").each(function(aC,aD){if(aC>s){$(aD).remove()}})}return aq.html()},updateList:function(V){this.listContainer.find(".mss-list").html(V);if(K){this.listContainer.find(".mss-list").addClass("shrink-list")}if(J){P.input.data("droplist").moveFocus(1)}}});if(n){var A=e("InputListener"),w=e("SuggestionXHR"),D=new w({URL:(c.WWW_HOST?"http://"+c.WWW_HOST:"")+"/search/s.php",dataType:"json"}),v=$("#_j_mfw_search_main"),U=E.closest(".search-wrapper"),L=$('<div class="search-keyword-tip"></div>').appendTo(U),B=C.input==="_j_index_search_input_all",G=false,u,q,N,k,r;A.listen(E,function(W){var V=$(W.target),X=$.trim(V.val());if(!G&&X){G=true}L.hide()});M.Event(P).on("before suggestion xhr",function(){var V=P.suggestionParams[P.keyParamName];if(V&&V!==y){D.getSuggestion({q:V,gall:1},$.proxy(function(X){var ab=$.trim(E.val());if(!ab){return false}if(!X||!X.keyword||(!X.result&&!X.unmatch)){return false}if(X.unmatch===1){L.hide()}else{y=V;if(U[0]){var Y=X.keyword.length,W=X.keyword.replace(/[A-Za-z0-9\s]/g,"").length,aa=Y-W;setTimeout(function(){L.html(X.keyword).css("left",32+W*14+aa*7).show()},1)}v.html($(X.result).css("minHeight",0).html());if(g&&b){v.find("> .wid").addClass("anim-climb");setTimeout(function(){v.find("> .wid").removeClass("anim-climb")},1)}var Z=c.search_type||"all";c.search_seid=Q(V,Z);c.search_keyword=V;c.is_search_cache=true;c.is_search_updated=true}},P))}})}M.Event(P).on("before suggestion xhr",function(){R(E,P.listContainer)});M.Event(P).on("before show list",function(){P.listContainer.find(".mss-list").show()});M.Event(P).on("itemfocused",function(W){var V=W.prevItem,X=W.focusItem,Y=P.listContainer;if(1<Y.find(".mss-place").length){if(X.hasClass("mss-place")){Y.find(".mss-place").removeClass("frozen")}if(!X.hasClass("mss-place")&&!!V&&V.hasClass("mss-place")){Y.find(".mss-place").removeClass("frozen");V.addClass("frozen")}}if(X.hasClass("mss-place")){X.find(".mss-title").addClass("frozen")}});M.Event(P).on("itemselected",function(X){var Z=X.item;if(Z.length){var Y=Z.data("type"),W=Z.data("url"),ab=E.attr("id")==="_j_head_search_input"?"header":"default";if(Y==="flight_hotel"||Y==="flight"||Y==="local"){Y="sales"}p=m(i,"all",ab,"suggest");if("info"===Y||"user"===Y){var aa=m(i,Y,ab,"suggest");location.href=l+"/search/s.php?q="+encodeURIComponent(i)+"&t="+Y+"&seid="+aa}else{var W=Z.data("url"),V=P.listContainer.find(".mss-item").index(Z.closest(".mss-item"))+1;O(W,V,Y);location.href=Z.data("url")}}else{if(i!==""){location.href=l+"/search/s.php?q="+encodeURIComponent(i)}}});var x=E.closest(".head-search-wrapper");if(x[0]){E.on("focus",function(V){setTimeout(function(){x.addClass("head-search-focus")},1)}).on("blur",function(V){setTimeout(function(){if(M.windowFocused){x.removeClass("head-search-focus")}},1)})}if(T&&T[0]){T.on("click",function(X){var W=$.trim(E.val());if(E.data("url")){if(E.data("url").indexOf("http")!==-1){location.href=E.data("url")}else{location.href=(c.WWW_HOST?"http://"+c.WWW_HOST:"")+E.data("url")}return true}if(W!==""){if(P.listContainer){P.listContainer.hide()}var Z=E.attr("id")==="_j_head_search_input"?"header":"default",aa=c.search_type||"all",Y=m(W,aa,Z,"form"),V=l+"/search/s.php?q="+encodeURIComponent(W);if(c.search_type&&location.pathname==="/search/s.php"){V+="&t="+c.search_type}V+="&seid="+Y;location.href=V}})}if(E&&E[0]){E.on("keydown",function(X){if(X.keyCode==13){var aa=P.input.data("droplist");if(aa&&aa.getFocusItem().length){return true}var W=$.trim(E.val());if(W!==""){if(P.listContainer){P.listContainer.hide()}var Z=E.attr("id")==="_j_head_search_input"?"header":"default",ab=c.search_type||"all",Y=m(W,ab,Z,"form"),V=l+"/search/s.php?q="+encodeURIComponent(W);if(c.search_type&&location.pathname==="/search/s.php"){V+="&t="+c.search_type}V+="&seid="+Y;location.href=V}}})}$(window).resize(function(){if(P.listContainer&&P.listContainer.length&&P.listContainer.is(":visible")){R(E,P.listContainer)}});$(window).on("scroll",function(V){if(z){P.hideDropList()}});function R(V,X){var W=V.offset();X.css({left:W.left+(C.input==="_j_index_search_input_all"?0:1),top:W.top+E.outerHeight()-2})}function m(V,Z,Y,X){var W={keyword:V,content_category:Z,searchbox_category:"main_search",searchbox_position:Y,search_type:X,version:d};return f.search(W)}function Q(V,X){var W={keyword:V,content_category:X,version:d};return f.searchCache(W)}function O(Y,W,X){var V={id:p,keyword:i,click_url:Y,index:W,content_category:X,search_type:"suggest",version:d};return f.resultClick(V)}function F(W,aa){var X=[],ac=W.split("|");aa=j(aa);for(var Z=0;Z<ac.length;Z++){var Y=$.trim(ac[Z]);if(Y=="search://"){var V=X.length;X[V]=ac[Z++];X[V+1]=ac[Z++];X[V+2]=ac[Z++];X[V+3]=ac[Z++];X[V+4]=ac[Z++];X[V+5]=ac[Z];continue}if(Y){try{Y=Y.replace(new RegExp(aa,"ig"),function(ad){return'<span class="highlight">'+ad+"</span>"})}catch(ab){Y=Y.replace(aa,function(ad){return'<span class="highlight">'+ad+"</span>"})}X[X.length]=Y}}return X}var o=$("<div/>");function j(V){return o.text(V).html()}};return a});M.closure(function(c){var r=$("#header");if(!r.length){return false}var o=c("/js/Dropdown");var n=c("/js/SiteSearch");new n({input:"_j_head_search_input",submit:"_j_head_search_link",isRelevant:true});$("#_j_nav_sales").find("[data-sales-nav]").on("click",function(){var t=$(this).data("salesNav");mfwPageEvent("sales","index_sales_nav",{name:t})});if(!window.showBarFlag){$("._j_sales_nav_show").off("hover")}else{var b=0,p=0;$("._j_sales_nav_show").hover(function(){clearTimeout(b);p=setTimeout(function(){$("._j_sales_nav_show").addClass("head-nav-hover");$("._j_sales_top").fadeIn(300)},200)},function(){clearTimeout(p);b=setTimeout(function(){$("._j_sales_nav_show").removeClass("head-nav-hover");$("._j_sales_top").fadeOut(300)},200)})}var m=0,f=0;$("._j_shequ_nav_show").hover(function(){clearTimeout(m);f=setTimeout(function(){$("._j_shequ_nav_show").addClass("head-nav-hover");$("._j_shequ_top").fadeIn(300)},200)},function(){clearTimeout(f);m=setTimeout(function(){$("._j_shequ_nav_show").removeClass("head-nav-hover");$("._j_shequ_top").fadeOut(300)},200)});var q=$("#_j_community_panel"),i=q.find(".panel-image").length,j=Math.floor(Math.random()*i);if(j===i){j--}q.find(".panel-image").eq(j).show();$("#_j_showlogin").click(function(t){if(window.location.host===Env.WWW_HOST){t.preventDefault()}M.Event.fire("login:required")});var g=window.location.hostname,k=window.location.pathname+window.location.search,a=$("#_j_head_nav");if(g.indexOf("www")===0){if(k===""||k==="/"){a.children("li:eq(0)").addClass("head-nav-active")}var h=new RegExp("^/(mdd|photo/mdd|poi|photo/poi|travel-scenic-spot|jd|cy|gw|yl|yj|xc|baike)/|sFrom=mdd.*|sFrom=smdd.*","i");if(h.test(k)){a.children("li:eq(1)").addClass("head-nav-active")}var e=new RegExp("^/gonglve/.*","i");if(e.test(k)){a.children("li:eq(2)").addClass("head-nav-active")}var d=window.Env&&window.Env.sales_title_tag;if(d){if(d==="flight_hotel"){a.children("li:eq(3)").find("ul>li:eq(0)>a").addClass("on")}else{if(d==="visa"){a.children("li:eq(3)").find("ul>li:eq(2)>a").addClass("on")}else{if(d==="localdeals"){a.children("li:eq(3)").find("ul>li:eq(1)>a").addClass("on")}else{if(d==="insurance"){a.children("li:eq(3)").find("ul>li:eq(4)>a").addClass("on")}}}}a.find("li:eq(3)").addClass("head-nav-active")}if(/^\/insurance\//i.test(k)){a.find("li:eq(3)").addClass("head-nav-active")}var s=new RegExp("^/hotel/(?!.*sFrom=mdd).*","ig");if(s.test(k)){a.children("li:eq(4)").addClass("head-nav-active");a.children("li:eq(4)").find(".head-act616").remove()}var l=new RegExp("^/(wenda|qa|mall|together|group|i|traveller|rudder|paimai|club|postal|school|photo_pk|focus)/(?!.*sFrom=mdd|s.php*).*","i");if(l.test(k)){a.children("li:eq(5)").addClass("head-nav-active")}}});(function(c,d){c.fn.jPlayer=function(h){var g="jPlayer";var e=typeof h==="string",f=Array.prototype.slice.call(arguments,1),i=this;h=!e&&f.length?c.extend.apply(null,[true,h].concat(f)):h;if(e&&h.charAt(0)==="_"){return i}if(e){this.each(function(){var j=c.data(this,g),k=j&&c.isFunction(j[h])?j[h].apply(j,f):j;if(k!==j&&k!==d){i=k;return false}})}else{this.each(function(){var j=c.data(this,g);if(j){j.option(h||{})}else{c.data(this,g,new c.jPlayer(h,this))}})}return i};c.jPlayer=function(f,g){if(arguments.length){this.element=c(g);this.options=c.extend(true,{},this.options,f);var e=this;this.element.bind("remove.jPlayer",function(){e.destroy()});this._init()}};c.jPlayer.emulateMethods="load play pause";c.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate";c.jPlayer.emulateOptions="muted volume";c.jPlayer.reservedEvent="ready flashreset resize repeat error warning";c.jPlayer.event={ready:"jPlayer_ready",flashreset:"jPlayer_flashreset",resize:"jPlayer_resize",repeat:"jPlayer_repeat",click:"jPlayer_click",error:"jPlayer_error",warning:"jPlayer_warning",loadstart:"jPlayer_loadstart",progress:"jPlayer_progress",suspend:"jPlayer_suspend",abort:"jPlayer_abort",emptied:"jPlayer_emptied",stalled:"jPlayer_stalled",play:"jPlayer_play",pause:"jPlayer_pause",loadedmetadata:"jPlayer_loadedmetadata",loadeddata:"jPlayer_loadeddata",waiting:"jPlayer_waiting",playing:"jPlayer_playing",canplay:"jPlayer_canplay",canplaythrough:"jPlayer_canplaythrough",seeking:"jPlayer_seeking",seeked:"jPlayer_seeked",timeupdate:"jPlayer_timeupdate",ended:"jPlayer_ended",ratechange:"jPlayer_ratechange",durationchange:"jPlayer_durationchange",volumechange:"jPlayer_volumechange"};c.jPlayer.htmlEvent=["loadstart","abort","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","ratechange"];c.jPlayer.pause=function(){c.each(c.jPlayer.prototype.instances,function(f,e){if(e.data("jPlayer").status.srcSet){e.jPlayer("pause")}})};c.jPlayer.timeFormat={showHour:false,showMin:true,showSec:true,padHour:false,padMin:true,padSec:true,sepHour:":",sepMin:":",sepSec:""};c.jPlayer.convertTime=function(j){var k=new Date(j*1000);var f=k.getUTCHours();var h=k.getUTCMinutes();var i=k.getUTCSeconds();var g=(c.jPlayer.timeFormat.padHour&&f<10)?"0"+f:f;var l=(c.jPlayer.timeFormat.padMin&&h<10)?"0"+h:h;var e=(c.jPlayer.timeFormat.padSec&&i<10)?"0"+i:i;return((c.jPlayer.timeFormat.showHour)?g+c.jPlayer.timeFormat.sepHour:"")+((c.jPlayer.timeFormat.showMin)?l+c.jPlayer.timeFormat.sepMin:"")+((c.jPlayer.timeFormat.showSec)?e+c.jPlayer.timeFormat.sepSec:"")};c.jPlayer.uaBrowser=function(j){var f=j.toLowerCase();var h=/(webkit)[ \/]([\w.]+)/;var k=/(opera)(?:.*version)?[ \/]([\w.]+)/;var g=/(msie) ([\w.]+)/;var i=/(mozilla)(?:.*? rv:([\w.]+))?/;var e=h.exec(f)||k.exec(f)||g.exec(f)||f.indexOf("compatible")<0&&i.exec(f)||[];return{browser:e[1]||"",version:e[2]||"0"}};c.jPlayer.uaPlatform=function(k){var h=k.toLowerCase();var l=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/;var j=/(ipad|playbook)/;var g=/(android)/;var i=/(mobile)/;var e=l.exec(h)||[];var f=j.exec(h)||!i.exec(h)&&g.exec(h)||[];if(e[1]){e[1]=e[1].replace(/\s/g,"_")}return{platform:e[1]||"",tablet:f[1]||""}};c.jPlayer.browser={};c.jPlayer.platform={};var b=c.jPlayer.uaBrowser(navigator.userAgent);if(b.browser){c.jPlayer.browser[b.browser]=true;c.jPlayer.browser.version=b.version}var a=c.jPlayer.uaPlatform(navigator.userAgent);if(a.platform){c.jPlayer.platform[a.platform]=true;c.jPlayer.platform.mobile=!a.tablet;c.jPlayer.platform.tablet=!!a.tablet}c.jPlayer.prototype={count:0,version:{script:"2.2.0",needFlash:"2.2.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",preload:"metadata",volume:0.8,muted:false,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",currentTime:".jp-current-time",duration:".jp-duration",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},fullScreen:false,autohide:{restored:false,full:true,fadeIn:200,fadeOut:600,hold:1000},loop:false,repeat:function(e){if(e.jPlayer.options.loop){c(this).unbind(".jPlayerRepeat").bind(c.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){c(this).jPlayer("play")})}else{c(this).unbind(".jPlayerRepeat")}},nativeVideoControls:{},noFullScreen:{msie:/msie [0-6]/,ipad:/ipad.*?os [0-4]/,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3](?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,webos:/webos/,playbook:/playbook/},verticalVolume:false,idPrefix:"jp",noConflict:"jQuery",emulateHtml:false,errorAlerts:false,warningAlerts:false},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:true,format:{},formatType:"",waitForPlay:true,waitForLoad:true,srcSet:false,video:false,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:false},solution:{html:true,flash:true},format:{mp3:{codec:'audio/mpeg; codecs="mp3"',flashCanPlay:true,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:true,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis"',flashCanPlay:false,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:false,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:false,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:true,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:true,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:true,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:false,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:false,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:true,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:true,media:"video"}},_init:function(){var f=this;this.element.empty();this.status=c.extend({},this.status);this.internal=c.extend({},this.internal);this.internal.domNode=this.element.get(0);this.formats=[];this.solutions=[];this.require={};this.htmlElement={};this.html={};this.html.audio={};this.html.video={};this.flash={};this.css={};this.css.cs={};this.css.jq={};this.ancestorJq=[];this.options.volume=this._limitValue(this.options.volume,0,1);c.each(this.options.supplied.toLowerCase().split(","),function(o,i){var m=i.replace(/^\s+|\s+$/g,"");if(f.format[m]){var n=false;c.each(f.formats,function(q,p){if(m===p){n=true;return false}});if(!n){f.formats.push(m)}}});c.each(this.options.solution.toLowerCase().split(","),function(o,m){var i=m.replace(/^\s+|\s+$/g,"");if(f.solution[i]){var n=false;c.each(f.solutions,function(q,p){if(i===p){n=true;return false}});if(!n){f.solutions.push(i)}}});this.internal.instance="jp_"+this.count;this.instances[this.internal.instance]=this.element;if(!this.element.attr("id")){this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count)}this.internal.self=c.extend({},{id:this.element.attr("id"),jq:this.element});this.internal.audio=c.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:d});this.internal.video=c.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:d});this.internal.flash=c.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:d,swf:this.options.swfPath+(this.options.swfPath.toLowerCase().slice(-4)!==".swf"?(this.options.swfPath&&this.options.swfPath.slice(-1)!=="/"?"/":"")+"Jplayer.swf":"")});this.internal.poster=c.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:d});c.each(c.jPlayer.event,function(i,m){if(f.options[i]!==d){f.element.bind(m+".jPlayer",f.options[i]);f.options[i]=d}});this.require.audio=false;this.require.video=false;c.each(this.formats,function(i,m){f.require[f.format[m].media]=true});if(this.require.video){this.options=c.extend(true,{},this.optionsVideo,this.options)}else{this.options=c.extend(true,{},this.optionsAudio,this.options)}this._setSize();this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullScreen=this._uaBlocklist(this.options.noFullScreen);this.status.noVolume=this._uaBlocklist(this.options.noVolume);this._restrictNativeVideoControls();this.htmlElement.poster=document.createElement("img");this.htmlElement.poster.id=this.internal.poster.id;this.htmlElement.poster.onload=function(){if(!f.status.video||f.status.waitForPlay){f.internal.poster.jq.show()}};this.element.append(this.htmlElement.poster);this.internal.poster.jq=c("#"+this.internal.poster.id);this.internal.poster.jq.css({width:this.status.width,height:this.status.height});this.internal.poster.jq.hide();this.internal.poster.jq.bind("click.jPlayer",function(){f._trigger(c.jPlayer.event.click)});this.html.audio.available=false;if(this.require.audio){this.htmlElement.audio=document.createElement("audio");this.htmlElement.audio.id=this.internal.audio.id;this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio)}this.html.video.available=false;if(this.require.video){this.htmlElement.video=document.createElement("video");this.htmlElement.video.id=this.internal.video.id;this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video)}this.flash.available=this._checkForFlash(10);this.html.canPlay={};this.flash.canPlay={};c.each(this.formats,function(i,m){f.html.canPlay[m]=f.html[f.format[m].media].available&&""!==f.htmlElement[f.format[m].media].canPlayType(f.format[m].codec);f.flash.canPlay[m]=f.format[m].flashCanPlay&&f.flash.available});this.html.desired=false;this.flash.desired=false;c.each(this.solutions,function(n,i){if(n===0){f[i].desired=true}else{var o=false;var m=false;c.each(f.formats,function(p,q){if(f[f.solutions[0]].canPlay[q]){if(f.format[q].media==="video"){m=true}else{o=true}}});f[i].desired=(f.require.audio&&!o)||(f.require.video&&!m)}});this.html.support={};this.flash.support={};c.each(this.formats,function(i,m){f.html.support[m]=f.html.canPlay[m]&&f.html.desired;f.flash.support[m]=f.flash.canPlay[m]&&f.flash.desired});this.html.used=false;this.flash.used=false;c.each(this.solutions,function(m,i){c.each(f.formats,function(n,o){if(f[i].support[o]){f[i].used=true;return false}})});this._resetActive();this._resetGate();this._cssSelectorAncestor(this.options.cssSelectorAncestor);if(!(this.html.used||this.flash.used)){this._error({type:c.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:c.jPlayer.errorMsg.NO_SOLUTION,hint:c.jPlayer.errorHint.NO_SOLUTION});if(this.css.jq.noSolution.length){this.css.jq.noSolution.show()}}else{if(this.css.jq.noSolution.length){this.css.jq.noSolution.hide()}}if(this.flash.used){var j,k="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(c.jPlayer.browser.msie&&Number(c.jPlayer.browser.version)<=8){var e='<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0"></object>';var h=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+k+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];j=document.createElement(e);for(var g=0;g<h.length;g++){j.appendChild(document.createElement(h[g]))}}else{var l=function(m,q,i){var o=document.createElement("param");o.setAttribute("name",q);o.setAttribute("value",i);m.appendChild(o)};j=document.createElement("object");j.setAttribute("id",this.internal.flash.id);j.setAttribute("data",this.internal.flash.swf);j.setAttribute("type","application/x-shockwave-flash");j.setAttribute("width","1");j.setAttribute("height","1");l(j,"flashvars",k);l(j,"allowscriptaccess","always");l(j,"bgcolor",this.options.backgroundColor);l(j,"wmode",this.options.wmode)}this.element.append(j);this.internal.flash.jq=c(j)}if(this.html.used){if(this.html.audio.available){this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio);this.element.append(this.htmlElement.audio);this.internal.audio.jq=c("#"+this.internal.audio.id)}if(this.html.video.available){this._addHtmlEventListeners(this.htmlElement.video,this.html.video);this.element.append(this.htmlElement.video);this.internal.video.jq=c("#"+this.internal.video.id);if(this.status.nativeVideoControls){this.internal.video.jq.css({width:this.status.width,height:this.status.height})}else{this.internal.video.jq.css({width:"0px",height:"0px"})}this.internal.video.jq.bind("click.jPlayer",function(){f._trigger(c.jPlayer.event.click)})}}if(this.options.emulateHtml){this._emulateHtmlBridge()}if(this.html.used&&!this.flash.used){setTimeout(function(){f.internal.ready=true;f.version.flash="n/a";f._trigger(c.jPlayer.event.repeat);f._trigger(c.jPlayer.event.ready)},100)}this._updateNativeVideoControls();this._updateInterface();this._updateButtons(false);this._updateAutohide();this._updateVolume(this.options.volume);this._updateMute(this.options.muted);if(this.css.jq.videoPlay.length){this.css.jq.videoPlay.hide()}c.jPlayer.prototype.count++},destroy:function(){this.clearMedia();this._removeUiClass();if(this.css.jq.currentTime.length){this.css.jq.currentTime.text("")}if(this.css.jq.duration.length){this.css.jq.duration.text("")}c.each(this.css.jq,function(e,f){if(f.length){f.unbind(".jPlayer")}});this.internal.poster.jq.unbind(".jPlayer");if(this.internal.video.jq){this.internal.video.jq.unbind(".jPlayer")}if(this.options.emulateHtml){this._destroyHtmlBridge()}this.element.removeData("jPlayer");this.element.unbind(".jPlayer");this.element.empty();delete this.instances[this.internal.instance]},enable:function(){},disable:function(){},_testCanPlayType:function(f){try{f.canPlayType(this.format.mp3.codec);return true}catch(e){return false}},_uaBlocklist:function(f){var e=navigator.userAgent.toLowerCase(),g=false;c.each(f,function(i,h){if(h&&h.test(e)){g=true;return false}});return g},_restrictNativeVideoControls:function(){if(this.require.audio){if(this.status.nativeVideoControls){this.status.nativeVideoControls=false;this.status.noFullScreen=true}}},_updateNativeVideoControls:function(){if(this.html.video.available&&this.html.used){this.htmlElement.video.controls=this.status.nativeVideoControls;this._updateAutohide();if(this.status.nativeVideoControls&&this.require.video){this.internal.poster.jq.hide();this.internal.video.jq.css({width:this.status.width,height:this.status.height})}else{if(this.status.waitForPlay&&this.status.video){this.internal.poster.jq.show();this.internal.video.jq.css({width:"0px",height:"0px"})}}}},_addHtmlEventListeners:function(e,g){var f=this;e.preload=this.options.preload;e.muted=this.options.muted;e.volume=this.options.volume;e.addEventListener("progress",function(){if(g.gate){f._getHtmlStatus(e);f._updateInterface();f._trigger(c.jPlayer.event.progress)}},false);e.addEventListener("timeupdate",function(){if(g.gate){f._getHtmlStatus(e);f._updateInterface();f._trigger(c.jPlayer.event.timeupdate)}},false);e.addEventListener("durationchange",function(){if(g.gate){f._getHtmlStatus(e);f._updateInterface();f._trigger(c.jPlayer.event.durationchange)}},false);e.addEventListener("play",function(){if(g.gate){f._updateButtons(true);f._html_checkWaitForPlay();f._trigger(c.jPlayer.event.play)}},false);e.addEventListener("playing",function(){if(g.gate){f._updateButtons(true);f._seeked();f._trigger(c.jPlayer.event.playing)}},false);e.addEventListener("pause",function(){if(g.gate){f._updateButtons(false);f._trigger(c.jPlayer.event.pause)}},false);e.addEventListener("waiting",function(){if(g.gate){f._seeking();f._trigger(c.jPlayer.event.waiting)}},false);e.addEventListener("seeking",function(){if(g.gate){f._seeking();f._trigger(c.jPlayer.event.seeking)}},false);e.addEventListener("seeked",function(){if(g.gate){f._seeked();f._trigger(c.jPlayer.event.seeked)}},false);e.addEventListener("volumechange",function(){if(g.gate){f.options.volume=e.volume;f.options.muted=e.muted;f._updateMute();f._updateVolume();f._trigger(c.jPlayer.event.volumechange)}},false);e.addEventListener("suspend",function(){if(g.gate){f._seeked();f._trigger(c.jPlayer.event.suspend)}},false);e.addEventListener("ended",function(){if(g.gate){if(!c.jPlayer.browser.webkit){f.htmlElement.media.currentTime=0}f.htmlElement.media.pause();f._updateButtons(false);f._getHtmlStatus(e,true);f._updateInterface();f._trigger(c.jPlayer.event.ended)}},false);e.addEventListener("error",function(){if(g.gate){f._updateButtons(false);f._seeked();if(f.status.srcSet){clearTimeout(f.internal.htmlDlyCmdId);f.status.waitForLoad=true;f.status.waitForPlay=true;if(f.status.video&&!f.status.nativeVideoControls){f.internal.video.jq.css({width:"0px",height:"0px"})}if(f._validString(f.status.media.poster)&&!f.status.nativeVideoControls){f.internal.poster.jq.show()}if(f.css.jq.videoPlay.length){f.css.jq.videoPlay.show()}f._error({type:c.jPlayer.error.URL,context:f.status.src,message:c.jPlayer.errorMsg.URL,hint:c.jPlayer.errorHint.URL})}}},false);c.each(c.jPlayer.htmlEvent,function(j,h){e.addEventListener(this,function(){if(g.gate){f._trigger(c.jPlayer.event[h])}},false)})},_getHtmlStatus:function(i,f){var e=0,g=0,h=0,j=0;if(isFinite(i.duration)){this.status.duration=i.duration}e=i.currentTime;g=(this.status.duration>0)?100*e/this.status.duration:0;if((typeof i.seekable==="object")&&(i.seekable.length>0)){h=(this.status.duration>0)?100*i.seekable.end(i.seekable.length-1)/this.status.duration:100;j=(this.status.duration>0)?100*i.currentTime/i.seekable.end(i.seekable.length-1):0}else{h=100;j=g}if(f){e=0;j=0;g=0}this.status.seekPercent=h;this.status.currentPercentRelative=j;this.status.currentPercentAbsolute=g;this.status.currentTime=e;this.status.readyState=i.readyState;this.status.networkState=i.networkState;this.status.playbackRate=i.playbackRate;this.status.ended=i.ended},_resetStatus:function(){this.status=c.extend({},this.status,c.jPlayer.prototype.status)},_trigger:function(f,e,g){var h=c.Event(f);h.jPlayer={};h.jPlayer.version=c.extend({},this.version);h.jPlayer.options=c.extend(true,{},this.options);h.jPlayer.status=c.extend(true,{},this.status);h.jPlayer.html=c.extend(true,{},this.html);h.jPlayer.flash=c.extend(true,{},this.flash);if(e){h.jPlayer.error=c.extend({},e)}if(g){h.jPlayer.warning=c.extend({},g)}this.element.trigger(h)},jPlayerFlashEvent:function(g,e){if(g===c.jPlayer.event.ready){if(!this.internal.ready){this.internal.ready=true;this.internal.flash.jq.css({width:"0px",height:"0px"});this.version.flash=e.version;if(this.version.needFlash!==this.version.flash){this._error({type:c.jPlayer.error.VERSION,context:this.version.flash,message:c.jPlayer.errorMsg.VERSION+this.version.flash,hint:c.jPlayer.errorHint.VERSION})}this._trigger(c.jPlayer.event.repeat);this._trigger(g)}else{if(this.flash.gate){if(this.status.srcSet){var h=this.status.currentTime,f=this.status.paused;this.setMedia(this.status.media);if(h>0){if(f){this.pause(h)}else{this.play(h)}}}this._trigger(c.jPlayer.event.flashreset)}}}if(this.flash.gate){switch(g){case c.jPlayer.event.progress:this._getFlashStatus(e);this._updateInterface();this._trigger(g);break;case c.jPlayer.event.timeupdate:this._getFlashStatus(e);this._updateInterface();this._trigger(g);break;case c.jPlayer.event.play:this._seeked();this._updateButtons(true);this._trigger(g);break;case c.jPlayer.event.pause:this._updateButtons(false);this._trigger(g);break;case c.jPlayer.event.ended:this._updateButtons(false);this._trigger(g);break;case c.jPlayer.event.click:this._trigger(g);break;case c.jPlayer.event.error:this.status.waitForLoad=true;this.status.waitForPlay=true;if(this.status.video){this.internal.flash.jq.css({width:"0px",height:"0px"})}if(this._validString(this.status.media.poster)){this.internal.poster.jq.show()}if(this.css.jq.videoPlay.length&&this.status.video){this.css.jq.videoPlay.show()}if(this.status.video){this._flash_setVideo(this.status.media)}else{this._flash_setAudio(this.status.media)}this._updateButtons(false);this._error({type:c.jPlayer.error.URL,context:e.src,message:c.jPlayer.errorMsg.URL,hint:c.jPlayer.errorHint.URL});break;case c.jPlayer.event.seeking:this._seeking();this._trigger(g);break;case c.jPlayer.event.seeked:this._seeked();this._trigger(g);break;case c.jPlayer.event.ready:break;default:this._trigger(g)}}return false},_getFlashStatus:function(e){this.status.seekPercent=e.seekPercent;this.status.currentPercentRelative=e.currentPercentRelative;this.status.currentPercentAbsolute=e.currentPercentAbsolute;this.status.currentTime=e.currentTime;this.status.duration=e.duration;this.status.readyState=4;this.status.networkState=0;this.status.playbackRate=1;this.status.ended=false},_updateButtons:function(e){if(e!==d){this.status.paused=!e;if(this.css.jq.play.length&&this.css.jq.pause.length){if(e){this.css.jq.play.hide();this.css.jq.pause.show()}else{this.css.jq.play.show();this.css.jq.pause.hide()}}}if(this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length){if(this.status.noFullScreen){this.css.jq.fullScreen.hide();this.css.jq.restoreScreen.hide()}else{if(this.options.fullScreen){this.css.jq.fullScreen.hide();this.css.jq.restoreScreen.show()}else{this.css.jq.fullScreen.show();this.css.jq.restoreScreen.hide()}}}if(this.css.jq.repeat.length&&this.css.jq.repeatOff.length){if(this.options.loop){this.css.jq.repeat.hide();this.css.jq.repeatOff.show()}else{this.css.jq.repeat.show();this.css.jq.repeatOff.hide()}}},_updateInterface:function(){if(this.css.jq.seekBar.length){this.css.jq.seekBar.width(this.status.seekPercent+"%")}if(this.css.jq.playBar.length){this.css.jq.playBar.width(this.status.currentPercentRelative+"%")}if(this.css.jq.currentTime.length){this.css.jq.currentTime.text(c.jPlayer.convertTime(this.status.currentTime))}if(this.css.jq.duration.length){this.css.jq.duration.text(c.jPlayer.convertTime(this.status.duration))}},_seeking:function(){if(this.css.jq.seekBar.length){this.css.jq.seekBar.addClass("jp-seeking-bg")}},_seeked:function(){if(this.css.jq.seekBar.length){this.css.jq.seekBar.removeClass("jp-seeking-bg")}},_resetGate:function(){this.html.audio.gate=false;this.html.video.gate=false;this.flash.gate=false},_resetActive:function(){this.html.active=false;this.flash.active=false},setMedia:function(g){var f=this,e=false,h=this.status.media.poster!==g.poster;this._resetMedia();this._resetGate();this._resetActive();c.each(this.formats,function(i,k){var j=f.format[k].media==="video";c.each(f.solutions,function(m,l){if(f[l].support[k]&&f._validString(g[k])){var n=l==="html";if(j){if(n){f.html.video.gate=true;f._html_setVideo(g);f.html.active=true}else{f.flash.gate=true;f._flash_setVideo(g);f.flash.active=true}if(f.css.jq.videoPlay.length){f.css.jq.videoPlay.show()}f.status.video=true}else{if(n){f.html.audio.gate=true;f._html_setAudio(g);f.html.active=true}else{f.flash.gate=true;f._flash_setAudio(g);f.flash.active=true}if(f.css.jq.videoPlay.length){f.css.jq.videoPlay.hide()}f.status.video=false}e=true;return false}});if(e){return false}});if(e){if(!(this.status.nativeVideoControls&&this.html.video.gate)){if(this._validString(g.poster)){if(h){this.htmlElement.poster.src=g.poster}else{this.internal.poster.jq.show()}}}this.status.srcSet=true;this.status.media=c.extend({},g);this._updateButtons(false);this._updateInterface()}else{this._error({type:c.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:c.jPlayer.errorMsg.NO_SUPPORT,hint:c.jPlayer.errorHint.NO_SUPPORT})}},_resetMedia:function(){this._resetStatus();this._updateButtons(false);this._updateInterface();this._seeked();this.internal.poster.jq.hide();clearTimeout(this.internal.htmlDlyCmdId);if(this.html.active){this._html_resetMedia()}else{if(this.flash.active){this._flash_resetMedia()}}},clearMedia:function(){this._resetMedia();if(this.html.active){this._html_clearMedia()}else{if(this.flash.active){this._flash_clearMedia()}}this._resetGate();this._resetActive()},load:function(){if(this.status.srcSet){if(this.html.active){this._html_load()}else{if(this.flash.active){this._flash_load()}}}else{this._urlNotSetError("load")}},play:function(e){e=(typeof e==="number")?e:NaN;if(this.status.srcSet){if(this.html.active){this._html_play(e)}else{if(this.flash.active){this._flash_play(e)}}}else{this._urlNotSetError("play")}},videoPlay:function(){this.play()},pause:function(e){e=(typeof e==="number")?e:NaN;if(this.status.srcSet){if(this.html.active){this._html_pause(e)}else{if(this.flash.active){this._flash_pause(e)}}}else{this._urlNotSetError("pause")}},pauseOthers:function(){var e=this;c.each(this.instances,function(g,f){if(e.element!==f){if(f.data("jPlayer").status.srcSet){f.jPlayer("pause")}}})},stop:function(){if(this.status.srcSet){if(this.html.active){this._html_pause(0)}else{if(this.flash.active){this._flash_pause(0)}}}else{this._urlNotSetError("stop")}},stopOthers:function(){var e=this;c.each(this.instances,function(g,f){if(e.element!==f){if(f.data("jPlayer").status.srcSet){f.jPlayer("stop")}}})},playHead:function(e){e=this._limitValue(e,0,100);if(this.status.srcSet){if(this.html.active){this._html_playHead(e)}else{if(this.flash.active){this._flash_playHead(e)}}}else{this._urlNotSetError("playHead")}},_muted:function(e){this.options.muted=e;if(this.html.used){this._html_mute(e)}if(this.flash.used){this._flash_mute(e)}if(!this.html.video.gate&&!this.html.audio.gate){this._updateMute(e);this._updateVolume(this.options.volume);this._trigger(c.jPlayer.event.volumechange)}},mute:function(e){e=e===d?true:!!e;this._muted(e)},unmute:function(e){e=e===d?true:!!e;this._muted(!e)},_updateMute:function(e){if(e===d){e=this.options.muted}if(this.css.jq.mute.length&&this.css.jq.unmute.length){if(this.status.noVolume){this.css.jq.mute.hide();this.css.jq.unmute.hide()}else{if(e){this.css.jq.mute.hide();this.css.jq.unmute.show()}else{this.css.jq.mute.show();this.css.jq.unmute.hide()}}}},volume:function(e){e=this._limitValue(e,0,1);this.options.volume=e;if(this.html.used){this._html_volume(e)}if(this.flash.used){this._flash_volume(e)}if(!this.html.video.gate&&!this.html.audio.gate){this._updateVolume(e);this._trigger(c.jPlayer.event.volumechange)}},volumeBar:function(j){if(this.css.jq.volumeBar.length){var k=this.css.jq.volumeBar.offset(),f=j.pageX-k.left,g=this.css.jq.volumeBar.width(),l=this.css.jq.volumeBar.height()-j.pageY+k.top,i=this.css.jq.volumeBar.height();if(this.options.verticalVolume){this.volume(l/i)}else{this.volume(f/g)}}if(this.options.muted){this._muted(false)}},volumeBarValue:function(f){this.volumeBar(f)},_updateVolume:function(e){if(e===d){e=this.options.volume}e=this.options.muted?0:e;if(this.status.noVolume){if(this.css.jq.volumeBar.length){this.css.jq.volumeBar.hide()}if(this.css.jq.volumeBarValue.length){this.css.jq.volumeBarValue.hide()}if(this.css.jq.volumeMax.length){this.css.jq.volumeMax.hide()}}else{if(this.css.jq.volumeBar.length){this.css.jq.volumeBar.show()}if(this.css.jq.volumeBarValue.length){this.css.jq.volumeBarValue.show();this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"]((e*100)+"%")}if(this.css.jq.volumeMax.length){this.css.jq.volumeMax.show()}}},volumeMax:function(){this.volume(1);if(this.options.muted){this._muted(false)}},_cssSelectorAncestor:function(f){var e=this;this.options.cssSelectorAncestor=f;this._removeUiClass();this.ancestorJq=f?c(f):[];if(f&&this.ancestorJq.length!==1){this._warning({type:c.jPlayer.warning.CSS_SELECTOR_COUNT,context:f,message:c.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:c.jPlayer.warningHint.CSS_SELECTOR_COUNT})}this._addUiClass();c.each(this.options.cssSelector,function(g,h){e._cssSelector(g,h)})},_cssSelector:function(g,h){var e=this;if(typeof h==="string"){if(c.jPlayer.prototype.options.cssSelector[g]){if(this.css.jq[g]&&this.css.jq[g].length){this.css.jq[g].unbind(".jPlayer")}this.options.cssSelector[g]=h;this.css.cs[g]=this.options.cssSelectorAncestor+" "+h;if(h){this.css.jq[g]=c(this.css.cs[g])}else{this.css.jq[g]=[]}if(this.css.jq[g].length){var f=function(i){e[g](i);c(this).blur();return false};this.css.jq[g].bind("click.jPlayer",f)}if(h&&this.css.jq[g].length!==1){this._warning({type:c.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[g],message:c.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[g].length+" found for "+g+" method.",hint:c.jPlayer.warningHint.CSS_SELECTOR_COUNT})}}else{this._warning({type:c.jPlayer.warning.CSS_SELECTOR_METHOD,context:g,message:c.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:c.jPlayer.warningHint.CSS_SELECTOR_METHOD})}}else{this._warning({type:c.jPlayer.warning.CSS_SELECTOR_STRING,context:h,message:c.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:c.jPlayer.warningHint.CSS_SELECTOR_STRING})}},seekBar:function(i){if(this.css.jq.seekBar){var j=this.css.jq.seekBar.offset();var f=i.pageX-j.left;var g=this.css.jq.seekBar.width();var h=100*f/g;this.playHead(h)}},playBar:function(f){this.seekBar(f)},repeat:function(){this._loop(true)},repeatOff:function(){this._loop(false)},_loop:function(e){if(this.options.loop!==e){this.options.loop=e;this._updateButtons();this._trigger(c.jPlayer.event.repeat)}},currentTime:function(){},duration:function(){},gui:function(){},noSolution:function(){},option:function(k,n){var f=k;if(arguments.length===0){return c.extend(true,{},this.options)}if(typeof k==="string"){var m=k.split(".");if(n===d){var h=c.extend(true,{},this.options);for(var g=0;g<m.length;g++){if(h[m[g]]!==d){h=h[m[g]]}else{this._warning({type:c.jPlayer.warning.OPTION_KEY,context:k,message:c.jPlayer.warningMsg.OPTION_KEY,hint:c.jPlayer.warningHint.OPTION_KEY});return d}}return h}f={};var l=f;for(var e=0;e<m.length;e++){if(e<m.length-1){l[m[e]]={};l=l[m[e]]}else{l[m[e]]=n}}}this._setOptions(f);return this},_setOptions:function(f){var e=this;c.each(f,function(g,h){e._setOption(g,h)});return this},_setOption:function(f,g){var e=this;switch(f){case"volume":this.volume(g);break;case"muted":this._muted(g);break;case"cssSelectorAncestor":this._cssSelectorAncestor(g);break;case"cssSelector":c.each(g,function(h,i){e._cssSelector(h,i)});break;case"fullScreen":if(this.options[f]!==g){this._removeUiClass();this.options[f]=g;this._refreshSize()}break;case"size":if(!this.options.fullScreen&&this.options[f].cssClass!==g.cssClass){this._removeUiClass()}this.options[f]=c.extend({},this.options[f],g);this._refreshSize();break;case"sizeFull":if(this.options.fullScreen&&this.options[f].cssClass!==g.cssClass){this._removeUiClass()}this.options[f]=c.extend({},this.options[f],g);this._refreshSize();break;case"autohide":this.options[f]=c.extend({},this.options[f],g);this._updateAutohide();break;case"loop":this._loop(g);break;case"nativeVideoControls":this.options[f]=c.extend({},this.options[f],g);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this._restrictNativeVideoControls();this._updateNativeVideoControls();break;case"noFullScreen":this.options[f]=c.extend({},this.options[f],g);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullScreen=this._uaBlocklist(this.options.noFullScreen);this._restrictNativeVideoControls();this._updateButtons();break;case"noVolume":this.options[f]=c.extend({},this.options[f],g);this.status.noVolume=this._uaBlocklist(this.options.noVolume);this._updateVolume();this._updateMute();break;case"emulateHtml":if(this.options[f]!==g){this.options[f]=g;if(g){this._emulateHtmlBridge()}else{this._destroyHtmlBridge()}}break}return this},_refreshSize:function(){this._setSize();this._addUiClass();this._updateSize();this._updateButtons();this._updateAutohide();this._trigger(c.jPlayer.event.resize)},_setSize:function(){if(this.options.fullScreen){this.status.width=this.options.sizeFull.width;this.status.height=this.options.sizeFull.height;this.status.cssClass=this.options.sizeFull.cssClass}else{this.status.width=this.options.size.width;this.status.height=this.options.size.height;this.status.cssClass=this.options.size.cssClass}this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){if(this.ancestorJq.length){this.ancestorJq.addClass(this.status.cssClass)}},_removeUiClass:function(){if(this.ancestorJq.length){this.ancestorJq.removeClass(this.status.cssClass)}},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height});if(!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls){this.internal.video.jq.css({width:this.status.width,height:this.status.height})}else{if(!this.status.waitForPlay&&this.flash.active&&this.status.video){this.internal.flash.jq.css({width:this.status.width,height:this.status.height})}}},_updateAutohide:function(){var e=this,i="mousemove.jPlayer",h=".jPlayerAutohide",f=i+h,g=function(){e.css.jq.gui.fadeIn(e.options.autohide.fadeIn,function(){clearTimeout(e.internal.autohideId);e.internal.autohideId=setTimeout(function(){e.css.jq.gui.fadeOut(e.options.autohide.fadeOut)},e.options.autohide.hold)})};if(this.css.jq.gui.length){this.css.jq.gui.stop(true,true);clearTimeout(this.internal.autohideId);this.element.unbind(h);this.css.jq.gui.unbind(h);if(!this.status.nativeVideoControls){if(this.options.fullScreen&&this.options.autohide.full||!this.options.fullScreen&&this.options.autohide.restored){this.element.bind(f,g);this.css.jq.gui.bind(f,g);this.css.jq.gui.hide()}else{this.css.jq.gui.show()}}else{this.css.jq.gui.hide()}}},fullScreen:function(){this._setOption("fullScreen",true)},restoreScreen:function(){this._setOption("fullScreen",false)},_html_initMedia:function(){this.htmlElement.media.src=this.status.src;if(this.options.preload!=="none"){this._html_load()}this._trigger(c.jPlayer.event.timeupdate)},_html_setAudio:function(f){var e=this;c.each(this.formats,function(g,h){if(e.html.support[h]&&f[h]){e.status.src=f[h];e.status.format[h]=true;e.status.formatType=h;return false}});this.htmlElement.media=this.htmlElement.audio;this._html_initMedia()},_html_setVideo:function(f){var e=this;c.each(this.formats,function(g,h){if(e.html.support[h]&&f[h]){e.status.src=f[h];e.status.format[h]=true;e.status.formatType=h;return false}});if(this.status.nativeVideoControls){this.htmlElement.video.poster=this._validString(f.poster)?f.poster:""}this.htmlElement.media=this.htmlElement.video;this._html_initMedia()},_html_resetMedia:function(){if(this.htmlElement.media){if(this.htmlElement.media.id===this.internal.video.id&&!this.status.nativeVideoControls){this.internal.video.jq.css({width:"0px",height:"0px"})}this.htmlElement.media.pause()}},_html_clearMedia:function(){if(this.htmlElement.media){this.htmlElement.media.src="";this.htmlElement.media.load()}},_html_load:function(){if(this.status.waitForLoad){this.status.waitForLoad=false;this.htmlElement.media.load()}clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(g){var e=this;this._html_load();this.htmlElement.media.play();if(!isNaN(g)){try{this.htmlElement.media.currentTime=g}catch(f){this.internal.htmlDlyCmdId=setTimeout(function(){e.play(g)},100);return}}this._html_checkWaitForPlay()},_html_pause:function(g){var e=this;if(g>0){this._html_load()}else{clearTimeout(this.internal.htmlDlyCmdId)}this.htmlElement.media.pause();if(!isNaN(g)){try{this.htmlElement.media.currentTime=g}catch(f){this.internal.htmlDlyCmdId=setTimeout(function(){e.pause(g)},100);return}}if(g>0){this._html_checkWaitForPlay()}},_html_playHead:function(g){var e=this;this._html_load();try{if((typeof this.htmlElement.media.seekable==="object")&&(this.htmlElement.media.seekable.length>0)){this.htmlElement.media.currentTime=g*this.htmlElement.media.seekable.end(this.htmlElement.media.seekable.length-1)/100}else{if(this.htmlElement.media.duration>0&&!isNaN(this.htmlElement.media.duration)){this.htmlElement.media.currentTime=g*this.htmlElement.media.duration/100}else{throw"e"}}}catch(f){this.internal.htmlDlyCmdId=setTimeout(function(){e.playHead(g)},100);return}if(!this.status.waitForLoad){this._html_checkWaitForPlay()}},_html_checkWaitForPlay:function(){if(this.status.waitForPlay){this.status.waitForPlay=false;if(this.css.jq.videoPlay.length){this.css.jq.videoPlay.hide()}if(this.status.video){this.internal.poster.jq.hide();this.internal.video.jq.css({width:this.status.width,height:this.status.height})}}},_html_volume:function(e){if(this.html.audio.available){this.htmlElement.audio.volume=e}if(this.html.video.available){this.htmlElement.video.volume=e}},_html_mute:function(e){if(this.html.audio.available){this.htmlElement.audio.muted=e}if(this.html.video.available){this.htmlElement.video.muted=e}},_flash_setAudio:function(g){var e=this;try{c.each(this.formats,function(h,i){if(e.flash.support[i]&&g[i]){switch(i){case"m4a":case"fla":e._getMovie().fl_setAudio_m4a(g[i]);break;case"mp3":e._getMovie().fl_setAudio_mp3(g[i]);break;case"rtmpa":e._getMovie().fl_setAudio_rtmp(g[i]);break}e.status.src=g[i];e.status.format[i]=true;e.status.formatType=i;return false}});if(this.options.preload==="auto"){this._flash_load();this.status.waitForLoad=false}}catch(f){this._flashError(f)}},_flash_setVideo:function(g){var e=this;try{c.each(this.formats,function(h,i){if(e.flash.support[i]&&g[i]){switch(i){case"m4v":case"flv":e._getMovie().fl_setVideo_m4v(g[i]);break;case"rtmpv":e._getMovie().fl_setVideo_rtmp(g[i]);break}e.status.src=g[i];e.status.format[i]=true;e.status.formatType=i;return false}});if(this.options.preload==="auto"){this._flash_load();this.status.waitForLoad=false}}catch(f){this._flashError(f)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"});this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(e){this._flashError(e)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(e){this._flashError(e)}this.status.waitForLoad=false},_flash_play:function(f){try{this._getMovie().fl_play(f)}catch(e){this._flashError(e)}this.status.waitForLoad=false;this._flash_checkWaitForPlay()},_flash_pause:function(f){try{this._getMovie().fl_pause(f)}catch(e){this._flashError(e)}if(f>0){this.status.waitForLoad=false;this._flash_checkWaitForPlay()}},_flash_playHead:function(f){try{this._getMovie().fl_play_head(f)}catch(e){this._flashError(e)}if(!this.status.waitForLoad){this._flash_checkWaitForPlay()}},_flash_checkWaitForPlay:function(){if(this.status.waitForPlay){this.status.waitForPlay=false;if(this.css.jq.videoPlay.length){this.css.jq.videoPlay.hide()}if(this.status.video){this.internal.poster.jq.hide();this.internal.flash.jq.css({width:this.status.width,height:this.status.height})}}},_flash_volume:function(e){try{this._getMovie().fl_volume(e)}catch(f){this._flashError(f)}},_flash_mute:function(e){try{this._getMovie().fl_mute(e)}catch(f){this._flashError(f)}},_getMovie:function(){return document[this.internal.flash.id]},_checkForFlash:function(g){var f=false;var i;if(window.ActiveXObject){try{i=new ActiveXObject(("ShockwaveFlash.ShockwaveFlash."+g));f=true}catch(j){}}else{if(navigator.plugins&&navigator.mimeTypes.length>0){i=navigator.plugins["Shockwave Flash"];if(i){var h=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1");if(h>=g){f=true}}}}return f},_validString:function(e){return(e&&typeof e==="string")},_limitValue:function(g,f,e){return(g<f)?f:((g>e)?e:g)},_urlNotSetError:function(e){this._error({type:c.jPlayer.error.URL_NOT_SET,context:e,message:c.jPlayer.errorMsg.URL_NOT_SET,hint:c.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(e){var f;if(!this.internal.ready){f="FLASH"}else{f="FLASH_DISABLED"}this._error({type:c.jPlayer.error[f],context:this.internal.flash.swf,message:c.jPlayer.errorMsg[f]+e.message,hint:c.jPlayer.errorHint[f]});this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(e){this._trigger(c.jPlayer.event.error,e);if(this.options.errorAlerts){this._alert("Error!"+(e.message?"\n\n"+e.message:"")+(e.hint?"\n\n"+e.hint:"")+"\n\nContext: "+e.context)}},_warning:function(e){this._trigger(c.jPlayer.event.warning,d,e);if(this.options.warningAlerts){this._alert("Warning!"+(e.message?"\n\n"+e.message:"")+(e.hint?"\n\n"+e.hint:"")+"\n\nContext: "+e.context)}},_alert:function(e){alert("jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+e)},_emulateHtmlBridge:function(){var e=this;c.each(c.jPlayer.emulateMethods.split(/\s+/g),function(g,f){e.internal.domNode[f]=function(h){e[f](h)}});c.each(c.jPlayer.event,function(g,h){var f=true;c.each(c.jPlayer.reservedEvent.split(/\s+/g),function(k,j){if(j===g){f=false;return false}});if(f){e.element.bind(h+".jPlayer.jPlayerHtml",function(){e._emulateHtmlUpdate();var i=document.createEvent("Event");i.initEvent(g,false,true);e.internal.domNode.dispatchEvent(i)})}})},_emulateHtmlUpdate:function(){var e=this;c.each(c.jPlayer.emulateStatus.split(/\s+/g),function(g,f){e.internal.domNode[f]=e.status[f]});c.each(c.jPlayer.emulateOptions.split(/\s+/g),function(g,f){e.internal.domNode[f]=e.options[f]})},_destroyHtmlBridge:function(){var e=this;this.element.unbind(".jPlayerHtml");var f=c.jPlayer.emulateMethods+" "+c.jPlayer.emulateStatus+" "+c.jPlayer.emulateOptions;c.each(f.split(/\s+/g),function(h,g){delete e.internal.domNode[g]})}};c.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"};c.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+c.jPlayer.prototype.version.script+" needs Jplayer.swf version "+c.jPlayer.prototype.version.needFlash+" but found "};c.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."};c.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"};c.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."};c.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}})(jQuery);if(window.M&&typeof window.M.define=="function"){window.M.define("/js/jquery.jplayer.js",function(){return jQuery})}M.define("TopTip",function(b,a,c){c.exports={show:function(d){var d=$('<div id="over_container"><div id="over_message">'+d+"</div></div>").appendTo("body");setTimeout(function(){d.hide("fast",function(){d.remove()})},3000)}}});M.define("dialog/Layer",function(a){var g=0,f=550,d=(function(){return $.browser&&$.browser.msie&&parseInt($.browser.version,10)==7}()),c=(function(){return $.browser&&$.browser.msie&&parseInt($.browser.version,10)<7}());function b(){return g++}function e(h){this.opacity=0.8;this.background="#fff";this.impl="Dialog";this.fixed=true;M.mix(this,h);this.id="_j_layer_"+b();this.stacks=[];this.activeStackId=null;this.overflow=false;this.changeFixed=false;e.instances[this.id]=this;if(!e[this.impl]){e[this.impl]=[]}e[this.impl].push(this.id);this.init()}e.prototype={init:function(){this._createPanel()},_createPanel:function(){f++;var h={position:(!c&&this.fixed)?"fixed":"absolute",width:"100%",height:"100%",top:0,left:0},j=M.mix({},h,{"z-index":f,display:"none"}),k=M.mix({},h,{position:!c?"fixed":"absolute",background:this.background,opacity:this.opacity,"z-index":-1}),i=M.mix({},h,{"z-index":0},(!c&&this.fixed)?{"overflow-x":"hidden","overflow-y":"hidden"}:{overflow:"visible"});this._panel=$('<div id="'+this.id+'" class="layer _j_layer">                                <div class="layer_mask _j_mask"></div>                                <div class="layer_content _j_content"></div>                            </div>').css(j).appendTo("body");this._mask=this._panel.children("._j_mask").css(k);this._content=this._panel.children("._j_content").css(i)},setZIndex:function(h){f=h;this._panel.css("z-index",f)},getZIndex:function(){return +this._panel.css("z-index")},toFront:function(){this.setZIndex(f+1)},setFixed:function(h){h=!!h;if(this.fixed!=h){this.changeFixed=true;this.fixed=h;if(!c&&this.fixed){this._panel.css("position","fixed");this._content.css({position:"fixed","overflow-x":"hidden","overflow-y":"hidden"})}else{this._panel.css("position","absolute");this._content.css({position:"absolute","overflow-x":"","overflow-y":"",overflow:"visible"})}}else{this.changeFixed=false}},newStack:function(i){var h=$(i).appendTo(this._content);this.stacks.push(h);return this.stacks.length-1},getStack:function(h){return this.stacks[h]},getActiveStack:function(){return this.stacks[this.activeStackId]},setActiveStack:function(h){this.activeStackId=h},getPanel:function(){return this._panel},getMask:function(){return this._mask},getContent:function(){return this._content},show:function(j){var i=this;if(this.visible){typeof j==="function"&&j();return}e.activeId=this.id;this.visible=true;if(c){var h=document.documentElement&&document.documentElement.scrollHeight||document.body.scrollHeight;this._panel.css("height",h);this._mask.css("height",h)}this._panel.fadeIn(200,function(){typeof j==="function"&&j()})},hide:function(i){var h=this;if(!this.visible){typeof i==="function"&&i();return}this.visible=false;if(c){this._panel.css("height","");this._mask.css("height","")}this._panel.fadeOut(200,function(){typeof i==="function"&&i();h._recoverTopScroller()})},setOverFlow:function(h){this.overflow=h;if(h){if(!c&&this.fixed){this._hideTopScroller();this._content.css("overflow-y","auto")}}else{if(!c&&this.fixed){this._content.css("overflow-y","hidden")}}},_hideTopScroller:function(){if(d){$("html").css("overflow","hidden")}else{if(!c){$("body").css("overflow","hidden")}else{$("body").css("overflow-x","hidden");this._panel.height($(document).height()+20)}}},_recoverTopScroller:function(){if(d){$("html").css("overflow","")}else{if(!c){$("body").css("overflow","")}else{$("body").css("overflow-x","")}}},destroy:function(){this.hide($.proxy(function(){this._panel&&this._panel.remove();this._panel=null;if(M.indexOf(e[this.impl],this.id)!=-1){e[this.impl].splice(M.indexOf(e[this.impl],this.id),1)}delete e.instances[this.id]},this))},clear:function(){this._content.empty();this.stacks=[];this.activeStackId=null}};e.instances={};e.activeId=null;e.getInstance=function(h){return e.instances[h]};e.getActive=function(h){var i=e.getInstance(e.activeId);if(h&&i){i=i.impl===h?i:null}return i};e.getImplInstance=function(i){var h=e.getActive(i);if(!h&&M.is(e[i],"Array")&&e[i].length){h=e.getInstance(e[i][e[i].length-1])}return h};e.closeActive=function(){var h=e.getActive();if(h&&h.getActiveStack()){h.getActiveStack().trigger("close")}};$(document).keyup(function(h){if(h.keyCode==27){e.closeActive()}});$(document).unload(function(){M.forEach(e.instances,function(){e.destroy()})});return e});M.define("dialog/DialogBase",function(b){var e=b("dialog/Layer"),a=M.Event,d=(function(){return $.browser&&$.browser.msie&&parseInt($.browser.version,10)<7}());function c(f){this.newLayer=false;this.width="";this.height="";this.background="#000";this.panelBackground="#fff";this.bgOpacity=0.7;this.stackable=true;this.fixed=true;this.reposition=false;this.autoPosition=true;this.minTopOffset=20;this.layerZIndex=-1;this.impl="Dialog";M.mix(this,f);this.visible=false;this.destroyed=false;this.positioned=false;this.resizeTimer=0;this.init()}c.prototype={tpl:"<div />",init:function(){this._createDialog();this._bindEvents()},_createDialog:function(){this._panel=$(this.tpl).css({position:"absolute",opacity:0,display:"none",background:this.panelBackground,"z-index":0});this.setRect({width:this.width,height:this.height});this._layer=!this.newLayer&&e.getImplInstance(this.impl)||new e({impl:this.impl});if(this.layerZIndex>=0){this._layer.setZIndex(this.layerZIndex)}this._layer.setFixed(this.fixed);this._layer.getMask().css({background:this.background,opacity:this.bgOpacity});this._stackId=this._layer.newStack(this._panel);this.setPanelContent()},_bindEvents:function(){var f=this;$(window).resize($.proxy(this.resizePosition,this));M.Event(this).on("resize",$.proxy(this.resizePosition,this));this._panel.delegate("._j_close, a[data-dialog-button]","click",function(g){var h=$(g.currentTarget).attr("data-dialog-button");if(h=="hide"){f.hide()}else{f.close()}g.preventDefault()});this._panel.bind("close",function(g,h){f.close(h)})},resizePosition:function(){var f=this;clearTimeout(this.resizeTimer);if(f.visible&&f.autoPosition){this.resizeTimer=setTimeout(function(){f.setPosition()},100)}},addClass:function(f){this._panel.addClass(f)},removeClass:function(f){this._panel.removeClass(f)},setRect:function(f){if(f.width){this._panel.css("width",f.width);this.width=f.width}if(f.height){this._panel.css("height",f.height);this.height=f.height}},getPanel:function(){return this._panel},getLayer:function(){return this._layer},getMask:function(){return this._layer&&this._layer.getMask()},setPanelContent:function(){},_getPanelRect:function(){var f=this.getPanel(),g=f.outerHeight(),h=f.outerWidth();if(!f.is(":visible")){f.css({visibility:"hidden",display:"block"});var g=f.outerHeight(),h=f.outerWidth();f.css({visibility:"",display:""})}return{height:g,width:h}},_getNumric:function(f){f=parseInt(f,10);return isNaN(f)?0:f},setPosition:function(f){var g=this._getPanelRect(),h={width:$(window).width(),height:$(window).height()};var k=(h.width-(this._getNumric(this.width)>0?this._getNumric(this.width):g.width))/2,j=(h.height-(this._getNumric(this.height)>0?this._getNumric(this.height):g.height))*4/9;j=j<this.minTopOffset?this.minTopOffset:j;if(d||!this.fixed){var i=$(window).scrollTop();if(i>0){j+=i}}f={left:(f&&f.left)||k,top:(f&&f.top)||j};if(!d&&this.fixed){if(h.height-g.height<=f.top){this.getPanel().addClass("dialog_overflow");this._layer.setOverFlow(true)}else{this.getPanel().removeClass("dialog_overflow");this._layer.setOverFlow(false)}}var l=this.positioned?"animate":"css";$.fn[l].call(this.getPanel(),f,200);this.positioned=true;this.position=f},setFixed:function(f){this.fixed=!!f;this._layer.setFixed(this.fixed)},getPosition:function(){return this.position},show:function(f){if(this.visible){return}var h=this;a(this).fire("beforeshow");var g;if(this._layer.getActiveStack()){g=this._layer.getActiveStack();if(!this.reposition&&!f&&!this._layer.changeFixed){f=this._layer.getActiveStack().position()}}this._layer.show();this.getPanel().css({display:"","z-index":1});this.setPosition(f);g&&g.trigger("close",[true]);this.visible=true;this._layer.setActiveStack(this._stackId);this.getPanel().animate({opacity:1},{queue:false,duration:200,complete:function(){a(h).fire("aftershow")}})},close:function(){var f=this.stackable?"hide":"destroy";this[f].apply(this,Array.prototype.slice.call(arguments))},hide:function(g,f){if(typeof g=="function"){f=g;g=undefined}if(!this.visible){typeof f=="function"&&f();return}a(this).fire("beforeclose");a(this).fire("beforehide");this._layer.setActiveStack(null);this.visible=false;if(!g){this._layer.hide()}this.getPanel().animate({opacity:0},{queue:false,duration:200,complete:$.proxy(function(){this.getPanel().css({display:"none","z-index":0});a(this).fire("afterhide");a(this).fire("afterclose");typeof f=="function"&&f()},this)})},destroy:function(g,f){if(typeof g=="function"){f=g;g=undefined}if(this.destroyed){M.error("Dialog already destroyed!");typeof f=="function"&&f();return}a(this).fire("beforeclose");a(this).fire("beforedestroy");this.destroyed=true;this.hide(g,$.proxy(function(){if(this._panel.length){this._panel.undelegate();this._panel.unbind();this._panel.remove();this._panel=null}this._layer=null;a(this).fire("afterdestroy");a(this).fire("afterclose");typeof f=="function"&&f()},this))}};return c});M.define("dialog/Dialog",function(c){var d=c("dialog/DialogBase"),a='<div class="popup-box layer_dialog _j_dialog pop_no_margin">                    <div class="dialog_title" style="display:none"><div class="_j_title title"></div></div>                    <div class="dialog_body _j_content"></div>                    <a id="popup_close" class="close-btn _j_close"><i></i></a>                </div>';var b=M.extend(function(e){this.content="";this.title="";this.PANEL_CLASS="";this.MASK_CLASS="";b.$parent.call(this,e)},d);M.mix(b.prototype,{tpl:a,setPanelContent:function(){this._dialogTitle=this._panel.find("._j_title");this._dialogContent=this._panel.find("._j_content");this.setTitle(this.title);this.setContent(this.content);this.addClass(this.PANEL_CLASS);this.getMask().addClass(this.MASK_CLASS)},setTitle:function(e){if(e){this._dialogTitle.html(e).parent().css("display","")}else{this._dialogTitle.parent().css("display","none")}this.title=e},getTitle:function(){return this.title},setContent:function(e){this._dialogContent.empty().append(e)}});return b});M.define("dialog/alert",function(e,d){var b=e("dialog/Dialog"),a='<div id="popup_container" class="popup-box new-popbox"><a class="close-btn _j_close"><i></i></a><div class="pop-ico" id="_j_alertpopicon"><i class="i1"></i></div><div class="pop-ctn"><p class="hd _j_content"></p><p class="bd _j_detail"></p></div><div class="pop-btns"><a role="button" tabindex="0" class="popbtn popbtn-submit _j_close">&nbsp;确定&nbsp;</a></div></div>',f=M.extend(function(j){var i={width:420,content:"请输入内容",background:"#000",bgOpacity:0.7,PANEL_CLASS:"pop_no_margin",reposition:true,impl:"Alert",layerZIndex:10000};j=M.mix(i,j);f.$parent.call(this,j);this.bindEvents()},b),g=null,h=$.noop;M.mix(f.prototype,{tpl:a,setAlertTitle:function(i){this.setContent(i)},setAlertContent:function(i){this.getPanel().find("._j_detail").text(i)},bindEvents:function(){this.getPanel().on("keydown",".pop-btns ._j_close",function(i){if(i.keyCode==13){$(this).trigger("click")}})}});var c=function(i,k,j){if(!g){g=new f();M.Event(g).on("afterhide",function(){if(typeof h=="function"){h.call(g,g.getPanel())}});M.Event(g).on("aftershow",function(){g.getPanel().find(".pop-btns ._j_close").focus()})}g.getLayer().toFront();if(M.isObject(i)){g.setAlertTitle(i.title);g.setAlertContent(i.content)}else{g.setAlertTitle(i);g.setAlertContent("")}if(typeof k=="function"){h=k}else{h=$.noop}if(j){$("#_j_alertpopicon").children("i").attr("class","i"+j)}else{$("#_j_alertpopicon").children("i").attr("class","i"+1)}g.show();return g};d.pop=c;d.warning=function(i,j){c(i,j,1)};d.tip=function(i,j){c(i,j,3)}});M.define("dialog/confirm",function(c,e){var g=c("dialog/Dialog"),a='<div id="popup_container" class="popup-box new-popbox"><a class="close-btn _j_close _j_false"><i></i></a><div class="pop-ico" id="popup_icon"><i class="i2"></i></div><div class="pop-ctn"><p class="hd _j_content"></p><p class="bd _j_detail"></p></div><div class="pop-btns"><a role="button" tabindex="0" class="popbtn popbtn-cancel popbtn-half _j_close _j_false">&nbsp;取消&nbsp;</a><a role="button" tabindex="0" class="popbtn popbtn-submit popbtn-half _j_close _j_true">&nbsp;确定&nbsp;</a></div></div>',h=M.extend(function(k){var j={width:420,content:"请输入内容",background:"#000",bgOpacity:0.7,PANEL_CLASS:"pop_no_margin",reposition:true,impl:"Confirm",layerZIndex:10000};k=M.mix(j,k);h.$parent.call(this,k);this.bindEvents()},g),d=null,b=$.noop,i=$.noop,f=false;M.mix(h.prototype,{tpl:a,setConfirmTitle:function(j){this.setContent(j)},setConfirmContent:function(j){this.getPanel().find("._j_detail").text(j)},bindEvents:function(){this.getPanel().on("click","._j_false",function(){f=false}).on("click","._j_true",function(){f=true}).on("keydown","._j_false",function(j){if(j.keyCode==13){$(this).trigger("click")}else{if(j.keyCode==39){$(this).next().focus()}}}).on("keydown","._j_true",function(j){if(j.keyCode==13){$(this).trigger("click")}else{if(j.keyCode==37){$(this).prev().focus()}}})}});e.pop=function(k,j,l){if(!d){d=new h();M.Event(d).on("afterhide",function(){if(f){b()}else{i()}});M.Event(d).on("aftershow",function(){d.getPanel().find("._j_true").focus()})}d.getLayer().toFront();if(M.isObject(k)){d.setConfirmTitle(k.title);d.setConfirmContent(k.content)}else{d.setConfirmTitle(k);d.setConfirmContent("")}if(typeof j=="function"){b=j}else{b=$.noop}if(typeof l=="function"){i=l}else{i=$.noop}d.show();return d}});M.define("ScrollObserver",function(e,g,c){var h=0,f={},a=false,b,d=true;g.addObserver=function(k){var j="ScrollObserver_"+h;h++;f[j]=k;d=false;return j};g.removeObserver=function(j){delete f[j];if(M.isEmpty(f)){d=true}};function i(){for(var j in f){if(f.hasOwnProperty(j)){f[j]()}}}$(window).scroll(function(){if(d){return}if(!a){b=setInterval(function(){if(a){a=false;clearTimeout(b);i()}},50)}a=true});return g});M.define("/js/note/ControllerHead",function(c){c("/js/jquery.jplayer.js");var m=c("TopTip"),e=c("dialog/alert"),k=c("dialog/confirm"),g=c("dialog/Dialog"),q=c("ScrollObserver"),o=null,f=null,j=null,l=null,n=null,i=null,b=null,p=null,d=null,a=null,h=null;return{events:{"click,._j_do_fav":"addFav","click,._j_has_fav":"hasFavNotice","click,._j_close_reward":"closeReward","click,._j_open_reward":"openReward","mouseover,._j_activity_notice":"showActInfo","mouseout,._j_activity_notice":"hideActInfo"},init:function(){this.initSharedata();this.initDom();this.initFloatRight();this.initMusic();this.initBottomTotal();this.bindConfirm();this.initVideo()},isMusciOpen:true,initVideo:function(){M.Event.on("videoplaying",$.proxy(function(){this.pauseMusic()},this));M.Event.on("videopause",$.proxy(function(){if(this.isMusciOpen){this.playMusic()}},this))},initDom:function(){f=$("._j_open_reward_container");j=$("._j_close_reward_container");l=$("._j_open_reward");i=$("._j_float_right");b=$("._j_share_father");d=$("._j_ding_father");p=$("._j_music_father");a=$("._j_help_total")},initSharedata:function(){if(this.data&&this.data.share_info){M.Event.fire("note:share:info:ready",this.data.share_info);window.Env.share_info=this.data.share_info}},initBottomTotal:function(){if(this.data&&this.data.pv){a.find("._j_total_person").text(this.data.pv)}if(this.data&&this.data.mdd_name){a.find("._j_total_mdd").text(this.data.mdd_name)}},initFloatRight:function(){i.children(".quick_reply").before(b.children().clone(true));i.delegate("._j_do_fav","click",function(){b.find("._j_do_fav").trigger("click")});i.delegate("._j_has_fav","click",function(){b.find("._j_has_fav").trigger("click")});var s=d.children();if(s.length>0){i.children(".post-up").append(s.clone(true))}var r=p.children();if(r.length>0){i.children(".quick_reply").after(r.clone(true));i.children(".music_botton").addClass("quick_music").children(".hd_audio").remove()}this.bindFloatRight()},bindFloatRight:function(){if($("._j_top_share_group").length>0){var v=$("._j_top_share_group .bs_share"),t=$("#_js_circle_forLowBrowser"),s=v.offset().top+v.outerHeight(true);u();q.addObserver(u);$(window).resize(function(){s=v.offset().top+v.outerHeight(true)})}function u(){var w=$(window).scrollTop();var x=(w+document.documentElement.clientHeight)/document.body.clientHeight;x=parseInt(x*100,10);r(x);if($(".float-bar").is(":hidden")&&w>s){if($.browser.msie&&parseInt($.browser.version,10)<9){$(".float-bar").show()}else{$(".float-bar").fadeIn(300)}}else{if($(".float-bar").is(":visible")&&w<s){if($.browser.msie&&parseInt($.browser.version,10)<9){$(".float-bar").hide()}else{$(".float-bar").fadeOut(300)}}}}function r(y){var x=16;var z=(x-1)/x;if(t.parent().hasClass("support_canvas")){return}var w=y*x/100;var w=y>z?Math.floor(w):Math.ceil(w);t.get(0).className="circle_per"+w}},pauseMusic:function(){h.jPlayer("pause");o.addClass("pause").removeClass("play")},playMusic:function(){h.jPlayer("play");o.addClass("begin_play").removeClass("pause");setTimeout(function(){o.addClass("play").removeClass("begin_play")},500)},initMusic:function(){o=$("._j_m_control");h=$(".music_botton .hd_audio");h.jPlayer({ready:function(){$(this).jPlayer("setMedia",{mp3:h.data("music")});$(this).jPlayer("play");o.addClass("play").removeClass("pause")},ended:function(){$(this).jPlayer("setMedia",{mp3:h.data("music")}).jPlayer("play");o.addClass("play").removeClass("pause")},swfPath:"/swf",supplied:"mp3",wmode:"window"});o.on("click",$.proxy(function(){var r=h.data("jPlayer");if(r.status.paused||r.status.ended||r.status.waitForPlay){this.playMusic();this.isMusciOpen=true}else{this.pauseMusic();this.isMusciOpen=false}},this))},addFav:function(r){r.preventDefault();var s=$(r.currentTarget);if(s.hasClass("unique")){return false}s.addClass("unique");$.post("/note/ajax_post.php",{sAction:"fav",iIid:this.data.iid},$.proxy(function(v){if(!v.error&&v.payload){if(v.payload.ret===1||v.payload.ret===-4){var u=$("._j_do_fav");u.removeClass("_j_do_fav").addClass("_j_has_fav");var t=(+s.children("span").text())+1;u.find("span").html(t);$(".bs_collect").addClass("collected");m.show("成功将该文章收藏！")}else{e.pop("收藏失败")}}s.removeClass("unique")},this),"json")},hasFavNotice:function(r){r.preventDefault();m.show("该文章您已经收藏过了！")},showActInfo:function(r){var s=$(r.currentTarget);s.children(".if_pop").removeClass("hide")},hideActInfo:function(r){var s=$(r.currentTarget);s.children(".if_pop").addClass("hide")},closeReward:function(r){r.preventDefault();k.pop("确认关闭游记打赏吗？",function(){var s=$(r.currentTarget);if(s.hasClass("waiting")){return false}s.addClass("waiting");$.post("/note/ajax_post.php",{sAction:"deleteGinfoReward",iIid:window.Env.iid},$.proxy(function(u){if(!u.error){if(u.payload&&u.payload.ret===1){f.show();j.hide();var t=$("._j_reward_mao");t.hide();$("._j_reward_mode").hide();if(t.hasClass("on")){$("._j_publish_tab[data-mode='article']").trigger("click")}}}else{e.pop(u.error.error)}s.removeClass("waiting")},this),"json")})},openReward:function(t){t.preventDefault();var u=$(t.currentTarget);var r=u.data("mobile");var v=+u.data("un-confirm");if(r){if(v===0){this.confirmOpenReward()}else{var s='<div class="bind-phone"><p>开通打赏功能需先绑定手机号哦</p><p>已绑定手机号：'+r+'<a href="https://passport.mafengwo.cn/setting/security/mobile/?type=change&callback='+encodeURIComponent("http://www.mafengwo.cn/note/create.php/jumpreward/?iid="+this.data.iid)+'">更换号码</a></p><div class="sr-action"><a href="javascript:void(0);" class="btn-submit _j_confirm_open_reward">确定开通</a><a href="javascript:void(0);" class="btn-cancel _j_close">取消</a></div></div>';n=new g({content:s});n.show()}}else{var s='<div class="bind-phone"><p>开通打赏功能需先绑定手机号哦</p><p>你还没有绑定手机号</p><div class="sr-action"><a href="https://passport.mafengwo.cn/setting/security/mobile/?callback='+encodeURIComponent("http://www.mafengwo.cn/note/create.php/jumpreward/?iid="+this.data.iid)+'" class="btn-submit">去绑定</a><a href="javascript:void(0);" class="btn-cancel _j_close">取消</a></div></div>';n=new g({content:s});n.show()}},confirmOpenReward:function(){if(l.hasClass("waiting")){return false}l.addClass("waiting");$.post("/note/ajax_post.php",{sAction:"openGinfoReward",iIid:this.data.iid},$.proxy(function(s){if(!s.error){if(s.payload&&s.payload.ret===1){var r="/i/"+this.data.iid+".html?s=0";if(n){n.hide();window.location.href=r}else{m.show("打赏功能已开通");setTimeout(function(){window.location.href=r},300)}}else{e.tip("开通失败")}}else{e.pop(s.error.error)}l.removeClass("waiting")},this),"json")},bindConfirm:function(){$("._j_confirm_open_reward").live("click",$.proxy(function(){this.confirmOpenReward()},this))}}});M.define("Storage",function(e,g,b){var n=document;var d=c();var f={_element:null,_expires:null,_file:document.location.hostname,init:function(){if(!this._element){try{this._element=n.createElement("input");this._element.type="hidden";this._element.addBehavior("#default#userData");n.body.appendChild(this._element);this.setItem("__detectUserDataStorage",1);this.removeItem("__detectUserDataStorage");return{setItem:this.setItem,getItem:this.getItem,removeItem:this.removeItem}}catch(p){M.error(p)}}return true},setItem:function(s,t,q){var p=j(q);this._element.expires=p.toUTCString();this._element.load(this._file);var r=a(this._element.getAttribute(s)),u=i(t,+p);this._element.setAttribute(s,u);this._element.save(this._file);k({key:s,newValue:u,oldValie:r,url:window.location.href})},getItem:function(p){this._element.load(this._file);var q=a(this._element.getAttribute(p));return q&&q.value},removeItem:function(p){this._element.load(this._file);this._element.removeAttribute(p);this._element.save(this._file)}};var l={setItem:function(r,s,q){if(!d){return}var p=j(q);localStorage.setItem(r,i(s,+p))},getItem:function(p){if(!d){return}var r=+new Date(),q=a(localStorage.getItem(p));if(q){if(r>q.timestamp){localStorage.removeItem(p);q=null}else{q=q.value}}return q},removeItem:function(p){if(!d){return}localStorage.removeItem(p)}};var h={},m={on:function(q,r){var p=h[q]||(h[q]=[]);p.push(r)},off:function(q,r){var p=h[q];if(!!p){if(!!r){M.forEach(p,function(t,s){if(t==r){p.splice(s,1)}})}else{p=[]}}return this}};M.mix(f,m);M.mix(l,m);if(window.addEventListener){window.addEventListener("storage",k,false)}else{if(window.attachEvent){window.attachEvent("onstorage",k)}}function k(u){if(!u){u=window.event}var p=M.mix({},u),w=u.newValue&&a(u.newValue),q=u.oldValue&&a(u.oldValue),v=+new Date();p.newValue=w&&w.value;if(!!q&&v<q.timestamp){p.oldValue=q.value}else{p.oldValue=null}var t=u.key,s=h[t],r=0;if(!t||!s||0===s.length){return}while(r<s.length){s[r++].call(window,p)}}function j(p){if(Object.prototype.toString.call(p)!="[object Date]"){var q=typeof p==="number"&&p>0?p:86400;p=new Date();p.setTime(+p+q*1000)}return p}function i(q,p){var r={value:q,timestamp:p};return JSON.stringify(r)}function a(p){if(p){try{p=JSON.parse(p);if(!("value" in p)||!("timestamp" in p)){p={value:p,timestamp:+j()}}}catch(q){p={value:p,timestamp:+j()}}}return p}function c(){if(window.localStorage){try{localStorage.setItem("__detectLocalStorage",1);localStorage.removeItem("__detectLocalStorage");return true}catch(p){return false}}return false}var o=window.localStorage?l:f.init();b.exports=M.mix(o,{isAvailable:c,isSupport:window.localStorage?d:("setItem" in o)})});M.define("ClickToggle",function(b,a,c){function d(e){this.context="body";this.container=null;this.innerSelector=null;this.handler=$.noop;this.outHandler=$.noop;M.mix(this,e);this.outHandled=false;this.init()}d.prototype={init:function(){if(!M.is(this.innerSelector,"string")||!M.is(this.container,"string")){M.error("In Toggle Module multiple mode, innerSelector and container must be string selector")}this.context=$(this.context);this.context.delegate(this.innerSelector,"click",$.proxy(function(f){var g=$(f.currentTarget),e=g.closest(this.container);e.data("inner",true);this.handler(g,f)},this));this.context.delegate(this.container,"click",$.proxy(function(e){var f=$(e.currentTarget);if(!f.data("inner")){this.outHandler(f,e)}else{f.data("inner",false)}this.outHandled=true},this));this.context.click($.proxy(function(e){var f=$(e.currentTarget);if(!this.outHandled){this.outHandler(f,e)}else{this.outHandled=false}},this))}};c.exports=d});M.define("/js/EmotionsHd",function(a){return{golden:[{title:"大笑",file:"http://images.mafengwo.net/images/i/face/daily_v2/1@2x.png"},{title:"微笑",file:"http://images.mafengwo.net/images/i/face/daily_v2/2@2x.png"},{title:"亲亲",file:"http://images.mafengwo.net/images/i/face/daily_v2/3@2x.png"},{title:"色色",file:"http://images.mafengwo.net/images/i/face/daily_v2/5@2x.png"},{title:"笑cry",file:"http://images.mafengwo.net/images/i/face/daily_v2/79@2x.png"},{title:"无奈",file:"http://images.mafengwo.net/images/i/face/daily_v2/6@2x.png"},{title:"睡觉",file:"http://images.mafengwo.net/images/i/face/daily_v2/19@2x.png"},{title:"害羞",file:"http://images.mafengwo.net/images/i/face/daily_v2/8@2x.png"},{title:"酷",file:"http://images.mafengwo.net/images/i/face/daily_v2/9@2x.png"},{title:"鬼脸",file:"http://images.mafengwo.net/images/i/face/daily_v2/12@2x.png"},{title:"大哭",file:"http://images.mafengwo.net/images/i/face/daily_v2/21@2x.png"},{title:"生气",file:"http://images.mafengwo.net/images/i/face/daily_v2/27@2x.png"},{title:"抓狂",file:"http://images.mafengwo.net/images/i/face/daily_v2/52@2x.png"},{title:"汗",file:"http://images.mafengwo.net/images/i/face/daily_v2/54@2x.png"},{title:"惊悚",file:"http://images.mafengwo.net/images/i/face/daily_v2/83@2x.png"},{title:"生病",file:"http://images.mafengwo.net/images/i/face/daily_v2/47@2x.png"},{title:"闭嘴",file:"http://images.mafengwo.net/images/i/face/daily_v2/25@2x.png"},{title:"精灵",file:"http://images.mafengwo.net/images/i/face/daily_v2/44@2x.png"},{title:"邪恶",file:"http://images.mafengwo.net/images/i/face/daily_v2/85@2x.png"},{title:"魅力四射",file:"http://images.mafengwo.net/images/i/face/daily_v2/30@2x.png"},{title:"吻",file:"http://images.mafengwo.net/images/i/face/daily_v2/33@2x.png"},{title:"爱心",file:"http://images.mafengwo.net/images/i/face/daily_v2/32@2x.png"},{title:"心碎",file:"http://images.mafengwo.net/images/i/face/daily_v2/31@2x.png"},{title:"剪刀手",file:"http://images.mafengwo.net/images/i/face/daily_v2/88@2x.png"},{title:"再见",file:"http://images.mafengwo.net/images/i/face/daily_v2/20@2x.png"},{title:"赞",file:"http://images.mafengwo.net/images/i/face/daily_v2/28@2x.png"},{title:"鼓掌",file:"http://images.mafengwo.net/images/i/face/daily_v2/96@2x.png"},{title:"祈祷",file:"http://images.mafengwo.net/images/i/face/daily_v2/78@2x.png"},{title:"甜蜜",file:"http://images.mafengwo.net/images/i/face/daily_v2/104@2x.png"},{title:"太阳",file:"http://images.mafengwo.net/images/i/face/daily_v2/72@2x.png"},{title:"下雨",file:"http://images.mafengwo.net/images/i/face/daily_v2/67@2x.png"},{title:"闪电",file:"http://images.mafengwo.net/images/i/face/daily_v2/110@2x.png"},{title:"雪",file:"http://images.mafengwo.net/images/i/face/daily_v2/112@2x.png"},{title:"星星",file:"http://images.mafengwo.net/images/i/face/daily_v2/43@2x.png"},{title:"月亮",file:"http://images.mafengwo.net/images/i/face/daily_v2/62@2x.png"},{title:"飞机",file:"http://images.mafengwo.net/images/i/face/daily_v2/114@2x.png"},{title:"自行车",file:"http://images.mafengwo.net/images/i/face/daily_v2/132@2x.png"},{title:"人民币",file:"http://images.mafengwo.net/images/i/face/daily_v2/56@2x.png"},{title:"王冠",file:"http://images.mafengwo.net/images/i/face/daily_v2/162@2x.png"},{title:"足球",file:"http://images.mafengwo.net/images/i/face/daily_v2/41@2x.png"},{title:"苹果",file:"http://images.mafengwo.net/images/i/face/daily_v2/38@2x.png"},{title:"香蕉",file:"http://images.mafengwo.net/images/i/face/daily_v2/184@2x.png"},{title:"西瓜",file:"http://images.mafengwo.net/images/i/face/daily_v2/39@2x.png"},{title:"糖果",file:"http://images.mafengwo.net/images/i/face/daily_v2/196@2x.png"},{title:"蜂蜜",file:"http://images.mafengwo.net/images/i/face/daily_v2/197@2x.png"},{title:"餐厅",file:"http://images.mafengwo.net/images/i/face/daily_v2/64@2x.png"},{title:"咖啡",file:"http://images.mafengwo.net/images/i/face/daily_v2/40@2x.png"},{title:"干杯",file:"http://images.mafengwo.net/images/i/face/daily_v2/16@2x.png"},{title:"蝴蝶结",file:"http://images.mafengwo.net/images/i/face/daily_v2/201@2x.png"},{title:"礼物",file:"http://images.mafengwo.net/images/i/face/daily_v2/37@2x.png"},{title:"生日蛋糕",file:"http://images.mafengwo.net/images/i/face/daily_v2/36@2x.png"},{title:"庆祝",file:"http://images.mafengwo.net/images/i/face/daily_v2/207@2x.png"},{title:"蚂蚁",file:"http://images.mafengwo.net/images/i/face/daily_v2/211@2x.png"},{title:"蜜蜂",file:"http://images.mafengwo.net/images/i/face/daily_v2/212@2x.png"},{title:"狗狗",file:"http://images.mafengwo.net/images/i/face/daily_v2/69@2x.png"},{title:"猫猫",file:"http://images.mafengwo.net/images/i/face/daily_v2/68@2x.png"},{title:"兔子",file:"http://images.mafengwo.net/images/i/face/daily_v2/215@2x.png"},{title:"樱花",file:"http://images.mafengwo.net/images/i/face/daily_v2/232@2x.png"},{title:"玫瑰",file:"http://images.mafengwo.net/images/i/face/daily_v2/35@2x.png"},{title:"时钟",file:"http://images.mafengwo.net/images/i/face/daily_v2/235@2x.png"},{title:"放大镜",file:"http://images.mafengwo.net/images/i/face/daily_v2/237@2x.png"},{title:"注意",file:"http://images.mafengwo.net/images/i/face/daily_v2/51@2x.png"},{title:"铅笔",file:"http://images.mafengwo.net/images/i/face/daily_v2/240@2x.png"},{title:"信",file:"http://images.mafengwo.net/images/i/face/daily_v2/73@2x.png"},{title:"灯泡",file:"http://images.mafengwo.net/images/i/face/daily_v2/243@2x.png"},{title:"对话",file:"http://images.mafengwo.net/images/i/face/daily_v2/245@2x.png"},{title:"图钉",file:"http://images.mafengwo.net/images/i/face/daily_v2/246@2x.png"},{title:"喇叭",file:"http://images.mafengwo.net/images/i/face/daily_v2/247@2x.png"},{title:"音乐",file:"http://images.mafengwo.net/images/i/face/daily_v2/63@2x.png"},{title:"置顶",file:"http://images.mafengwo.net/images/i/face/daily_v2/258@2x.png"}],brands:[{title:"抱抱小蚂",file:"http://images.mafengwo.net/images/i/face/brands_v2/1@2x.png",size:28},{title:"扮酷小蚂",file:"http://images.mafengwo.net/images/i/face/brands_v2/2@2x.png",size:28},{title:"不屑小蜂",file:"http://images.mafengwo.net/images/i/face/brands_v2/3@2x.png",size:28},{title:"大哭小蜂",file:"http://images.mafengwo.net/images/i/face/brands_v2/4@2x.png",size:28},{title:"大笑小蜂",file:"http://images.mafengwo.net/images/i/face/brands_v2/5@2x.png",size:28},{title:"得意小蜂",file:"http://images.mafengwo.net/images/i/face/brands_v2/6@2x.png",size:28},{title:"犯色相小蚂",file:"http://images.mafengwo.net/images/i/face/brands_v2/7@2x.png",size:28},{title:"愤怒小蜂",file:"http://images.mafengwo.net/images/i/face/brands_v2/8@2x.png",size:28},{title:"害羞小蚂",file:"http://images.mafengwo.net/images/i/face/brands_v2/9@2x.png",size:28},{title:"尴尬小蜂",file:"http://images.mafengwo.net/images/i/face/brands_v2/10@2x.png",size:28},{title:"哼小蚂",file:"http://images.mafengwo.net/images/i/face/brands_v2/11@2x.png",size:28},{title:"坏笑小蜂",file:"http://images.mafengwo.net/images/i/face/brands_v2/12@2x.png",size:28},{title:"可怜哭小蜂",file:"http://images.mafengwo.net/images/i/face/brands_v2/13@2x.png",size:28},{title:"抠鼻子小蜂",file:"http://images.mafengwo.net/images/i/face/brands_v2/14@2x.png",size:28},{title:"困小蜂",file:"http://images.mafengwo.net/images/i/face/brands_v2/15@2x.png",size:28},{title:"流汗小蚂",file:"http://images.mafengwo.net/images/i/face/brands_v2/16@2x.png",size:28},{title:"么么哒小蚂",file:"http://images.mafengwo.net/images/i/face/brands_v2/17@2x.png",size:28},{title:"晕小蜂",file:"http://images.mafengwo.net/images/i/face/brands_v2/18@2x.png",size:28},{title:"思考小蚂",file:"http://images.mafengwo.net/images/i/face/brands_v2/19@2x.png",size:28},{title:"爱心小蜂",file:"http://images.mafengwo.net/images/i/face/brands_v2/20@2x.png",size:28},{title:"偷笑小蚂",file:"http://images.mafengwo.net/images/i/face/brands_v2/21@2x.png",size:28},{title:"晚安小蚂",file:"http://images.mafengwo.net/images/i/face/brands_v2/22@2x.png",size:28},{title:"微笑小蚂",file:"http://images.mafengwo.net/images/i/face/brands_v2/23@2x.png",size:28},{title:"心碎小蜂",file:"http://images.mafengwo.net/images/i/face/brands_v2/24@2x.png",size:28},{title:"兴奋小蜂",file:"http://images.mafengwo.net/images/i/face/brands_v2/25@2x.png",size:28},{title:"眼馋小蜂",file:"http://images.mafengwo.net/images/i/face/brands_v2/26@2x.png",size:28},{title:"疑惑小蜂",file:"http://images.mafengwo.net/images/i/face/brands_v2/27@2x.png",size:28},{title:"再见小蜂",file:"http://images.mafengwo.net/images/i/face/brands_v2/28@2x.png",size:28},{title:"赞小蜂",file:"http://images.mafengwo.net/images/i/face/brands_v2/29@2x.png",size:28},{title:"赞小蚂",file:"http://images.mafengwo.net/images/i/face/brands_v2/30@2x.png",size:28},{title:"抓狂小蚂",file:"http://images.mafengwo.net/images/i/face/brands_v2/31@2x.png",size:28}],character:[{title:"大笑",file:"http://images.mafengwo.net/images/i/face/daily_v2/1@2x.png"},{title:"微笑",file:"http://images.mafengwo.net/images/i/face/daily_v2/2@2x.png"},{title:"亲亲",file:"http://images.mafengwo.net/images/i/face/daily_v2/3@2x.png"},{title:"色色",file:"http://images.mafengwo.net/images/i/face/daily_v2/5@2x.png"},{title:"笑cry",file:"http://images.mafengwo.net/images/i/face/daily_v2/79@2x.png"},{title:"无奈",file:"http://images.mafengwo.net/images/i/face/daily_v2/6@2x.png"},{title:"睡觉",file:"http://images.mafengwo.net/images/i/face/daily_v2/19@2x.png"},{title:"害羞",file:"http://images.mafengwo.net/images/i/face/daily_v2/8@2x.png"},{title:"酷",file:"http://images.mafengwo.net/images/i/face/daily_v2/9@2x.png"},{title:"晕倒",file:"http://images.mafengwo.net/images/i/face/daily_v2/10@2x.png"},{title:"眨眼",file:"http://images.mafengwo.net/images/i/face/daily_v2/11@2x.png"},{title:"鬼脸",file:"http://images.mafengwo.net/images/i/face/daily_v2/12@2x.png"},{title:"大哭",file:"http://images.mafengwo.net/images/i/face/daily_v2/21@2x.png"},{title:"大怒",file:"http://images.mafengwo.net/images/i/face/daily_v2/46@2x.png"},{title:"生气",file:"http://images.mafengwo.net/images/i/face/daily_v2/27@2x.png"},{title:"不爽",file:"http://images.mafengwo.net/images/i/face/daily_v2/53@2x.png"},{title:"尴尬",file:"http://images.mafengwo.net/images/i/face/daily_v2/80@2x.png"},{title:"嘴馋",file:"http://images.mafengwo.net/images/i/face/daily_v2/50@2x.png"},{title:"呵呵",file:"http://images.mafengwo.net/images/i/face/daily_v2/81@2x.png"},{title:"冷漠",file:"http://images.mafengwo.net/images/i/face/daily_v2/131@2x.png"},{title:"失落",file:"http://images.mafengwo.net/images/i/face/daily_v2/34@2x.png"},{title:"困惑",file:"http://images.mafengwo.net/images/i/face/daily_v2/17@2x.png"},{title:"吃惊",file:"http://images.mafengwo.net/images/i/face/daily_v2/14@2x.png"},{title:"抓狂",file:"http://images.mafengwo.net/images/i/face/daily_v2/52@2x.png"},{title:"汗",file:"http://images.mafengwo.net/images/i/face/daily_v2/54@2x.png"},{title:"焦虑",file:"http://images.mafengwo.net/images/i/face/daily_v2/82@2x.png"},{title:"惊悚",file:"http://images.mafengwo.net/images/i/face/daily_v2/83@2x.png"},{title:"生病",file:"http://images.mafengwo.net/images/i/face/daily_v2/47@2x.png"},{title:"药丸",file:"http://images.mafengwo.net/images/i/face/daily_v2/76@2x.png"},{title:"闭嘴",file:"http://images.mafengwo.net/images/i/face/daily_v2/25@2x.png"},{title:"小丑",file:"http://images.mafengwo.net/images/i/face/daily_v2/45@2x.png"},{title:"精灵",file:"http://images.mafengwo.net/images/i/face/daily_v2/44@2x.png"},{title:"天使",file:"http://images.mafengwo.net/images/i/face/daily_v2/84@2x.png"},{title:"邪恶",file:"http://images.mafengwo.net/images/i/face/daily_v2/85@2x.png"},{title:"骷髅",file:"http://images.mafengwo.net/images/i/face/daily_v2/70@2x.png"},{title:"魅力四射",file:"http://images.mafengwo.net/images/i/face/daily_v2/30@2x.png"},{title:"吻",file:"http://images.mafengwo.net/images/i/face/daily_v2/33@2x.png"},{title:"爱心",file:"http://images.mafengwo.net/images/i/face/daily_v2/32@2x.png"},{title:"心碎",file:"http://images.mafengwo.net/images/i/face/daily_v2/31@2x.png"},{title:"看",file:"http://images.mafengwo.net/images/i/face/daily_v2/86@2x.png"},{title:"嘴唇",file:"http://images.mafengwo.net/images/i/face/daily_v2/87@2x.png"},{title:"剪刀手",file:"http://images.mafengwo.net/images/i/face/daily_v2/88@2x.png"},{title:"击掌",file:"http://images.mafengwo.net/images/i/face/daily_v2/89@2x.png"},{title:"上",file:"http://images.mafengwo.net/images/i/face/daily_v2/90@2x.png"},{title:"下",file:"http://images.mafengwo.net/images/i/face/daily_v2/91@2x.png"},{title:"左",file:"http://images.mafengwo.net/images/i/face/daily_v2/92@2x.png"},{title:"右",file:"http://images.mafengwo.net/images/i/face/daily_v2/93@2x.png"},{title:"再见",file:"http://images.mafengwo.net/images/i/face/daily_v2/20@2x.png"},{title:"OK",file:"http://images.mafengwo.net/images/i/face/daily_v2/94@2x.png"},{title:"赞",file:"http://images.mafengwo.net/images/i/face/daily_v2/28@2x.png"},{title:"加油",file:"http://images.mafengwo.net/images/i/face/daily_v2/95@2x.png"},{title:"鼓掌",file:"http://images.mafengwo.net/images/i/face/daily_v2/96@2x.png"},{title:"祈祷",file:"http://images.mafengwo.net/images/i/face/daily_v2/78@2x.png"},{title:"举手",file:"http://images.mafengwo.net/images/i/face/daily_v2/97@2x.png"},{title:"不行",file:"http://images.mafengwo.net/images/i/face/daily_v2/98@2x.png"},{title:"狼狈",file:"http://images.mafengwo.net/images/i/face/daily_v2/130@2x.png"},{title:"男孩",file:"http://images.mafengwo.net/images/i/face/daily_v2/74@2x.png"},{title:"女孩",file:"http://images.mafengwo.net/images/i/face/daily_v2/75@2x.png"},{title:"男人",file:"http://images.mafengwo.net/images/i/face/daily_v2/99@2x.png"},{title:"女人",file:"http://images.mafengwo.net/images/i/face/daily_v2/100@2x.png"},{title:"爷爷",file:"http://images.mafengwo.net/images/i/face/daily_v2/101@2x.png"},{title:"奶奶",file:"http://images.mafengwo.net/images/i/face/daily_v2/102@2x.png"},{title:"宝宝",file:"http://images.mafengwo.net/images/i/face/daily_v2/103@2x.png"},{title:"甜蜜",file:"http://images.mafengwo.net/images/i/face/daily_v2/104@2x.png"},{title:"家庭",file:"http://images.mafengwo.net/images/i/face/daily_v2/105@2x.png"},{title:"情侣",file:"http://images.mafengwo.net/images/i/face/daily_v2/106@2x.png"},{title:"基友",file:"http://images.mafengwo.net/images/i/face/daily_v2/107@2x.png"},{title:"闺蜜",file:"http://images.mafengwo.net/images/i/face/daily_v2/108@2x.png"}],travel:[{title:"太阳",file:"http://images.mafengwo.net/images/i/face/daily_v2/72@2x.png"},{title:"云",file:"http://images.mafengwo.net/images/i/face/daily_v2/109@2x.png"},{title:"下雨",file:"http://images.mafengwo.net/images/i/face/daily_v2/67@2x.png"},{title:"闪电",file:"http://images.mafengwo.net/images/i/face/daily_v2/110@2x.png"},{title:"多云",file:"http://images.mafengwo.net/images/i/face/daily_v2/111@2x.png"},{title:"雪",file:"http://images.mafengwo.net/images/i/face/daily_v2/112@2x.png"},{title:"星星",file:"http://images.mafengwo.net/images/i/face/daily_v2/43@2x.png"},{title:"月亮",file:"http://images.mafengwo.net/images/i/face/daily_v2/62@2x.png"},{title:"地球",file:"http://images.mafengwo.net/images/i/face/daily_v2/113@2x.png"},{title:"飞机",file:"http://images.mafengwo.net/images/i/face/daily_v2/114@2x.png"},{title:"火箭",file:"http://images.mafengwo.net/images/i/face/daily_v2/115@2x.png"},{title:"直升机",file:"http://images.mafengwo.net/images/i/face/daily_v2/116@2x.png"},{title:"火车",file:"http://images.mafengwo.net/images/i/face/daily_v2/117@2x.png"},{title:"电车",file:"http://images.mafengwo.net/images/i/face/daily_v2/118@2x.png"},{title:"高铁",file:"http://images.mafengwo.net/images/i/face/daily_v2/119@2x.png"},{title:"地铁",file:"http://images.mafengwo.net/images/i/face/daily_v2/120@2x.png"},{title:"火车站",file:"http://images.mafengwo.net/images/i/face/daily_v2/121@2x.png"},{title:"巴士",file:"http://images.mafengwo.net/images/i/face/daily_v2/122@2x.png"},{title:"出租车",file:"http://images.mafengwo.net/images/i/face/daily_v2/123@2x.png"},{title:"汽车",file:"http://images.mafengwo.net/images/i/face/daily_v2/124@2x.png"},{title:"加油站",file:"http://images.mafengwo.net/images/i/face/daily_v2/125@2x.png"},{title:"码头",file:"http://images.mafengwo.net/images/i/face/daily_v2/126@2x.png"},{title:"游轮",file:"http://images.mafengwo.net/images/i/face/daily_v2/127@2x.png"},{title:"帆船",file:"http://images.mafengwo.net/images/i/face/daily_v2/128@2x.png"},{title:"缆车",file:"http://images.mafengwo.net/images/i/face/daily_v2/129@2x.png"},{title:"自行车",file:"http://images.mafengwo.net/images/i/face/daily_v2/132@2x.png"},{title:"红绿灯",file:"http://images.mafengwo.net/images/i/face/daily_v2/133@2x.png"},{title:"路障",file:"http://images.mafengwo.net/images/i/face/daily_v2/134@2x.png"},{title:"停车场",file:"http://images.mafengwo.net/images/i/face/daily_v2/135@2x.png"},{title:"残疾人专用",file:"http://images.mafengwo.net/images/i/face/daily_v2/136@2x.png"},{title:"ATM",file:"http://images.mafengwo.net/images/i/face/daily_v2/137@2x.png"},{title:"换钱",file:"http://images.mafengwo.net/images/i/face/daily_v2/138@2x.png"},{title:"银行卡",file:"http://images.mafengwo.net/images/i/face/daily_v2/139@2x.png"},{title:"人民币",file:"http://images.mafengwo.net/images/i/face/daily_v2/56@2x.png"},{title:"美元",file:"http://images.mafengwo.net/images/i/face/daily_v2/140@2x.png"},{title:"欧元",file:"http://images.mafengwo.net/images/i/face/daily_v2/141@2x.png"},{title:"中国",file:"http://images.mafengwo.net/images/i/face/daily_v2/142@2x.png"},{title:"德国",file:"http://images.mafengwo.net/images/i/face/daily_v2/143@2x.png"},{title:"英国",file:"http://images.mafengwo.net/images/i/face/daily_v2/144@2x.png"},{title:"美国",file:"http://images.mafengwo.net/images/i/face/daily_v2/145@2x.png"},{title:"俄罗斯",file:"http://images.mafengwo.net/images/i/face/daily_v2/146@2x.png"},{title:"西班牙",file:"http://images.mafengwo.net/images/i/face/daily_v2/147@2x.png"},{title:"意大利",file:"http://images.mafengwo.net/images/i/face/daily_v2/148@2x.png"},{title:"法国",file:"http://images.mafengwo.net/images/i/face/daily_v2/149@2x.png"},{title:"日本",file:"http://images.mafengwo.net/images/i/face/daily_v2/150@2x.png"},{title:"韩国",file:"http://images.mafengwo.net/images/i/face/daily_v2/151@2x.png"},{title:"日出",file:"http://images.mafengwo.net/images/i/face/daily_v2/152@2x.png"},{title:"夜景",file:"http://images.mafengwo.net/images/i/face/daily_v2/153@2x.png"},{title:"露营",file:"http://images.mafengwo.net/images/i/face/daily_v2/154@2x.png"},{title:"星空",file:"http://images.mafengwo.net/images/i/face/daily_v2/155@2x.png"},{title:"火山",file:"http://images.mafengwo.net/images/i/face/daily_v2/156@2x.png"},{title:"彩虹",file:"http://images.mafengwo.net/images/i/face/daily_v2/157@2x.png"},{title:"游乐园",file:"http://images.mafengwo.net/images/i/face/daily_v2/158@2x.png"},{title:"海浪",file:"http://images.mafengwo.net/images/i/face/daily_v2/159@2x.png"},{title:"房子",file:"http://images.mafengwo.net/images/i/face/daily_v2/160@2x.png"},{title:"足迹",file:"http://images.mafengwo.net/images/i/face/daily_v2/161@2x.png"}],apparel:[{title:"王冠",file:"http://images.mafengwo.net/images/i/face/daily_v2/162@2x.png"},{title:"草帽",file:"http://images.mafengwo.net/images/i/face/daily_v2/163@2x.png"},{title:"零钱包",file:"http://images.mafengwo.net/images/i/face/daily_v2/164@2x.png"},{title:"眼镜",file:"http://images.mafengwo.net/images/i/face/daily_v2/165@2x.png"},{title:"女装",file:"http://images.mafengwo.net/images/i/face/daily_v2/166@2x.png"},{title:"男装",file:"http://images.mafengwo.net/images/i/face/daily_v2/167@2x.png"},{title:"裤子",file:"http://images.mafengwo.net/images/i/face/daily_v2/168@2x.png"},{title:"裙子",file:"http://images.mafengwo.net/images/i/face/daily_v2/169@2x.png"},{title:"比基尼",file:"http://images.mafengwo.net/images/i/face/daily_v2/170@2x.png"},{title:"和服",file:"http://images.mafengwo.net/images/i/face/daily_v2/171@2x.png"},{title:"跳舞",file:"http://images.mafengwo.net/images/i/face/daily_v2/172@2x.png"},{title:"走路",file:"http://images.mafengwo.net/images/i/face/daily_v2/173@2x.png"},{title:"跑步",file:"http://images.mafengwo.net/images/i/face/daily_v2/174@2x.png"},{title:"冲浪",file:"http://images.mafengwo.net/images/i/face/daily_v2/175@2x.png"},{title:"滑雪",file:"http://images.mafengwo.net/images/i/face/daily_v2/176@2x.png"},{title:"游泳",file:"http://images.mafengwo.net/images/i/face/daily_v2/177@2x.png"},{title:"钓鱼",file:"http://images.mafengwo.net/images/i/face/daily_v2/178@2x.png"},{title:"足球",file:"http://images.mafengwo.net/images/i/face/daily_v2/41@2x.png"},{title:"篮球",file:"http://images.mafengwo.net/images/i/face/daily_v2/179@2x.png"},{title:"赛车",file:"http://images.mafengwo.net/images/i/face/daily_v2/180@2x.png"},{title:"冠军",file:"http://images.mafengwo.net/images/i/face/daily_v2/181@2x.png"}],food:[{title:"苹果",file:"http://images.mafengwo.net/images/i/face/daily_v2/38@2x.png"},{title:"西瓜",file:"http://images.mafengwo.net/images/i/face/daily_v2/39@2x.png"},{title:"柠檬",file:"http://images.mafengwo.net/images/i/face/daily_v2/182@2x.png"},{title:"葡萄",file:"http://images.mafengwo.net/images/i/face/daily_v2/183@2x.png"},{title:"香蕉",file:"http://images.mafengwo.net/images/i/face/daily_v2/184@2x.png"},{title:"橙子",file:"http://images.mafengwo.net/images/i/face/daily_v2/185@2x.png"},{title:"菠萝",file:"http://images.mafengwo.net/images/i/face/daily_v2/186@2x.png"},{title:"樱桃",file:"http://images.mafengwo.net/images/i/face/daily_v2/187@2x.png"},{title:"草莓",file:"http://images.mafengwo.net/images/i/face/daily_v2/188@2x.png"},{title:"汉堡",file:"http://images.mafengwo.net/images/i/face/daily_v2/189@2x.png"},{title:"肉",file:"http://images.mafengwo.net/images/i/face/daily_v2/190@2x.png"},{title:"面条",file:"http://images.mafengwo.net/images/i/face/daily_v2/191@2x.png"},{title:"快餐",file:"http://images.mafengwo.net/images/i/face/daily_v2/192@2x.png"},{title:"寿司",file:"http://images.mafengwo.net/images/i/face/daily_v2/193@2x.png"},{title:"冰淇淋",file:"http://images.mafengwo.net/images/i/face/daily_v2/194@2x.png"},{title:"巧克力",file:"http://images.mafengwo.net/images/i/face/daily_v2/195@2x.png"},{title:"糖果",file:"http://images.mafengwo.net/images/i/face/daily_v2/196@2x.png"},{title:"蜂蜜",file:"http://images.mafengwo.net/images/i/face/daily_v2/197@2x.png"},{title:"餐厅",file:"http://images.mafengwo.net/images/i/face/daily_v2/64@2x.png"},{title:"咖啡",file:"http://images.mafengwo.net/images/i/face/daily_v2/40@2x.png"},{title:"红酒",file:"http://images.mafengwo.net/images/i/face/daily_v2/198@2x.png"},{title:"果汁",file:"http://images.mafengwo.net/images/i/face/daily_v2/199@2x.png"},{title:"啤酒",file:"http://images.mafengwo.net/images/i/face/daily_v2/200@2x.png"},{title:"干杯",file:"http://images.mafengwo.net/images/i/face/daily_v2/16@2x.png"},{title:"蝴蝶结",file:"http://images.mafengwo.net/images/i/face/daily_v2/201@2x.png"},{title:"礼物",file:"http://images.mafengwo.net/images/i/face/daily_v2/37@2x.png"},{title:"生日蛋糕",file:"http://images.mafengwo.net/images/i/face/daily_v2/36@2x.png"},{title:"万圣节",file:"http://images.mafengwo.net/images/i/face/daily_v2/202@2x.png"},{title:"圣诞节",file:"http://images.mafengwo.net/images/i/face/daily_v2/203@2x.png"},{title:"圣诞老人",file:"http://images.mafengwo.net/images/i/face/daily_v2/204@2x.png"},{title:"雪人",file:"http://images.mafengwo.net/images/i/face/daily_v2/205@2x.png"},{title:"铃铛",file:"http://images.mafengwo.net/images/i/face/daily_v2/206@2x.png"},{title:"庆祝",file:"http://images.mafengwo.net/images/i/face/daily_v2/207@2x.png"},{title:"气球",file:"http://images.mafengwo.net/images/i/face/daily_v2/208@2x.png"},{title:"风铃",file:"http://images.mafengwo.net/images/i/face/daily_v2/209@2x.png"},{title:"灯笼",file:"http://images.mafengwo.net/images/i/face/daily_v2/210@2x.png"}],animal:[{title:"蚂蚁",file:"http://images.mafengwo.net/images/i/face/daily_v2/211@2x.png"},{title:"蜜蜂",file:"http://images.mafengwo.net/images/i/face/daily_v2/212@2x.png"},{title:"瓢虫",file:"http://images.mafengwo.net/images/i/face/daily_v2/213@2x.png"},{title:"狗狗",file:"http://images.mafengwo.net/images/i/face/daily_v2/69@2x.png"},{title:"猫猫",file:"http://images.mafengwo.net/images/i/face/daily_v2/68@2x.png"},{title:"牛",file:"http://images.mafengwo.net/images/i/face/daily_v2/214@2x.png"},{title:"虎",file:"http://images.mafengwo.net/images/i/face/daily_v2/263@2x.png"},{title:"兔子",file:"http://images.mafengwo.net/images/i/face/daily_v2/215@2x.png"},{title:"熊猫",file:"http://images.mafengwo.net/images/i/face/daily_v2/216@2x.png"},{title:"熊",file:"http://images.mafengwo.net/images/i/face/daily_v2/285@2x.png"},{title:"考拉",file:"http://images.mafengwo.net/images/i/face/daily_v2/217@2x.png"},{title:"猴子",file:"http://images.mafengwo.net/images/i/face/daily_v2/218@2x.png"},{title:"猪头",file:"http://images.mafengwo.net/images/i/face/daily_v2/60@2x.png"},{title:"青蛙",file:"http://images.mafengwo.net/images/i/face/daily_v2/219@2x.png"},{title:"仓鼠",file:"http://images.mafengwo.net/images/i/face/daily_v2/220@2x.png"},{title:"鸡",file:"http://images.mafengwo.net/images/i/face/daily_v2/221@2x.png"},{title:"企鹅",file:"http://images.mafengwo.net/images/i/face/daily_v2/222@2x.png"},{title:"章鱼",file:"http://images.mafengwo.net/images/i/face/daily_v2/223@2x.png"},{title:"海豚",file:"http://images.mafengwo.net/images/i/face/daily_v2/224@2x.png"},{title:"鱼",file:"http://images.mafengwo.net/images/i/face/daily_v2/225@2x.png"},{title:"马",file:"http://images.mafengwo.net/images/i/face/daily_v2/226@2x.png"},{title:"羊",file:"http://images.mafengwo.net/images/i/face/daily_v2/227@2x.png"},{title:"大象",file:"http://images.mafengwo.net/images/i/face/daily_v2/228@2x.png"},{title:"骆驼",file:"http://images.mafengwo.net/images/i/face/daily_v2/229@2x.png"},{title:"仙人掌",file:"http://images.mafengwo.net/images/i/face/daily_v2/230@2x.png"},{title:"椰子树",file:"http://images.mafengwo.net/images/i/face/daily_v2/231@2x.png"},{title:"樱花",file:"http://images.mafengwo.net/images/i/face/daily_v2/232@2x.png"},{title:"玫瑰",file:"http://images.mafengwo.net/images/i/face/daily_v2/35@2x.png"},{title:"向日葵",file:"http://images.mafengwo.net/images/i/face/daily_v2/233@2x.png"},{title:"枫叶",file:"http://images.mafengwo.net/images/i/face/daily_v2/234@2x.png"}],tool:[{title:"时钟",file:"http://images.mafengwo.net/images/i/face/daily_v2/235@2x.png"},{title:"倒计时",file:"http://images.mafengwo.net/images/i/face/daily_v2/236@2x.png"},{title:"放大镜",file:"http://images.mafengwo.net/images/i/face/daily_v2/237@2x.png"},{title:"环保",file:"http://images.mafengwo.net/images/i/face/daily_v2/238@2x.png"},{title:"注意",file:"http://images.mafengwo.net/images/i/face/daily_v2/51@2x.png"},{title:"停止",file:"http://images.mafengwo.net/images/i/face/daily_v2/239@2x.png"},{title:"铅笔",file:"http://images.mafengwo.net/images/i/face/daily_v2/240@2x.png"},{title:"信",file:"http://images.mafengwo.net/images/i/face/daily_v2/73@2x.png"},{title:"邮筒",file:"http://images.mafengwo.net/images/i/face/daily_v2/241@2x.png"},{title:"书",file:"http://images.mafengwo.net/images/i/face/daily_v2/242@2x.png"},{title:"灯泡",file:"http://images.mafengwo.net/images/i/face/daily_v2/243@2x.png"},{title:"火",file:"http://images.mafengwo.net/images/i/face/daily_v2/244@2x.png"},{title:"对话",file:"http://images.mafengwo.net/images/i/face/daily_v2/245@2x.png"},{title:"图钉",file:"http://images.mafengwo.net/images/i/face/daily_v2/246@2x.png"},{title:"喇叭",file:"http://images.mafengwo.net/images/i/face/daily_v2/247@2x.png"},{title:"电话",file:"http://images.mafengwo.net/images/i/face/daily_v2/248@2x.png"},{title:"手机",file:"http://images.mafengwo.net/images/i/face/daily_v2/249@2x.png"},{title:"信号",file:"http://images.mafengwo.net/images/i/face/daily_v2/250@2x.png"},{title:"电池",file:"http://images.mafengwo.net/images/i/face/daily_v2/251@2x.png"},{title:"插头",file:"http://images.mafengwo.net/images/i/face/daily_v2/252@2x.png"},{title:"照相机",file:"http://images.mafengwo.net/images/i/face/daily_v2/253@2x.png"},{title:"录像机",file:"http://images.mafengwo.net/images/i/face/daily_v2/254@2x.png"},{title:"票",file:"http://images.mafengwo.net/images/i/face/daily_v2/255@2x.png"},{title:"音乐",file:"http://images.mafengwo.net/images/i/face/daily_v2/63@2x.png"},{title:"绘画",file:"http://images.mafengwo.net/images/i/face/daily_v2/256@2x.png"},{title:"锁",file:"http://images.mafengwo.net/images/i/face/daily_v2/257@2x.png"},{title:"置顶",file:"http://images.mafengwo.net/images/i/face/daily_v2/258@2x.png"},{title:"十八禁",file:"http://images.mafengwo.net/images/i/face/daily_v2/259@2x.png"},{title:"秘密",file:"http://images.mafengwo.net/images/i/face/daily_v2/260@2x.png"},{title:"正确",file:"http://images.mafengwo.net/images/i/face/daily_v2/261@2x.png"},{title:"错误",file:"http://images.mafengwo.net/images/i/face/daily_v2/262@2x.png"}],quick:[{title:"大笑",file:"http://images.mafengwo.net/images/i/face/daily_v2/1@2x.png"},{title:"微笑",file:"http://images.mafengwo.net/images/i/face/daily_v2/2@2x.png"},{title:"亲亲",file:"http://images.mafengwo.net/images/i/face/daily_v2/3@2x.png"},{title:"色色",file:"http://images.mafengwo.net/images/i/face/daily_v2/5@2x.png"},{title:"笑cry",file:"http://images.mafengwo.net/images/i/face/daily_v2/79@2x.png"},{title:"害羞",file:"http://images.mafengwo.net/images/i/face/daily_v2/8@2x.png"},{title:"酷",file:"http://images.mafengwo.net/images/i/face/daily_v2/9@2x.png"},{title:"鬼脸",file:"http://images.mafengwo.net/images/i/face/daily_v2/12@2x.png"},{title:"大哭",file:"http://images.mafengwo.net/images/i/face/daily_v2/21@2x.png"},{title:"抓狂",file:"http://images.mafengwo.net/images/i/face/daily_v2/52@2x.png"},{title:"汗",file:"http://images.mafengwo.net/images/i/face/daily_v2/54@2x.png"},{title:"邪恶",file:"http://images.mafengwo.net/images/i/face/daily_v2/85@2x.png"},{title:"魅力四射",file:"http://images.mafengwo.net/images/i/face/daily_v2/30@2x.png"},{title:"吻",file:"http://images.mafengwo.net/images/i/face/daily_v2/33@2x.png"},{title:"爱心",file:"http://images.mafengwo.net/images/i/face/daily_v2/32@2x.png"},{title:"心碎",file:"http://images.mafengwo.net/images/i/face/daily_v2/31@2x.png"},{title:"剪刀手",file:"http://images.mafengwo.net/images/i/face/daily_v2/88@2x.png"},{title:"再见",file:"http://images.mafengwo.net/images/i/face/daily_v2/20@2x.png"},{title:"赞",file:"http://images.mafengwo.net/images/i/face/daily_v2/28@2x.png"},{title:"加油",file:"http://images.mafengwo.net/images/i/face/daily_v2/95@2x.png"},{title:"鼓掌",file:"http://images.mafengwo.net/images/i/face/daily_v2/96@2x.png"},{title:"祈祷",file:"http://images.mafengwo.net/images/i/face/daily_v2/78@2x.png"},{title:"太阳",file:"http://images.mafengwo.net/images/i/face/daily_v2/72@2x.png"},{title:"干杯",file:"http://images.mafengwo.net/images/i/face/daily_v2/16@2x.png"},{title:"庆祝",file:"http://images.mafengwo.net/images/i/face/daily_v2/207@2x.png"},{title:"蜜蜂",file:"http://images.mafengwo.net/images/i/face/daily_v2/212@2x.png"},{title:"玫瑰",file:"http://images.mafengwo.net/images/i/face/daily_v2/35@2x.png"},{title:"灯泡",file:"http://images.mafengwo.net/images/i/face/daily_v2/243@2x.png"},{title:"对话",file:"http://images.mafengwo.net/images/i/face/daily_v2/245@2x.png"},{title:"置顶",file:"http://images.mafengwo.net/images/i/face/daily_v2/258@2x.png"}]}});M.define("/js/module/app/Page",function(b,a,d){function c(e){M.mix(this,e);this.container=$(this.container);if(!this.container.length){this.container=$(document)}this.init();if(!M.isEmptyObject(this.events)){this.setEvents(this.events)}this.bindEvents()}M.mix(c.prototype,{container:null,events:[],init:$.noop,bindEvents:$.noop,setEvents:function(e){M.forEach(e,$.proxy(function(i,g){var j=g.split(","),h=$.trim(j[0]),f=j.slice(1);if(i in this.eventHandlers){if(f.length){f=$.trim(f.join(","));this.container.on(h,f,$.proxy(this.eventHandlers[i],this))}else{this.container.on(h,$.proxy(this.eventHandlers[i],this))}}},this))},destroy:$.noop,eventHandlers:{}});d.exports=c});M.define("FrequencyVerifyControl",function(c,b,d){function a(e){this.container=e.container;this.app=e.app;this.successHandler=$.noop;M.mix(this,e);this.init()}a.prototype={init:function(){this.initData();this.refreshImg();this.verifyCon.delegate("img,._j_change_img","click",$.proxy(function(e){this.refreshImg()},this));this.verifyCon.delegate("._j_fre_confirm","click",$.proxy(function(h){var g=this.verifyText.val();var f=g.length;if(f==0){this.showErro("您还没有输入验证码!");return false}else{if(f!==6){this.showErro("请输入正确的验证码!");return false}}var e=$(h.currentTarget);if(e.hasClass("waiting")){return false}e.addClass("waiting");$.post("/user/captcha/verify",{sCode:g,iApp:this.app},$.proxy(function(i){if(i){if(i.ret===1){this.successHandler(this.target);this.verifyCon.hide();this.hideErro()}else{if(i.ret===0){this.verifyText.val("");this.verifyText.focus();this.refreshImg();this.showErro("输入的验证码不正确!")}else{if(i.ret===-1){this.showErro("错误次数过多，请稍候尝试")}}}}e.removeClass("waiting")},this),"json")},this));this.verifyCon.delegate("._j_fre_text","keyup",$.proxy(function(e){if(e.keyCode==13){this.verifyCon.find("._j_fre_confirm").trigger("click")}},this))},showErro:function(e){this.errorCon.html(e);this.errorCon.show()},hideErro:function(){this.errorCon.hide()},initData:function(){this.verifyCon=this.container;this.verifyPo=this.verifyCon.find(".protectedYZM");this.verifyImg=this.verifyCon.find("img");this.verifyText=this.verifyCon.find("._j_fre_text");this.errorCon=this.verifyPo.find(".n-error")},refreshImg:function(){var e="/user/captcha/code?iApp="+this.app+"&s="+new Date().getTime();this.verifyImg.attr("src",e)}};d.exports=a});M.define("FrequencyAppVerify",function(e,c,f){var b=e("FrequencyVerifyControl");var d=0,g='<div class="popYzm _j_fre_verify_',a='"><div class="protectedYZM"><p>亲爱的蜂蜂，你发表速度有点像机器人<br>来证明下自己吧~</p><div class="YZMInput"><input class="_j_fre_text" type="text" placeHolder="验证码"></div><div class="YZMInput"><img src="http://images.mafengwo.net/images/home_new2015/verify.gif" width="150px" height="40px"><label><a href="javascript:void(0);" class="_j_change_img">看不清，换一张</a></label></div><div class="YZMSubmit"><a href="javascript:void(0);" class="_j_fre_confirm" title="确定">确定</a><span class="n-error">错误次数过多，请稍候尝试</span></div></div></div>';function h(i){this.target=i.target;this.content=i.content;this.app=i.app;this.left=i.left;this.top=i.top;this.successHandler=$.noop;M.mix(this,i);this.init()}h.prototype={init:function(){$("body").append(g+d+a);this.initData();this.initPostion();this._baseFrequency=new b({container:this.verifyCon,app:this.app,successHandler:$.proxy(function(){M.Event.fire("frequency:app:verify:success");this.verifyCon.remove();this.successHandler(this.target)},this)});d++},initData:function(){this.verifyCon=$("._j_fre_verify_"+d);this.verifyCon.find("p").html(this.content);this.verifyPo=this.verifyCon.find(".protectedYZM")},initPostion:function(){var o=this.target.offset().left;if(typeof this.top==="undefined"){var i=this.target.offset().top}else{var i=this.top;this.verifyCon.css("position","fixed")}var p=this.target.outerHeight();var l=this.target.outerWidth();this.verifyCon.css({left:o+"px",top:i+"px"});var j=$(document).width();var k=$(document).height();var q="l";if(o>j/2){q="r"}var n="t";if(i>k/2){n="b"}var m="";if(q=="l"&&n=="t"){if(i>200){m="atTop"}else{this.verifyCon.css({top:(i+p+5)+"px"})}}else{if(q=="r"&&n=="t"){if(i>200){m="atTopRight"}else{m="atRight"}this.verifyCon.css({left:(o+l)+"px"})}else{if(q=="r"&&n=="b"){m="atTopRight";this.verifyCon.css({left:(o+l)+"px"})}else{m="atTop"}}}if(m.length>0){this.verifyPo.addClass(m)}},show:function(){this.verifyCon.show();return this},hide:function(){this.verifyCon.hide();return this},refreshImg:function(){this._baseFrequency.refreshImg();return this},destroy:function(){this.verifyCon.undelegate();this.verifyCon.remove();this.verifyCon=null;M.Event(this).fire("afterdestroy")}};f.exports=h});M.define("/js/note/GinfoReply",function(b,a,f){var e=b("/js/module/app/Page"),g=b("FrequencyAppVerify"),d=b("dialog/alert"),h=b("TopTip");var c=function(k){var i=k.container;var j=k.appType;new e({container:i,events:{"click,._j_publish_reply":"publishReply","click,._j_face_pop ._j_emojiitem":"insertFace","click,._j_face_switch":"pageFace","click,._j_prop_item":"chooseTag","click,.art_submit":"insertAt","click,.result li":"chooseAtName","click,._j_show_tags":"clickShowTag"},init:function(){this.data={};this.data.is_note=window.Env.is_new_note},bindEvents:function(){var l=($.browser.msie&&parseInt($.browser.version,10)<9)?"keyup":"input";var m=0;this.container.delegate("._j_at_txt",l,function(){var p=$(this);var o=$.trim(p.val());var n=p.closest("._j_at_inner");var q=p.siblings(".result");clearTimeout(m);if(!o){q.empty().hide()}else{m=setTimeout(function(){$.getJSON("/note/create.php/userSuggest?word="+o,function(s){q.empty();if(s.length>0){for(var r in s){$("<li>"+s[r].name+"</li>").data("id",s[r].id).appendTo(q)}}q.css("top",n.height()).show().get(0).scrollTop=0})},500)}}).delegate(".art_search","click",function(){$(this).find("._j_at_txt").trigger("focus")}).delegate("span.added i","click",function(){$(this).closest(".added").fadeOut(300,function(){$(this).remove()})})},publishReplyWithTarget:function(p){var o=p.closest("._j_editor");var l=0;var r=o.find("._j_prop_normal ._j_prop_item.on");if(r.length){l=parseInt(r.data("propid"),10)}var n=o.find("textarea[name='reply_content']");var m=n.val();if($.trim(m).length==0){d.pop("请输入内容");return false}if(p.hasClass("current-loading")){return false}p.addClass("current-loading");var q={sAction:"publishReply",iId:window.Env.iid,iAjax:o.data("ajax"),iQuick:o.data("quick"),iPropid:l,sQuote:o.data("quote"),iFlag:o.data("flag"),iObjid:o.data("objid"),sLink:o.data("link"),sContent:m};$.post("/note/ajax_post.php",q,$.proxy(function(t){if(!t.error){p.removeClass("current-loading");if(t.payload){if(t.payload.rid){var s=t.payload.rid;n.val("");if(l>0){this.hideProp()}if(j=="quick"){this.quickAfterReply(t.payload.html)}else{if(j=="quote"){this.quoteAfterReply(t.payload.html)}else{this.defaultAfterReply(s,t.payload.last_page)}}}else{d.pop("发表回复失败")}}}else{if(t.error.errno==10001){new g({target:p,app:t.error.error,content:"亲爱的蜂蜂，你发表回复的速度有点像机器人<br>来证明下自己吧~",successHandler:$.proxy(function(){p.removeClass("current-loading");this.publishReplyWithTarget(p)},this)})}else{p.removeClass("current-loading");d.pop(t.error.error)}}},this),"json")},eventHandlers:{publishReply:function(l){l.preventDefault();var m=$(l.currentTarget);this.publishReplyWithTarget(m)},clickShowTag:function(l){var m=$(l.currentTarget);if(m.hasClass("tags_tips")){$("._j_show_tags").removeClass("tags_tips");$.post("/note/ajax_post.php",{sAction:"setTagIcon"})}},insertFace:function(o){var p=$(o.currentTarget);var n=p.closest("._j_editor");var l=n.find("._j_replyarea");var q=n.find("._j_face_pop");var m=p.data("value");if(typeof(m)=="undefined"){m=p.attr("title")}this.insertText(l.get(0),"("+m+")");q.hide()},pageFace:function(w){var s=$(w.currentTarget),r=s.parent(".newtab-pagin"),t=s.parents(".art_pop"),o=t.find("._j_switch_container"),q=4,l=80,x=1;var u=parseInt(r.data("page"),10);var p=Math.ceil(t.find("._j_face_tab").length/q);var n=s.data("type")==="prev"?-1:1;var v=Math.min(Math.max(u+n,1),p);if(v!==u){r.data("page",v);var m=(l+x)*q*(v-1)*-1;if(v==p){r.find("._j_face_switch").removeClass("disabled");r.find("._j_face_switch[data-type='next']").addClass("disabled")}if(v==1){r.find("._j_face_switch").removeClass("disabled");r.find("._j_face_switch[data-type='prev']").addClass("disabled")}o.css("left",m+"px")}},chooseTag:function(p){p.preventDefault();var q=$(p.currentTarget);var n=q.closest("._j_editor");var o=n.find("._j_prop_normal");if(q.hasClass("on")){o.find("._j_prop_item").removeClass("on")}else{o.find("._j_prop_item").removeClass("on");q.toggleClass("on")}if(q.parents("._j_quick_card_ch").length){var r=n.find("._j_show_tags");var m=n.find("._j_tags_pop");if(o.find("._j_prop_item.on").length){var l=q.text();if(q.hasClass("l17")||q.hasClass("llong")){r.addClass("l17")}r.addClass("on").html(l+"<i></i>")}else{r.removeClass("on").html("举牌<i></i>").removeClass("l17")}m.hide()}},insertAt:function(q){q.preventDefault();var r=$(q.currentTarget);var m=r.closest("._j_at_pop_box").find("._j_at_inner");var p=m.find("span.added");var o=r.closest("._j_editor");var l=o.find("._j_replyarea");var n=o.find(".art_pop");p.each($.proxy(function(t,u){var v=$(u).data("id");var s=$(u).data("name");this.insertText(l.get(0)," @"+s+"("+v+") ")},this));m.find("span").remove();n.hide()},chooseAtName:function(o){var p=$(o.currentTarget);var q=p.data("id");var m=p.text();var l=p.closest("._j_at_inner");if(l.find('span[rel="'+q+'"]').size()>0){return false}l.find("._j_at_txt").val("");var n=$('<span rel="'+q+'" class="added">'+m+"<i>×</i></span>").data({id:q,name:m});l.find("._j_at_txt").before(n);l.find(".result").hide()}},insertText:function(l,r){if(document.selection){this.focusText(l);var m=document.selection.createRange();m.text=r}else{if(typeof l.selectionStart==="number"&&typeof l.selectionEnd==="number"){var o=l.selectionStart,n=l.selectionEnd,p=o,q=$(l).val();$(l).val(q.substring(0,o)+r+q.substring(n,q.length));$(l).focus();p+=r.length;l.selectionStart=l.selectionEnd=p}else{$(l).val($(l).val()+r)}}},hideProp:function(){$("._j_show_tags").hide();$("._j_tags_def").hide();M.Event.fire("hideTagBtn")},focusText:function(l){var n=$(l).trigger("focus").data("position");if(!n){n=0}if(l.createTextRange){var m=l.createTextRange();m.collapse(!0);m.moveStart("character",n);m.select()}},quoteAfterReply:function(l){i.data("flag",0);i.data("quote","");i.data("link","");M.Event.fire("quoteDialogClose");var m=(l!="")?l:"回复成功";h.show(m)},quickAfterReply:function(n){var l=$("._j_quick_reply");var m=parseInt(l.find("span").html())+1;l.find("span").html(m);i.find("._j_show_tags").removeClass("on").html("举牌");i.find("._j_prop_normal ul li a").removeClass("on");i.find("._j_at_inner span").remove();i.closest("._j_qr_box").hide();i.find("._j_at_txt").val("");i.find("._j_at_inner .result").empty().hide();var o=(n!="")?n:"回复成功";h.show(o)},defaultAfterReply:function(l,n){var m=n||0;if(this.data.is_note){window.location.href="/note/detail.php?iId="+window.Env.iid+"&iPage="+m+"&h="+l+"&t="+Math.random()}else{window.location.href="/group/info.php?iid="+window.Env.iid+"&page="+m+"&h="+l+"&t="+Math.random()}}})};f.exports=c});M.define("Caret",function(a){var b=function(){};M.mix(b,{_gettingCaretPosition:false,getCaretPosition:function(f){f=$(f).get(0);var e=f.tagName;if(e!="TEXTAREA"&&e!="INPUT"){return{start:undefined,end:undefined}}if(!document.selection){return{start:f.selectionStart,end:f.selectionEnd}}if(e=="INPUT"){var d=document.selection.createRange();return{start:-d.moveStrt("character",-f.value.length),end:-d.moveEnd("character",-f.value.length)}}else{if(!this._gettingCaretPosition){this._gettingCaretPosition=true;f.focus();this._gettingCaretPosition=false}var d=document.selection.createRange();var g=d.duplicate();g.moveToElementText(f);g.setEndPoint("StartToEnd",d);var c=f.value.length-g.text.length;g.setEndPoint("StartToStart",d);return{start:f.value.length-g.text.length,end:c}}},setCaretPosition:function(f,g,c){f=$(f).get(0);if(document.selection){if(f.tagName=="TEXTAREA"){var e=f.value.indexOf("\r",0);while(e!=-1&&e<c){c--;if(e<g){g--}e=f.value.indexOf("\r",e+1)}}var d=f.createTextRange();d.collapse(true);d.moveStart("character",g);if(c!=undefined){d.moveEnd("character",c-g)}d.select()}else{f.selectionStart=g;c=c==undefined?g:c;f.selectionEnd=Math.min(c,f.value.length);f.focus()}},insertContent:function(g,c){g=$(g)[0];if($.browser.msie){g.focus();document.selection.createRange().text=c}else{var h=g.selectionStart,e=g.value,d=e.substring(0,h),f=e.substring(h);g.focus();g.value=d+c+f;this.setCaretPosition(g,(d+c).length)}}});return b});M.define("HoverTip",function(c,b,d){var e=M.mix,a=M.Event;function f(g){this.context=g.context||"body";this.selector=g.selector;this.single=true;this.tip=undefined;this.showWait=20;this.hideWait=100;this.showTime=100;this.hideTime=100;this.shStyle="fadeInOut";e(this,g);this.popUpTimer=null;this.popDownTimer=null;this.init()}f.prototype={init:function(){$(this.context).on("mouseenter",this.selector,$.proxy(this.popUp,this)).on("mouseleave",this.selector,$.proxy(this.popDown,this))},popUp:function(h){var g=$(h.currentTarget);if(this.single){clearTimeout(this.popDownTimer);if(this.showWait>0){this.popUpTimer=setTimeout($.proxy(function(){this.showPopUp(g)},this),this.showWait)}else{this.showPopUp(g)}}else{clearTimeout(g.data("popDownTimer"));if(this.showWait>0){g.data("popUpTimer",setTimeout($.proxy(function(){this.showPopUp(g)},this),this.showWait))}else{this.showPopUp(g)}}},popDown:function(h){var g=$(h.currentTarget);if(this.single){clearTimeout(this.popUpTimer);if(this.hideWait>0){this.popDownTimer=setTimeout($.proxy(function(){this.hidePopUp(g)},this),this.hideWait)}else{this.hidePopUp(g)}}else{clearTimeout(g.data("popUpTimer"));if(this.hideWait>0){g.data("popDownTimer",setTimeout($.proxy(function(){this.hidePopUp(g)},this),this.hideWait))}else{this.hidePopUp(g)}}},showPopUp:function(g){var h=this.getTip(g);if(!h&&this.setTip){h=this.setTip(g);if(this.single){this.tip=h}else{g.data("popuptip",h)}}if(h){if(!h.data("__hoverpop_tiphoverevent")){this.bindPopUpHoverEvent(h,g);h.data("__hoverpop_tiphoverevent",true)}if(this.deferShow){this.deferShow(g,h,$.proxy(function(){this.show(g,h)},this))}else{this.show(g,h)}}},getTip:function(g){return this.single?this.tip:$(g).data("popuptip")},hidePopUp:function(g){var h=this.getTip(g);if(h){this.hide(g,h)}},bindPopUpHoverEvent:function(h,g){var i=this;h.hover(function(){if(i.single){clearTimeout(i.popDownTimer)}else{clearTimeout(g.data("popDownTimer"))}},function(){if(i.single){if(i.hideWait>0){i.popDownTimer=setTimeout(function(){i.hidePopUp(g)},i.hideWait)}else{i.hidePopUp(g)}}else{if(i.hideWait>0){g.data("popDownTimer",setTimeout(function(){i.hidePopUp(g)},i.hideWait))}else{i.hidePopUp(g)}}})},show:function(g,h){a(this).fire("beforeshow",{trigger:g,tip:h});f.shower[this.shStyle].show(h,this.showTime,$.proxy(function(){a(this).fire("aftershow",{trigger:g,tip:h})},this))},hide:function(g,h){a(this).fire("beforehide",{trigger:g,tip:h});f.shower[this.shStyle].hide(h,this.hideTime,$.proxy(function(){a(this).fire("afterhide",{trigger:g,tip:h})},this))}};f.shower={fadeInOut:{show:function(g,h,i){$(g).stop(true,true).fadeIn(h,i)},hide:function(g,h,i){$(g).stop(true,true).fadeOut(h,i)}},showHide:{show:function(g,h,i){$(g).stop(true,true).show(h,i)},hide:function(g,h,i){$(g).stop(true,true).hide(h,i)}},slideDownUp:{show:function(g,h,i){$(g).stop(true,true).slideDown(h,i)},hide:function(g,h,i){$(g).stop(true,true).slideUp(h,i)}}};d.exports=f});M.define("/js/note/ControllerReply",function(c){c("jq-tmpl");var p=c("Storage"),a=c("ClickToggle"),o=c("/js/EmotionsHd"),e=c("/js/note/GinfoReply"),i=c("Caret"),h=c("dialog/alert"),l=c("dialog/confirm"),k=c("HoverTip"),g=null,m=null,n=null,d='<div><li><a href="javascript:void(0);" class="{{if is_active >0}}_j_prop_item{{else}}not_yet{{/if}} {{if nlen>99}}llong{{else nlen>2}}l17{{/if}}" data-propid="${propid}" title="${p_title}">{{html name}}<i></i></a></li></div>';return{events:{"click,._j_modify_reply":"modifyReplyUi","click,._j_mr_publish":"modifyReply","click,._j_delete_reply":"deleteReply","click,._j_reply":"replyBlockUi","click,._j_reward_tag":"jumpReward","click,._j_replytab ._j_publish_tab":"switchReplyTab","click,._j_reward_pay":"loadRewardPay","click,._j_reward_set":"loadRewardSet","click,._j_set_top":"setTopReply","click,._j_expand_top":"expandTop","mouseenter,.avatar":"showUserInfo","mouseleave,.avatar":"hideUserInfo"},init:function(){g=$("._j_reward_mao"),m=$("#_j_reply_list"),n=$("._j_replywrap");this.initActivityHoverTip();this.initMFWAppHoverTip();this.initTagUi();var q=new a({container:"#_j_editor",innerSelector:".at,._j_face_tab,._j_at_pop,.expression,._j_face_switch",handler:function(x,w){w.preventDefault();if(x.hasClass("expression")){var u=$("#_js_replyExpression");u.show().siblings(".art_pop").hide();var s=u.find(".art_newface");if(s.find("ul li").length===0){var v=u.find("._j_emojilist");v.each(function(z,A){A=$(A);if(A.data("emotion") in o){A.children("ul").html(M.map(o[A.data("emotion")],function(B){return'<li class="_j_emojiitem" title="'+B.title+'"><img src="'+B.file+'"></li>'}).join(""))}})}}else{if(x.hasClass("at")){var u=$("#_js_replyAt");var y=u.find(".art_arrow");var t=u.find("._j_at_inner");y.css("left",x.position().left+Math.round(x.outerWidth()/2)-Math.round(y.outerWidth()/2));t.find("._j_at_txt").val("");t.find(".result").empty();t.find("span").remove();u.show().siblings(".art_pop").hide()}}},outHandler:function(t,s){$("#_j_editor .art_pop").hide()}});var r=new e({container:this.container.find("#_j_editor"),appType:"default"});$(function(){f();j()})},initActivityHoverTip:function(){var q=new k({selector:"._j_in_activity_icon",single:false,setTip:function(r){return r.children("dl")}})},initMFWAppHoverTip:function(){var q=new k({selector:"._j_fromapp_link",single:false,setTip:function(r){return r.children("img")}})},initTagUi:function(){var t=$("._j_tags_def"),q=$("._j_tags_low"),r=$("._j_show_tags"),u=$("._j_tags_high");if(this.data&&this.data.tags&&this.data.tags.length>0){$.template("TagItemTmpl",d);var s={low:"",high:"",def:""};$.each(this.data.tags,function(w,v){s.def+=$.tmpl("TagItemTmpl",{is_active:v.is_active,nlen:v.name.length,propid:v.propid,p_title:v.p_title,name:v.name}).html();if(v.lv<24){s.low+=$.tmpl("TagItemTmpl",{is_active:v.is_active,nlen:v.name.length,propid:v.propid,p_title:v.p_title,name:v.name}).html()}else{s.high+=$.tmpl("TagItemTmpl",{is_active:v.is_active,nlen:100,propid:v.propid,p_title:v.p_title,name:v.name}).html()}});q.find("ul").html(s.low);u.find("ul").html(s.high);t.html(s.def);r.show()}if(this.data&&this.data.is_icon===1){r.addClass("tags_tips")}},modifyReplyUi:function(v){var w=$(v.currentTarget);if(!window.Env.UID){M.Event.fire("login:required");return false}this.container.find("._j_publish_tab[data-mode='article']").trigger("click");var t=w.closest("._j_reply_item");var s=t.data("rid");var r=this.container.find("#_j_editor");r.data("rid",s);var u=t.find("._j_reply_content").data("content");this.container.find("._j_publish_reply").addClass("_j_mr_publish").removeClass("_j_publish_reply");var q=this.container.find("textarea[name='reply_content']");q.val(u).focus().removeAttr("placeholder");i.setCaretPosition(q,u.length);var x=this.container.find("a[name='note_publish_reply']").offset();$(window).scrollTop(x.top)},modifyReply:function(u){u.preventDefault();var v=$(u.currentTarget);var w=this.container;var r=this.container.find("textarea[name='reply_content']");var q=r.val();var t=this.container.find("#_j_editor");var s=t.data("rid");if($.trim(q).length===0){h.pop("请输入内容");return false}if(v.hasClass("loading")){return false}v.addClass("loading");$.ajax({type:"POST",url:"/note/ajax_post.php",data:{sAction:"modifyReply",iRid:s,sContent:q},dataType:"json",success:function(B){v.removeClass("loading");if(!B.error){if(B.payload){var z=B.payload.html_content;var A=B.payload.orignal_content;if(B.payload.rid&&z){var y=B.payload.rid;w.find("textarea[name='reply_content']").val("");var x=w.find("._j_reply_item[data-rid='"+y+"']");var C=x.offset();$(window).scrollTop(C.top-72);x.find("._j_reply_content").html(z).data("content",A);w.find("._j_mr_publish").addClass("_j_publish_reply").removeClass("_j_mr_publish")}else{h.pop("发表回复失败")}}}else{h.pop(B.error.error)}}})},setTopReply:function(s){s.preventDefault();var t=$(s.currentTarget);var q=t.parents("._j_reply_item");var r=q.data("rid");$.post("/note/ajax_post.php",{sAction:"setTopReply",iRid:r},function(u){if(!u.error){t.remove();h.pop("成功选为精彩回复!")}else{h.pop("设置失败，请重试!")}},"json")},expandTop:function(r){r.preventDefault();var s=$(r.currentTarget);var q=s.children("em");if(s.hasClass("won-swich-hide")){s.removeClass("won-swich-hide");q.text("共有");$("#_j_top_reply_list div._j_reply_item").each(function(t,u){if(t>=3){$(u).hide()}})}else{s.addClass("won-swich-hide");q.text("收起");$("#_j_top_reply_list div._j_reply_item").each(function(){$(this).show()})}},deleteReply:function(s){s.preventDefault();var t=$(s.currentTarget);var q=t.parents("._j_reply_item");var r=q.data("rid");l.pop("确定删除该回复么？",function(){$.ajax({type:"POST",url:"/note/ajax_post.php",data:{sAction:"deleteReply",iRid:r},dataType:"json",success:function(u){if(!u.error){if(u.payload){if(u.payload.ret==1){q.slideUp(600,function(){q.remove();if(q.attr("id")=="top_reply_"+r){if($("#_j_top_reply_list div._j_reply_item").length==0){$("#_j_top_reply_list").remove()}$("#reply_"+r).slideUp(600,function(){$("#reply_"+r).remove();if($("#_j_reply_list div._j_reply_item").length===0&&window.Env.curr_page>1){window.location.href="/note/r.php?iId="+window.Env.iid+"&iPage="+(window.Env.curr_page-1)+"&sAction=page"}})}else{$("#top_reply_"+r).slideUp(600,function(){$("#top_reply_"+r).remove();if($("#_j_top_reply_list div._j_reply_item").length==0){$("#_j_top_reply_list").remove()}});if($("#_j_reply_list ._j_reply_item").length===0&&window.Env.curr_page>1){window.location.href="/note/r.php?iId="+window.Env.iid+"&iPage="+(window.Env.curr_page-1)+"&sAction=page"}}})}else{h.pop("删除回复失败")}}}else{h.pop(u.error.error)}}})})},replyBlockUi:function(v){v.preventDefault();var w=$(v.currentTarget);if(!window.Env.UID){M.Event.fire("login:required");return false}this.container.find("._j_publish_tab[data-mode='article']").trigger("click");this.container.find("._j_mr_publish").addClass("_j_publish_reply").removeClass("_j_mr_publish");var r=w.parents("._j_reply_item");var u=r.data("username");var q=r.data("rid");var t=this.container.find("#_j_editor");t.data("flag",2);t.data("objid",q);var x=this.container.find("a[name='note_publish_reply']").offset();$(window).scrollTop(x.top);var s=this.container.find("textarea[name='reply_content']");s.attr("placeholder","回复"+u+"：").val("").focus()},quoteBlockUi:function(u){u.preventDefault();var v=$(u.currentTarget);if(!window.Env.UID){M.Event.fire("login:required");return false}this.container.find("._j_mr_publish").addClass("_j_publish_reply").removeClass("_j_mr_publish");var r=v.parents("._j_reply_item");var t=r.data("username");var q=r.data("rid");var x=this.container.find("#_j_editor");x.data("flag",3);x.data("objid",q);var w=this.container.find("a[name='note_publish_reply']").offset();$(window).scrollTop(w.top);var s=this.container.find("textarea[name='reply_content']");s.attr("placeholder","回复"+t+"的引文：").val("").focus()},showUserInfo:function(r){var s=$(r.currentTarget);if(s.data("inited")){s.find(".card_pop").show()}else{var q=s.data("uid");$.get("/ajax/ajax_user_pop.php",{uid:q},function(t){if(t.ret==1){$(t.html).appendTo(s).show()}},"json");s.data("inited",true)}},hideUserInfo:function(q){var r=$(q.currentTarget);r.find(".card_pop").hide()},switchReplyTab:function(q){q.preventDefault();var r=$(q.currentTarget);var s=r.data("mode");n.find("._j_publish_tab").removeClass("on");r.addClass("on");n.find("#_j_editor,._j_reward_mode").hide();n.find("._j_"+s+"_mode").show()},jumpReward:function(q){g.trigger("click");var r=(g.offset().top-70)+"px";$("html, body").animate({scrollTop:r},{duration:1000,easing:"swing"})},loadRewardPay:function(q){q.preventDefault();var r=$(q.currentTarget);c.async(["/js/note/GinfoReward"],function(s){var t=new s()});r.removeClass("_j_reward_pay")},loadRewardSet:function(q){q.preventDefault();var r=$(q.currentTarget);c.async(["/js/note/GinfoRewardSet"],function(s){var t=new s()});r.removeClass("_j_reward_set")}};function b(t){var u=document.location.href;var s=u.indexOf(t+"=");if(s==-1){return false}var r=u.slice(t.length+s+1);var q=r.indexOf("&");if(q!=-1){r=r.slice(0,q)}return r}function f(){var s=b("h");if(s.length>0&&m.children().length>0){var q=$("#reply_"+s);if(q.length){var r=(q.offset().top-65)+"px";$("html, body").animate({scrollTop:r},{duration:1000,easing:"swing"})}}}function j(){var q=b("s");if(q.length>0){if(q=="0"){if(g.length){g.trigger("click");var r=($("._j_reward_mao").offset().top-70)+"px";$("html, body").animate({scrollTop:r},{duration:1000,easing:"swing"});if(window.Env.author_uid==window.Env.UID){var s=p.getItem("ginfo:open:reward:"+window.Env.UID+":"+window.Env.iid);if(!s){$("._j_reward_set_btn").addClass("btn-tips")}}}}}}});M.define("Slider",function(b,a,c){function d(e){this.viewSize=1;this.slideCnt=null;this.slideList=null;this.prev=$();this.next=$();this.indexer=$();this.itemSize=null;this.slideTime=200;this.slideSize=1;this.indexerOnClass="on";this.disabledClass="disabled";this.indexAttr="index";this.shStyle="slide";this.index=1;M.mix(this,e);this.init()}d.prototype={init:function(){this.hasMore=true;this.bindEvents();this.updateStatus();if(!this.itemSize){this.itemSize=$(this.slideList).eq(0).outerWidth(true)}},bindEvents:function(){this.prev.click($.proxy(this.toPrev,this));this.next.click($.proxy(this.toNext,this));this.indexer.click($.proxy(function(g){g.preventDefault();var e=$(g.currentTarget),f=e.index()+1;if(!e.hasClass(this.indexerOnClass)&&!this.sliding&&!isNaN(f)){this.toIndex(f)}},this))},toPrev:function(e){if(!this.prev.hasClass(this.disabledClass)&&!this.sliding){this.slide(-this.slideSize)}e.preventDefault()},toNext:function(e){if(!this.next.hasClass(this.disabledClass)&&!this.sliding){this.slide(this.slideSize)}e.preventDefault()},toIndex:function(e){this.slide(e-this.index)},updateStatus:function(){if(this.index===1){this.prev.addClass(this.disabledClass)}else{this.prev.removeClass(this.disabledClass)}if((this.index+this.viewSize-1)>=$(this.slideList).length&&!this.hasMore){this.next.addClass(this.disabledClass)}else{this.next.removeClass(this.disabledClass)}this.indexer.filter("."+this.indexerOnClass).removeClass(this.indexerOnClass);this.indexer.eq(this.index-1).addClass(this.indexerOnClass);M.Event(this).fire("slide",{data:{index:this.index,total:$(this.slideList).length}})},slide:function(e){this.sliding=true;this.realSlideNum=e;this.prepareData($.proxy(function(){var f=this;d.shower[this.shStyle].show(this,function(){f.index+=f.realSlideNum;f.sliding=false;f.updateStatus()})},this))},prepareData:function(h){var f=this.realSlideNum,e=$(this.slideList).length,h=typeof h==="function"?h:$.noop,g=f>=0?(e-this.index-this.viewSize+1):(this.index-1);if(g<=1){this.hasMore=false}if(g<=0){this.realSlideNum=0}else{this.realSlideNum=Math.abs(f)>g?g:f;if(f<0&&this.realSlideNum>0){this.realSlideNum=-this.realSlideNum}}h()},reset:function(){this.index=1;this.hasMore=true;this.updateStatus();if(this.shStyle==="slide"){this.slideCnt.css("left",0)}}};d.shower={slide:{show:function(f,h){var e=parseInt($(f.slideCnt).css("left"),10),g=f.itemSize*f.realSlideNum;e=isNaN(e)?0:e,$(f.slideCnt).animate({left:e-g},f.slideTime,function(){h()})}},fadeInOut:{show:function(f,h){var g=$(f.slideList[f.index-1]),e=$(f.slideList[f.index+f.realSlideNum-1]);g.fadeOut(f.slideTime);e.fadeIn(f.slideTime,function(){h()})}}};return d});M.define("/js/note/ControllerRelate",function(a){var b=a("Slider");return{init:function(){this.initAuto()},initAuto:function(){var e=400,d=5000,k=false,i=$("#_j_gl_slide_container"),j=i.find(".gs_content"),h=i.find(".gs_nav"),c=j.children("li"),g=c.length;var f=new b({slideCnt:j,slideList:c,slideTime:e,indexer:h.children("li"),indexerOnClass:"on",shStyle:"slide"});j.add(h).bind("mouseenter",function(){k=true}).bind("mouseleave",function(){k=false});setInterval(function(){if(!k&&M.windowFocused){if(f.index<g){f.toIndex(f.index+1)}else{f.toIndex(1)}}},d)}}});M.define("/js/note/ControllerCatalog",function(a){return{init:function(){var b=$("#_j_catalogtitle");if(b.children().length==2){b.on("click",".side_tab_item",function(c){var e=$(c.currentTarget),d=e.data("target");e.addClass("on").siblings().removeClass("on");M.Event.fire("right bottom catalog change",{target:d})})}}}});
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
/*!
 * jQuery Mousewheel 3.1.12
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){module.exports=a}else{a(jQuery)}}}(function(c){var d=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],k=("onwheel" in document||document.documentMode>=9)?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],h=Array.prototype.slice,j,b;if(c.event.fixHooks){for(var e=d.length;e;){c.event.fixHooks[d[--e]]=c.event.mouseHooks}}var f=c.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener){for(var m=k.length;m;){this.addEventListener(k[--m],l,false)}}else{this.onmousewheel=l}c.data(this,"mousewheel-line-height",f.getLineHeight(this));c.data(this,"mousewheel-page-height",f.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var m=k.length;m;){this.removeEventListener(k[--m],l,false)}}else{this.onmousewheel=null}c.removeData(this,"mousewheel-line-height");c.removeData(this,"mousewheel-page-height")},getLineHeight:function(m){var i=c(m),n=i["offsetParent" in c.fn?"offsetParent":"parent"]();if(!n.length){n=c("body")}return parseInt(n.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(i){return c(i).height()},settings:{adjustOldDeltas:true,normalizeOffset:true}};c.fn.extend({mousewheel:function(i){return i?this.bind("mousewheel",i):this.trigger("mousewheel")},unmousewheel:function(i){return this.unbind("mousewheel",i)}});function l(i){var o=i||window.event,u=h.call(arguments,1),w=0,q=0,p=0,t=0,s=0,r=0;i=c.event.fix(o);i.type="mousewheel";if("detail" in o){p=o.detail*-1}if("wheelDelta" in o){p=o.wheelDelta}if("wheelDeltaY" in o){p=o.wheelDeltaY}if("wheelDeltaX" in o){q=o.wheelDeltaX*-1}if("axis" in o&&o.axis===o.HORIZONTAL_AXIS){q=p*-1;p=0}w=p===0?q:p;if("deltaY" in o){p=o.deltaY*-1;w=p}if("deltaX" in o){q=o.deltaX;if(p===0){w=q*-1}}if(p===0&&q===0){return}if(o.deltaMode===1){var v=c.data(this,"mousewheel-line-height");w*=v;p*=v;q*=v}else{if(o.deltaMode===2){var n=c.data(this,"mousewheel-page-height");w*=n;p*=n;q*=n}}t=Math.max(Math.abs(p),Math.abs(q));if(!b||t<b){b=t;if(a(o,t)){b/=40}}if(a(o,t)){w/=40;q/=40;p/=40}w=Math[w>=1?"floor":"ceil"](w/b);q=Math[q>=1?"floor":"ceil"](q/b);p=Math[p>=1?"floor":"ceil"](p/b);if(f.settings.normalizeOffset&&this.getBoundingClientRect){var m=this.getBoundingClientRect();s=i.clientX-m.left;r=i.clientY-m.top}i.deltaX=q;i.deltaY=p;i.deltaFactor=b;i.offsetX=s;i.offsetY=r;i.deltaMode=0;u.unshift(i,w,q,p);if(j){clearTimeout(j)}j=setTimeout(g,200);return(c.event.dispatch||c.event.handle).apply(this,u)}function g(){b=null}function a(m,i){return f.settings.adjustOldDeltas&&m.type==="mousewheel"&&i%120===0}}));if(window.M&&typeof window.M.define=="function"){window.M.define("jq-mousewheel",function(){return jQuery})}M.define("ScrollBar",function(a){a("jq-mousewheel");var c=15;function b(d){this.wrap=null;this.container=null;this.dir=1;this.barTPL='<div style="position:absolute; top:0; right:0; padding:1px"><div style="width:7px; height:100%; background:#bbb"></div></div>';this.maxHeight=0;M.mix(this,d);this.container=$(this.container);this.wrap=$(this.wrap);this.scrollBar=null;this.stopped=false;this.scrollToEnd=false;this.init()}b.prototype={init:function(){if(!this.container.length){M.error("ScrollBar init failed for no scroll container.");return false}this.posDir=this.dir===0?"left":"top";this.lengthDir=this.dir===0?"width":"height";this.scrollScale=this.dir===0?"scrollWidth":"scrollHeight";this.clientScale=this.dir===0?"clientWidth":"clientHeight";this.scrollDir=this.dir===0?"scrollLeft":"scrollTop";this.initWrap();this.bindEvents();this.setted=false},initWrap:function(){this.container.css({position:"relative"});if(this.dir==1){this.container.css({"overflow-y":"hidden"})}else{this.container.css({"overflow-x":"hidden"})}if(this.maxHeight&&!isNaN(this.maxHeight)){this.container.css("max-"+this.lengthDir,this.maxHeight).addClass("maxh")}if(!this.wrap.length){this.container.wrap('<div style="position:relative"></div>');this.wrap=this.container.parent()}else{if(this.wrap.css("position")=="static"){this.wrap.css("position","relative")}}this.createScrollBar();if(this.container.height()>0){this.setScrollBar()}},createScrollBar:function(){this.container[0][this.scrollDir]=0;this.scrollBar=$(this.barTPL).css("opacity",0).appendTo(this.wrap)},bindEvents:function(){this.wrap.bind("mouseenter",$.proxy(this.enterWrap,this)).bind("mouseleave",$.proxy(this.leaveWrap,this)).mousewheel($.proxy(this.rollWrap,this));this.scrollBar.mousedown($.proxy(this.holdBar,this));M.Event(this).on("contentchange",$.proxy(this.checkShowScrollBar,this))},setScrollBar:function(){this.checkShowScrollBar()},setDimension:function(){this.wrapStart=this.wrap.offset()[this.posDir]},checkShowScrollBar:function(){var e=this.container[0];this.wrap.css("height",this.container.height());this.wrapLength=this.dir===0?this.wrap.width():this.wrap.height();this.scrollLength=this.dir===0?e.scrollWidth:e.scrollHeight;this.clientLength=this.dir===0?e.clientWidth:e.clientHeight;var d=e[this.scrollDir];if(this.scrollLength>this.clientLength){this.updateScrollBarLength();this.scrollBar.show();if(d<=this.scrollLength-this.clientLength){this.scroll(d)}else{this.scroll(this.scrollLength-this.clientLength)}}else{this.scrollBar.hide()}},updateScrollBarLength:function(){this.barLength=this.wrapLength*(this.clientLength/this.scrollLength);this.barLength=this.barLength<c?c:this.barLength;this.scrollBar.css((this.dir===0?"width":"height"),this.barLength);this.barLength=this.dir===0?this.scrollBar.outerWidth():this.scrollBar.outerHeight()},enterWrap:function(){if(!this.setted){this.setScrollBar();this.setted=true}this.on=true;this.setDimension();this.scrollBar.stop(true,true).animate({opacity:0.8},300)},leaveWrap:function(){this.on=false;if(!this.holded){this.scrollBar.stop(true,true).animate({opacity:0},300)}},stop:function(){this.stopped=true},start:function(){this.stopped=false},rollWrap:function(f,h){if(this.stopped){return true}var d=this.getScrollUnit(-h*f.deltaFactor);d=d<0?Math.floor(d):Math.ceil(d);var g=0,e=this.container[0][this.scrollDir];if(e+d<0){g=0}else{if(e+d+this.clientLength>this.scrollLength){g=this.scrollLength-this.clientLength}else{g=e+d}}this.scroll(g);if(this.scrollBar.is(":visible")){f.preventDefault();f.stopPropagation()}},getScrollUnit:function(d){if($.browser.msie&&parseInt($.browser.version,10)<9){d=30*d}return d},holdBar:function(d){this.holded=true;this.cursorPosition=this.dir===0?d.clientX:d.clientY;this.startCursorOffset=this.cursorPosition-this.scrollBar.offset()[this.posDir];this.listenMouseMove();d.preventDefault()},listenMouseMove:function(){$(document).bind("mousemove",this.getMoveCursorHandler()).bind("mouseup",this.getReleaseCursorHandler())},stopListenMouseMove:function(){$(document).unbind("mousemove",this.getMoveCursorHandler()).unbind("mouseup",this.getReleaseCursorHandler())},getMoveCursorHandler:function(){if(!this.moveCursorHandler){this.moveCursorHandler=$.proxy(this.moveCursor,this)}return this.moveCursorHandler},getReleaseCursorHandler:function(){if(!this.releaseCursorHandler){this.releaseCursorHandler=$.proxy(this.releaseCursor,this)}return this.releaseCursorHandler},moveCursor:function(i){if(this.holded){var e=this.dir===0?i.clientX:i.clientY,h=e-this.cursorPosition,j=this.cursorPosition-this.startCursorOffset-this.wrapStart,g=e-this.startCursorOffset-this.wrapStart,d=this.cursorPosition+(this.barLength-this.startCursorOffset)-this.wrapStart-this.wrapLength,f=e+(this.barLength-this.startCursorOffset)-this.wrapStart-this.wrapLength;if(g>0&&f<0&&h!==0){this.cursorPosition=e;this.moveScrollBar(h)}else{if(g<=0&&j>0&&h!==0){h=-j;this.cursorPosition=this.cursorPosition+h;this.moveScrollBar(h)}else{if(f>=0&&d<0&&h!==0){h=-d;this.cursorPosition=this.cursorPosition+h;this.moveScrollBar(h)}}}}i.preventDefault()},moveScrollBar:function(e){var f=parseInt(this.scrollBar.css(this.posDir),10),d=this.wrapLength-this.barLength-f;if(e<0&&e>-f||e>0&&e<d){f=f+e}else{if(e<0){f=0}else{if(e>0){f=f+d}}}this.scroll((f/(this.wrapLength-this.barLength))*(this.scrollLength-this.clientLength))},scroll:function(d){this.scrollBar.css(this.posDir,d*(this.wrapLength-this.barLength)/(this.scrollLength-this.clientLength));this.container[0][this.scrollDir]=d;M.Event(this).fire("scroll");if(d===0){M.Event(this).fire("scrollToTop");this.scrollToEnd=true}else{if(d+this.container[0][this.clientScale]>=this.container[0][this.scrollScale]){M.Event(this).fire("scrollToBottom");this.scrollToEnd=true}else{this.scrollToEnd=false}}},scrollLength:function(){return this.container[0][this.scrollDir]},releaseCursor:function(){this.holded=false;this.stopListenMouseMove();if(!this.on){this.scrollBar.stop(true,true).animate({opacity:0},300)}}};return b});M.define("StickyAndStayBlock",function(e,h,b){var a=0,d={},j={};function i(){a++;return"_j_fix_block_abs_"+a}function g(){a++;return"_j_fix_block_fix_"+a}var c=e("ScrollBar");function f(k){this.elem=null;this.heightCover=false;this.offsetTop=0;this.offsetBottom=0;this.stayToElement=null;this.absStyleClass="_j_sticky_abs";this.fixStyleClass="_j_sticky_fix";M.mix(this,k);this.elem=$(this.elem);this.stayToElement=$(this.stayToElement);if(!this.elem.length){M.error("fix block need block element")}this.elemHeight=this.elem.height();this.elemWidth=this.elem.width();this.elemTop=this.elem.offset().top;this.stayToElementHeight=this.stayToElement.length?this.stayToElement.height():0;this.stayToElementTop=this.stayToElement.length?this.stayToElement.offset().top:0;this.elemPadding=this.getElemVerticalPadding(this.elem);this.stayToElementPadding=this.getElemVerticalPadding(this.stayToElement);this.offsetParent=this.elem.offsetParent();this.fixClass="";this.beforeAbsClass=[];this.absClass="";this.beforeFixClass=[];this.positionMode="static";this.cannotHeightCover=false;this.absClassChanged=false;this.fixClassChanged=false;if(this.stayToElement.length>0){if(this.elemTop+this.elemHeight+this.elemPadding+this.offsetBottom+this.offsetTop>this.stayToElementHeight+this.stayToElementPadding+this.stayToElementTop){this.offsetBottom=this.stayToElementHeight+this.stayToElementPadding+this.stayToElementTop-this.elemTop-this.elemHeight-this.elemPadding-this.offsetTop;this.offsetBottom=this.offsetBottom<0?0:this.offsetBottom}this.resetCannotHeightCover()}this.init()}M.mix(f.prototype,{init:function(){this.bindEvents();this.createModeStyle();setTimeout(function(){$(window).trigger("scroll")},1)},bindEvents:function(){$(window).scroll($.proxy(function(){this.setPositionMode(this.getPositionMode($(window).scrollTop()))},this));var k=0;$(window).resize($.proxy(function(){clearTimeout(k);k=setTimeout($.proxy(function(){this.resetCannotHeightCover();this.resetPosition()},this),200)},this));M.Event(this).on("element height change",$.proxy(function(l){this.resetElemHeight(l&&l.height)},this));M.Event(this).on("element top change",$.proxy(function(l){this.resetElemTop(l&&l.top);this.resetCannotHeightCover();this.resetPosition()},this));M.Event(this).on("stay element height change",$.proxy(function(l){this.resetBottomStayElementHeight(l&&l.height);this.resetCannotHeightCover();this.resetPosition()},this));M.Event(this).on("stay element top change",$.proxy(function(l){this.resetBottomStayElementTop(l&&l.top);this.resetCannotHeightCover();this.resetPosition()},this));setInterval($.proxy(function(){if(this.elem.height()!=this.elemHeight){M.Event(this).fire("element height change",{height:this.elem.height()})}if(this.stayToElement.length&&this.stayToElement.height()!=this.stayToElementHeight){M.Event(this).fire("stay element height change",{height:this.stayToElement.height()})}if(this.positionMode=="static"){if(this.elem.offset().top!=this.elemTop){M.Event(this).fire("element top change",{top:this.elem.offset().top})}}if(this.stayToElement.length&&this.stayToElement.offset().top!=this.stayToElementTop){M.Event(this).fire("stay element top change",{top:this.stayToElement.offset().top})}},this),2000)},getElemVerticalPadding:function(l){var n=0;if(l.length){var k=parseInt(l.css("padding-top"),10),m=parseInt(l.css("padding-bottom"),10);k=isNaN(k)?0:k;m=isNaN(m)?0:m;n=k+m}return n},resetCannotHeightCover:function(){if(this.stayToElementTop+this.stayToElementHeight+this.stayToElementPadding-this.elemTop<$(window).height()-this.offsetBottom){this.cannotHeightCover=true}else{this.cannotHeightCover=false}},resetElemHeight:function(k){this.elemHeight=k||this.elem.height();this.resetPosition()},resetBottomStayElementHeight:function(k){this.stayToElementHeight=k||this.stayToElement.height();this.createModeStyle();this.setPositionMode(this.getPositionMode($(window).scrollTop()))},resetElemTop:function(k){if(typeof k!="number"){k=this.positionMode=="static"?this.elem.offset().top:this.placeholder.offset().top}this.elemTop=k},resetBottomStayElementTop:function(k){this.stayToElementTop=k||this.stayToElement.offset().top},createModeStyle:function(){var n=$(window).height()-this.offsetTop-this.offsetBottom;var p=["position:fixed","top:"+this.offsetTop+"px"];if(this.heightCover&&!this.cannotHeightCover){p.push("bottom:"+this.offsetBottom+"px")}var m=p.join(";");if(!(m in j)||j[m]!=this.fixClass){if(this.fixClass){this.beforeFixClass.push(this.fixClass)}if(m in j){this.fixClass=j[m]}else{this.fixClass=g();M.addStyle("."+this.fixClass+"{"+m+"}");j[m]=this.fixClass}this.fixClassChanged=true}if(this.stayToElement.length){var k=["position:absolute"];if(this.stayToElement.is(this.offsetParent)){k.push("bottom:"+this.offsetBottom+"px")}else{var l=this.stayToElementTop+this.stayToElementHeight+this.stayToElementPadding;k.push("top:"+(l-this.offsetBottom-this.offsetParent.offset().top-(this.heightCover&&!this.cannotHeightCover?n:(this.elemHeight+this.elemPadding)))+"px")}if(this.heightCover&&!this.cannotHeightCover){k.push("height:"+n+"px")}var o=k.join(";");if(!(o in d)||d[o]!=this.absClass){if(this.absClass){this.beforeAbsClass.push(this.absClass)}if(o in d){this.absClass=d[o]}else{this.absClass=i();M.addStyle("."+this.absClass+"{"+o+"}");d[o]=this.absClass}this.absClassChanged=true}}},getPositionMode:function(k){if(this.stayToElement.length){if(k+this.offsetTop+this.elemHeight+this.elemPadding+this.offsetBottom>=this.stayToElementTop+this.stayToElementHeight+this.stayToElementPadding){return"absolute"}else{if(k+this.offsetTop>=this.elemTop){return"fixed"}else{return"static"}}}else{if(k+this.offsetTop>=this.elemTop){return"fixed"}else{return"static"}}},resetPosition:function(){this.createModeStyle();this.setPositionMode(this.getPositionMode($(window).scrollTop()))},setPositionMode:function(m){if(m!=this.positionMode){var l=false,k=false;if(m=="fixed"){this.elem.removeClass(this.absClass+" "+this.absStyleClass+" "+this.beforeAbsClass.join(" ")+" "+this.beforeFixClass.join(" "));this.elem.addClass(this.fixClass+" "+this.fixStyleClass);if(this.positionMode=="static"){this.showPlaceholder();l=true}this.fixClassChanged=false}else{if(m=="absolute"){this.elem.removeClass(this.fixClass+" "+this.fixStyleClass+" "+this.beforeAbsClass.join(" ")+" "+this.beforeFixClass.join(" "));this.elem.addClass(this.absClass+" "+this.absStyleClass);if(this.positionMode=="static"){this.showPlaceholder();l=true}this.absClassChanged=false}else{if(m=="static"){if(this.positionMode=="absolute"){this.elem.removeClass(this.absClass+" "+this.absStyleClass+" "+this.beforeAbsClass.join(" ")+" "+this.beforeFixClass.join(" "))}else{this.elem.removeClass(this.fixClass+" "+this.fixStyleClass)}this.hidePlaceholder();k=true}}}this.positionMode=m;if((l||k)&&this.heightCover&&!this.cannotHeightCover){M.Event(this).fire("element height change",{height:this.elem.height()})}M.Event(this).fire("mode change",{mode:this.positionMode})}else{if(m=="fixed"&&this.fixClassChanged){this.elem.removeClass(this.beforeFixClass.join(" "));this.elem.addClass(this.fixClass);this.fixClassChanged=false}else{if(m=="absolute"&&this.absClassChanged){this.elem.removeClass(this.beforeAbsClass.join(" "));this.elem.addClass(this.absClass);this.absClassChanged=false}}}},showPlaceholder:function(){if(!this.placeholder){this.placeholder=$('<div style="display:none"></div>').insertBefore(this.elem)}this.placeholder.css({height:this.elem.outerHeight(true)}).show()},hidePlaceholder:function(){this.placeholder&&this.placeholder.hide()}});b.exports=f});M.closure(function(b){var a=b("StickyAndStayBlock");var d=$("._j_sticky_block");if(!d.length){return false}var c=new a({elem:d,stayToElement:$(".view"),offsetTop:70,heightCover:true,absStyleClass:"sticky_mode_abs",fixStyleClass:"sticky_mode_fix"});M.Event(c).on("element height change",function(e){M.Event.fire("sticky element height change",e)});M.Event.on("new html appended",function(){M.Event(c).fire("element top change")})});M.define("/js/note/ControllerExpand",function(a){var b=a("dialog/alert");return{events:{"click,._j_restore":"restoreNote",},init:function(){this.initUsaZuche()},restoreNote:function(c){c.preventDefault();var e=$(c.currentTarget);if(e.hasClass("unique")){return false}e.addClass("unique");var d=e.data("iid");$.ajax({type:"POST",url:"/note/ajax_post.php",data:{sAction:"restoreNote",iId:d},dataType:"json",success:function(f){if(!f.error){window.location.reload()}else{b.pop(f.error.error)}e.remove("unique")}})},initUsaZuche:function(){if(this.data.is_relate_usa){$(".link").each(function(){var d=$(this);var c=d.attr("href");if(c&&c.indexOf("zuche.mafengwo.cn/jump_landing_page.php")!==-1){d.attr("href",c+"&region=us")}})}}}});(function(a){if(typeof define==="function"&&define.amd){define(a)}else{window.purl=a()}})(function(){var h={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href",embed:"src",object:"data"},n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],c={anchor:"fragment"},a={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},f=/^[0-9]+$/;function e(r,u){var w=decodeURI(r),t=a[u||false?"strict":"loose"].exec(w),v={attr:{},param:{},seg:{}},s=14;while(s--){v.attr[n[s]]=t[s]||""}v.param.query=i(v.attr.query);v.param.fragment=i(v.attr.fragment);v.seg.path=v.attr.path.replace(/^\/+|\/+$/g,"").split("/");v.seg.fragment=v.attr.fragment.replace(/^\/+|\/+$/g,"").split("/");v.attr.base=v.attr.host?(v.attr.protocol?v.attr.protocol+"://"+v.attr.host:v.attr.host)+(v.attr.port?":"+v.attr.port:""):"";return v}function b(s){var r=s.tagName;if(typeof r!=="undefined"){return h[r.toLowerCase()]}return r}function q(v,u){if(v[u].length===0){return v[u]={}}var s={};for(var r in v[u]){s[r]=v[u][r]}v[u]=s;return s}function d(v,t,s,w){var r=v.shift();if(!r){if(g(t[s])){t[s].push(w)}else{if("object"==typeof t[s]){t[s]=w}else{if("undefined"==typeof t[s]){t[s]=w}else{t[s]=[t[s],w]}}}}else{var u=t[s]=t[s]||[];if("]"==r){if(g(u)){if(""!==w){u.push(w)}}else{if("object"==typeof u){u[p(u).length]=w}else{u=t[s]=[t[s],w]}}}else{if(~r.indexOf("]")){r=r.substr(0,r.length-1);if(!f.test(r)&&g(u)){u=q(t,s)}d(v,u,r,w)}else{if(!f.test(r)&&g(u)){u=q(t,s)}d(v,u,r,w)}}}}function k(v,u,x){if(~u.indexOf("]")){var w=u.split("[");d(w,v,"base",x)}else{if(!f.test(u)&&g(v.base)){var s={};for(var r in v.base){s[r]=v.base[r]}v.base=s}if(u!==""){l(v.base,u,x)}}return v}function i(r){return j(String(r).split(/&|;/),function(s,x){try{x=decodeURIComponent(x.replace(/\+/g," "))}catch(u){}var y=x.indexOf("="),w=o(x),t=x.substr(0,w||y),v=x.substr(w||y,x.length);v=v.substr(v.indexOf("=")+1,v.length);if(t===""){t=x;v=""}return k(s,t,v)},{base:{}}).base}function l(t,s,u){var r=t[s];if(typeof r==="undefined"){t[s]=u}else{if(g(r)){r.push(u)}else{t[s]=[r,u]}}}function o(u){var r=u.length,t,v;for(var s=0;s<r;++s){v=u[s];if("]"==v){t=false}if("["==v){t=true}if("="==v&&!t){return s}}}function j(v,s){var t=0,r=v.length>>0,u=arguments[2];while(t<r){if(t in v){u=s.call(undefined,u,v[t],t,v)}++t}return u}function g(r){return Object.prototype.toString.call(r)==="[object Array]"}function p(s){var r=[];for(var t in s){if(s.hasOwnProperty(t)){r.push(t)}}return r}function m(r,s){if(arguments.length===1&&r===true){s=true;r=undefined}s=s||false;r=r||window.location.toString();return{data:e(r,s),attr:function(t){t=c[t]||t;return typeof t!=="undefined"?this.data.attr[t]:this.data.attr},param:function(t){return typeof t!=="undefined"?this.data.param.query[t]:this.data.param.query},fparam:function(t){return typeof t!=="undefined"?this.data.param.fragment[t]:this.data.param.fragment},segment:function(t){if(typeof t==="undefined"){return this.data.seg.path}else{t=t<0?this.data.seg.path.length+t:t-1;return this.data.seg.path[t]}},fsegment:function(t){if(typeof t==="undefined"){return this.data.seg.fragment}else{t=t<0?this.data.seg.fragment.length+t:t-1;return this.data.seg.fragment[t]}}}}m.jQuery=function(r){if(r!=null){r.fn.url=function(t){var s="";if(this.length){s=r(this).attr(b(this[0]))||""}return m(s,t)};r.url=m}};m.jQuery(window.jQuery);return m});if(window.M&&typeof window.M.define=="function"){window.M.define("/js/purl",function(){return jQuery})}M.define("Movearound",function(b){function a(c){this.Class="movearound";this.Step=1;this.Times=50;M.mix(this,c);this.init()}M.mix(a.prototype,{init:function(){this.eStyle();this.moveAround()},moveAround:function(){var f,g,d,i=$("."+this.Class+""),e=this.Step,h=this.Times;var c=function(l,j,k){d=0;g=function(){if(d==l.get(0).scrollLeft){l.get(0).scrollLeft+=j;d+=j}else{l.get(0).scrollLeft-=j;d-=j}};g();f=setInterval(g,k)};i.mouseover(function(){var j=$(this);c(j,e,h)}).mouseout(function(){clearInterval(f);var j=$(this);j.get(0).scrollLeft=0})},eStyle:function(){var c=$("."+this.Class+"");c.css({"white-space":"nowrap","word-wrap":"normal"})}});return a});M.closure(function(b){b("/js/purl");var c=b("Storage"),a=b("Movearound"),d=b("TopTip");$(function(){var i=$("#_j_cover_box");l();$(window).resize(l);function l(){i.height($(window).width()/3)}var f=c.getItem("video_tip");if(!f&&$("._j_video_tip").length){$("._j_video_tip").show();$("._j_video_tip_close").click(function(){c.setItem("video_tip",1,86400*365);$("._j_video_tip").fadeOut(300)})}var e={Class:"textmove",Step:1,Times:50},k={Class:"headtext",Step:2,Times:50};var g=new a(e),j=new a(k);if(window.Env.anchor_pid){var h=$('._j_anchor[data-poiid="'+window.Env.anchor_pid+'"]').eq(0).closest("._j_anchorcnt");if(h.length){$("html, body").animate({scrollTop:h.offset().top-60},500);$(window).trigger("scroll")}}})});(function(a){a.fn.UpNum=function(d,e,b,c){return this.each(function(){var g=a(this).offset();var j=Math.round(g.left)+"px";var h=Math.round(g.top)+"px";if(d.toString().indexOf("-")==0){var k=Math.round(g.top)+30+"px"}else{var k=Math.round(g.top)-30+"px"}var f="20px";if(b){f=b}c=c||"120";var i=d||a(this).attr("money");a("<div/>").appendTo(a("body")).addClass("numeric").css({position:"absolute",top:h,left:j,color:(d.toString().indexOf("-")==0)?"#333":"red",fontFamily:"Georgia",fontSize:f,zIndex:c}).html(i).animate({top:k},{duration:1000,complete:function(){a(this).remove();if(e){e()}}})})};if(window.M&&typeof M.define=="function"){M.define("jq-upnum",function(){return jQuery})}})(jQuery);M.closure(function(b){b("jq-upnum");var f=b("TopTip"),c=b("dialog/alert");$.fn.imgMenu=function(g){var h={color:"",border:"",backgroundColor:"",control:[{cls:"ptb-reply",fn:function(j,k,i){if(window.Env.UID>0){$("#pnl_pop_reply").data("pop_reply_data",{link:j});M.Event.fire("quoteImgShow",{type:"quoteImg"})}else{M.Event.fire("login:required")}}},{cls:"ptb-collect",fn:function(j,k,i){if(!k.hasClass("on")){if(window.Env.UID>0){$.post("/plan/ajax.php?s=addFav",{id:window.Env.iid,subtype:0,type:3,content:i.attr("src"),pid:i.data("pid")},function(l){var m=$(k).offset();k.addClass("on");if(l.ret==-1){M.Event.fire("login:required")}else{f.show("收藏成功")}},"json")}else{M.Event.fire("login:required")}}}},{cls:"btn-ding",fn:function(k,m,j,n){if(window.Env.UID>0){var l=m;var i=n.data("pid");if(!i){i=j.parent("a").data("pid")}if(l.hasClass("on")){$.post("/mdd/photo/ajax_post.php",{sAction:"cancelVote",iAlid:i,iIid:window.Env.iid},function(r){if(!r.error){if(r.payload){if(r.payload.ret==1){var o=j.data("menu");var p=o.find(".ptb-ding span");l.removeClass("on");var q=parseInt(p.html(),10);p.html(Math.max(0,q-1))}else{c.pop("失败，请稍后再试")}}}else{c.pop(r.error.error)}},"json")}else{$.post("/mdd/photo/ajax_post.php",{sAction:"addVote",iAlid:i,iIid:window.Env.iid},function(r){if(!r.error){if(r.payload){if(r.payload.ret==1){var o=j.data("menu");var p=o.find(".ptb-ding span");l.addClass("on");l.UpNum("+1");var q=parseInt(p.html(),10);p.html(Math.max(0,q+1))}else{c.pop("失败，请稍后再试")}}}else{c.pop(r.error.error)}},"json")}}else{M.Event.fire("login:required")}}}],tmpl:'<div class="pic-toolbar" style="position:absolute;"><div class="ptb-share"><span>分享到</span><a class="weibo" data-japp="sns_share" data-jappfedata="" data-key="wb" rel="nofollow" title="分享到新浪微博">新浪微博</a><a class="qzone" data-japp="sns_share" data-jappfedata="" data-key="qz" rel="nofollow" title="分享到QQ空间">QQ空间</a></div><div class="ptb-option"><a class="ptb-reply" href="javascript:void(0);" rel="nofollow"><i></i>引用到回复</a><a class="ptb-collect" href="javascript:void(0);" rel="nofollow"><i></i>收藏</a></div><div class="ptb-ding" style="display: none"><a class="btn-ding" href="javascript:void(0);" rel="nofollow" title="顶">顶</a><span>0</span></div></div>',showReply:true};g=$.extend(h,g);return this.each(function(){var i=jQuery(this);var k=i.parents(".add_pic");i.hover(function(){var r=jQuery(this).attr("src");if(!/^.+\.mafengwo\.net/.test(r)||/^.+\.mafengwo.net\/images\/i\//.test(r)||/^.+\.mafengwo.net\/images\/sys\//.test(r)){return}if(jQuery(this).data("menu")&&!jQuery(this).data("menu").is(":visible")){var p=jQuery(this).offset().top;jQuery(this).data("menu").css("top",p+"px").show()}else{var n=Math.max(370,i.width()),o=jQuery(g.tmpl).appendTo(jQuery("body")).css({top:i.offset().top,left:i.offset().left,width:n});o.find("a.weibo").attr({"data-title":e.share_title,"data-content":e.share_content.wb,"data-url":e.share_url,"data-pic":i.attr("src")});o.find("a.qzone").attr({"data-title":e.share_title,"data-content":e.share_content.qz,"data-url":e.share_url,"data-pic":i.attr("src")});for(var m=0;m<g.control.length;m++){var q=o.find("a."+g.control[m].cls);if(q.length){q.data("fn",g.control[m].fn);q.click(function(){jQuery(this).data("fn")(i.attr("src"),jQuery(this),i,k)})}}var l=k.data("pid");if(!l){l=i.parent("a").data("pid")}if(l){$.get("/note/ajax_any.php",{sAction:"getPhotoUgc",iPid:l,iIid:window.Env.iid},function(s){if(!s.error){if(s.payload){if(s.payload.ret==1){o.find(".ptb-ding span").html(s.payload.info.vote.num);if(s.payload.info.vote.is_vote==1){o.find(".btn-ding").addClass("on")}o.find(".ptb-ding").show()}}}},"json")}jQuery(this).data("menu",o);o.hover(function(){jQuery(this).show()},function(){jQuery(this).hide()})}},function(){if(jQuery(this).data("menu")&&jQuery(this).data("menu").remove){jQuery(this).data("menu").hide()}});var j=i.attr("src");if(/^.+\.mafengwo.net\/images\/i\//.test(j)){return}i.css({display:"block"})})};$(window).resize(function(){var g=$(".vc_article");if(g.length){var h=g.offset().left;$(".pic-toolbar").css("left",h+"px")}});var e=null,a=false;M.Event.on("note:share:info:ready",function(g){d(g)});if(M.Event.isFired("note:share:info:ready")){if(window.Env.share_info){d(window.Env.share_info)}}function d(g){if(!a){a=true;e=g;$(".view img._j_lazyload").imgMenu()}}});jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,f,a,h,g){return jQuery.easing[jQuery.easing.def](e,f,a,h,g)},easeInQuad:function(e,f,a,h,g){return h*(f/=g)*f+a},easeOutQuad:function(e,f,a,h,g){return -h*(f/=g)*(f-2)+a},easeInOutQuad:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f+a}return -h/2*((--f)*(f-2)-1)+a},easeInCubic:function(e,f,a,h,g){return h*(f/=g)*f*f+a},easeOutCubic:function(e,f,a,h,g){return h*((f=f/g-1)*f*f+1)+a},easeInOutCubic:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f+a}return h/2*((f-=2)*f*f+2)+a},easeInQuart:function(e,f,a,h,g){return h*(f/=g)*f*f*f+a},easeOutQuart:function(e,f,a,h,g){return -h*((f=f/g-1)*f*f*f-1)+a},easeInOutQuart:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f+a}return -h/2*((f-=2)*f*f*f-2)+a},easeInQuint:function(e,f,a,h,g){return h*(f/=g)*f*f*f*f+a},easeOutQuint:function(e,f,a,h,g){return h*((f=f/g-1)*f*f*f*f+1)+a},easeInOutQuint:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f*f+a}return h/2*((f-=2)*f*f*f*f+2)+a},easeInSine:function(e,f,a,h,g){return -h*Math.cos(f/g*(Math.PI/2))+h+a},easeOutSine:function(e,f,a,h,g){return h*Math.sin(f/g*(Math.PI/2))+a},easeInOutSine:function(e,f,a,h,g){return -h/2*(Math.cos(Math.PI*f/g)-1)+a},easeInExpo:function(e,f,a,h,g){return(f==0)?a:h*Math.pow(2,10*(f/g-1))+a},easeOutExpo:function(e,f,a,h,g){return(f==g)?a+h:h*(-Math.pow(2,-10*f/g)+1)+a},easeInOutExpo:function(e,f,a,h,g){if(f==0){return a}if(f==g){return a+h}if((f/=g/2)<1){return h/2*Math.pow(2,10*(f-1))+a}return h/2*(-Math.pow(2,-10*--f)+2)+a},easeInCirc:function(e,f,a,h,g){return -h*(Math.sqrt(1-(f/=g)*f)-1)+a},easeOutCirc:function(e,f,a,h,g){return h*Math.sqrt(1-(f=f/g-1)*f)+a},easeInOutCirc:function(e,f,a,h,g){if((f/=g/2)<1){return -h/2*(Math.sqrt(1-f*f)-1)+a}return h/2*(Math.sqrt(1-(f-=2)*f)+1)+a},easeInElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h==0){return e}if((h/=k)==1){return e+l}if(!j){j=k*0.3}if(g<Math.abs(l)){g=l;var i=j/4}else{var i=j/(2*Math.PI)*Math.asin(l/g)}return -(g*Math.pow(2,10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j))+e},easeOutElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h==0){return e}if((h/=k)==1){return e+l}if(!j){j=k*0.3}if(g<Math.abs(l)){g=l;var i=j/4}else{var i=j/(2*Math.PI)*Math.asin(l/g)}return g*Math.pow(2,-10*h)*Math.sin((h*k-i)*(2*Math.PI)/j)+l+e},easeInOutElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h==0){return e}if((h/=k/2)==2){return e+l}if(!j){j=k*(0.3*1.5)}if(g<Math.abs(l)){g=l;var i=j/4}else{var i=j/(2*Math.PI)*Math.asin(l/g)}if(h<1){return -0.5*(g*Math.pow(2,10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j))+e}return g*Math.pow(2,-10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j)*0.5+l+e},easeInBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158}return i*(f/=h)*f*((g+1)*f-g)+a},easeOutBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158}return i*((f=f/h-1)*f*((g+1)*f+g)+1)+a},easeInOutBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158}if((f/=h/2)<1){return i/2*(f*f*(((g*=(1.525))+1)*f-g))+a}return i/2*((f-=2)*f*(((g*=(1.525))+1)*f+g)+2)+a},easeInBounce:function(e,f,a,h,g){return h-jQuery.easing.easeOutBounce(e,g-f,0,h,g)+a},easeOutBounce:function(e,f,a,h,g){if((f/=g)<(1/2.75)){return h*(7.5625*f*f)+a}else{if(f<(2/2.75)){return h*(7.5625*(f-=(1.5/2.75))*f+0.75)+a}else{if(f<(2.5/2.75)){return h*(7.5625*(f-=(2.25/2.75))*f+0.9375)+a}else{return h*(7.5625*(f-=(2.625/2.75))*f+0.984375)+a}}}},easeInOutBounce:function(e,f,a,h,g){if(f<g/2){return jQuery.easing.easeInBounce(e,f*2,0,h,g)*0.5+a}return jQuery.easing.easeOutBounce(e,f*2-g,0,h,g)*0.5+h*0.5+a}});if(window.M&&typeof window.M.define=="function"){window.M.define("jq-easing",function(){return jQuery})}M.define("Toggle",function(b,a,c){function d(e){this.context="body";this.trigger=null;this.board=null;this.handler=$.noop;this.triggerHandler=$.noop;this.boardHandler=$.noop;M.mix(this,e);this.inner=false;this.init()}d.prototype={init:function(){if(typeof this.trigger==="string"){$(this.context).delegate(this.trigger,"click",$.proxy(function(e){this.triggerHandler(e);this.inner=true},this))}else{$(this.trigger).click($.proxy(function(e){this.triggerHandler(e);this.inner=true},this))}if(typeof this.board==="string"){$(this.context).delegate(this.board,"click",$.proxy(function(e){this.inner=true},this))}else{$(this.board).click($.proxy(function(e){this.inner=true},this))}$(this.context).click($.proxy(function(e){if(!this.inner){this.handler()}else{this.inner=false}},this))}};c.exports=d});M.define("CopyrightProtecte",function(b,a,c){function d(e){this.container=null;M.mix(this,e);this.init()}d.prototype={init:function(){$(this.container).bind("copy",$.proxy(function(k){if(!window.getSelection()){return false}var f=window.getSelection().toString();if(!window.getSelection().getRangeAt(0)){return false}if(!window.getSelection().getRangeAt(0).getBoundingClientRect()){return false}$(".copyright_container").remove();var i=window.getSelection().getRangeAt(0).getBoundingClientRect();var j=$(document).scrollTop()+i.top;var g=i.left;var m=$('<div class="copyright_container" style="position:absolute;padding: 8px 0 5px;z-index: 87;"><img width="35" src="'+this.logo+'" style="border-radius:50%;position:absolute;"><div class="message" style="margin-left:45px;position:relative;padding: 5px;background: #65CEA7;color: #fff;border-radius: 5px;-webkit-border-radius: 5px;"><span style="border-right: 8px solid #65CEA7;display: block;position: absolute;top: 6px;left: -7px;width: 0;height: 0;border-top: 8px solid transparent;border-bottom: 8px solid transparent;"></span><span style="color: #fff;font-size: 14px;line-height: 20px;">此内容著作权归作者<b style="color: #ff9d00;">'+this.name+"</b>本人所有，未经允许不得转载。</span></div></div>").appendTo("body");m.css({top:j-56+"px",left:g+"px",position:"absolute"}).show("fast");setTimeout(function(){m.hide("fast",function(){m.remove()})},2000);var h="_j_cpoyright_protecte";var l=$("#"+h);if(l.length===0){l=$('<input id="'+h+'">');$("body").append(l)}var e="   作者："+this.name+" 链接："+this.link+" 来源：蚂蜂窝 著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。";l.val(f+e).select();document.execCommand("copy");M.Event.fire("content:copy:success");return false},this))}};c.exports=d});
/*!
 * Lazy Load - jQuery plugin for lazy loading images
 *
 * Copyright (c) 2007-2015 Mika Tuupola
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.appelsiini.net/projects/lazyload
 *
 * Version:  1.9.7
 *
 */
(function(c,b,a,e){var d=c(b);c.fn.lazyload=function(f){var h=this;var i;var g={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:false,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};function j(){var k=0;h.each(function(){var l=c(this);if(g.skip_invisible&&!l.is(":visible")){return}if(c.abovethetop(this,g)||c.leftofbegin(this,g)){}else{if(!c.belowthefold(this,g)&&!c.rightoffold(this,g)){l.trigger("appear");k=0}else{if(++k>g.failure_limit){return false}}}})}if(f){if(e!==f.failurelimit){f.failure_limit=f.failurelimit;delete f.failurelimit}if(e!==f.effectspeed){f.effect_speed=f.effectspeed;delete f.effectspeed}c.extend(g,f)}i=(g.container===e||g.container===b)?d:c(g.container);if(0===g.event.indexOf("scroll")){i.bind(g.event,function(){return j()})}this.each(function(){var k=this;var l=c(k);k.loaded=false;if(l.attr("src")===e||l.attr("src")===false){if(l.is("img")){l.attr("src",g.placeholder)}}l.one("appear",function(){if(!this.loaded){if(g.appear){var m=h.length;g.appear.call(k,m,g)}c("<img />").bind("load",function(){var o=l.attr("data-"+g.data_attribute);l.hide();if(l.is("img")){l.attr("src",o)}else{l.css("background-image","url('"+o+"')")}l[g.effect](g.effect_speed);k.loaded=true;var n=c.grep(h,function(q){return !q.loaded});h=c(n);if(g.load){var p=h.length;g.load.call(k,p,g)}}).attr("src",l.attr("data-"+g.data_attribute))}});if(0!==g.event.indexOf("scroll")){l.bind(g.event,function(){if(!k.loaded){l.trigger("appear")}})}});d.bind("resize",function(){j()});if((/(?:iphone|ipod|ipad).*os 5/gi).test(navigator.appVersion)){d.bind("pageshow",function(k){if(k.originalEvent&&k.originalEvent.persisted){h.each(function(){c(this).trigger("appear")})}})}c(a).ready(function(){j()});return this};c.belowthefold=function(g,h){var f;if(h.container===e||h.container===b){f=(b.innerHeight?b.innerHeight:d.height())+d.scrollTop()}else{f=c(h.container).offset().top+c(h.container).height()}return f<=c(g).offset().top-h.threshold};c.rightoffold=function(g,h){var f;if(h.container===e||h.container===b){f=d.width()+d.scrollLeft()}else{f=c(h.container).offset().left+c(h.container).width()}return f<=c(g).offset().left-h.threshold};c.abovethetop=function(g,h){var f;if(h.container===e||h.container===b){f=d.scrollTop()}else{f=c(h.container).offset().top}return f>=c(g).offset().top+h.threshold+c(g).height()};c.leftofbegin=function(g,h){var f;if(h.container===e||h.container===b){f=d.scrollLeft()}else{f=c(h.container).offset().left}return f>=c(g).offset().left+h.threshold+c(g).width()};c.inviewport=function(f,g){return !c.rightoffold(f,g)&&!c.leftofbegin(f,g)&&!c.belowthefold(f,g)&&!c.abovethetop(f,g)};c.extend(c.expr[":"],{"below-the-fold":function(f){return c.belowthefold(f,{threshold:0})},"above-the-top":function(f){return !c.belowthefold(f,{threshold:0})},"right-of-screen":function(f){return c.rightoffold(f,{threshold:0})},"left-of-screen":function(f){return !c.rightoffold(f,{threshold:0})},"in-viewport":function(f){return c.inviewport(f,{threshold:0})},"above-the-fold":function(f){return !c.belowthefold(f,{threshold:0})},"right-of-fold":function(f){return c.rightoffold(f,{threshold:0})},"left-of-fold":function(f){return !c.rightoffold(f,{threshold:0})}})})(jQuery,window,document);if(window.M&&typeof window.M.define=="function"){window.M.define("/js/jquery.lazyload",function(){return jQuery})}M.define("/js/common/TextSelectionTip",function(b){var a='<div class="tooltip" style="position: absolute"><a role ="button" class="addComt_icon"></a></div>';function c(d){this.context=d.context?$(d.context):$(document);this.textBlock=d.block;this.tipTpl=d.tipTpl||a;this.tipTitle=d.tipTitle||"引用";this.init()}M.mix(c.prototype,{init:function(){this.selectTimer=0;this.tip=null;this.selectText="";this.context.on("mouseup",this.textBlock,$.proxy(function(f){var e=f.pageX,d=f.pageY;clearTimeout(this.selectTimer);this.selectTimer=setTimeout($.proxy(function(){var i="",j=null;if(document.selection){var g=document.selection.createRange();j=g.parentElement();if(j){i=g.text}}else{if(typeof window.getSelection=="function"){var h=window.getSelection();if(h.focusNode){j=h.focusNode.parentNode;i=h.toString()}}}i=$.trim(i);if(i.length){if(!this.tip){this.createTip()}this.tip.css({top:d+5,left:e+5}).stop(true,true).fadeIn(50);this.selectText=i;this.focusNode=j}},this),50)},this));this.context.on("mousedown",$.proxy(function(d){var e=$(d.target);if(e.closest(".tooltip").length===0){this.hideTip()}},this))},createTip:function(){this.tip=$(this.tipTpl).appendTo("body").css("display","none").attr("title",this.tipTitle);this.tip.click($.proxy(function(){M.Event(this).fire("tip clicked",{text:this.selectText,focusNode:this.focusNode});this.hideTip()},this))},hideTip:function(){this.tip&&this.tip.hide();this.selectText=""}});return c});M.closure(function(h){h("jq-tmpl");h("jq-easing");h("/js/jquery.jplayer.js");var m=h("Toggle"),g=h("/js/EmotionsHd"),l=h("CopyrightProtecte"),j=h("/js/module/app/Page"),e=h("/js/note/GinfoReply"),u=h("FrequencyAppVerify"),q=h("/js/jquery.lazyload"),d=h("dialog/Dialog"),k=h("ClickToggle"),b=h("TopTip"),n=h("Slider"),v=h("Storage"),w=h("ScrollObserver"),t=h("/js/common/TextSelectionTip"),p=$("#_j_pnl_pop_reply"),a=$("#pnl_pop_reply"),i=$("._j_tag_notice"),r=true,c=false,o=null,s=null;if(window.devicePixelRatio>1&&window.Env.is_new_note){$("img._j_lazyload").lazyload({data_attribute:"rt-src",threshold:2000,event:"scroll:lazy"})}else{$("img._j_lazyload").lazyload({data_attribute:"src",threshold:2000,event:"scroll:lazy"})}w.addObserver(function(){$(window).trigger("scroll:lazy")});var f=new j({init:function(){this.initData();this.initUI();this.initSelectionTip()},events:{"click,._j_tn_close":"closeTagNotice","click,.vc_reply ._j_publish_tab":"switchReplyTab","click,#_j_editor ._j_face_tab":"switchFaceSeries"},initSelectionTip:function(){this.selectionTip=new t({block:$("._j_note_content"),tipTitle:"引用到回复"});M.Event(this.selectionTip).on("tip clicked",function(x){a.data("pop_reply_data",{content:x.text});M.Event.fire("quoteImgShow",{type:"quoteTxt"})})},bindEvents:function(){M.Event.on("quoteImgShow",$.proxy(function(x){this.checkLogin();$("#plantip").remove();var y=x.type?x.type:"quoteImg";if(a.data("pop_reply_data")){var A=a.data("pop_reply_data");var z="回复"+window.Env.author_name;if("quoteTxt"==y){z+="的引文：";this.showQuoteDialog(z,A.content,4,"","block")}else{if("quoteImg"==y){z+="的图片：";this.showQuoteDialog(z,"",1,A.link,"none")}}}},this));M.Event.on("quoteDialogClose",$.proxy(function(x){if(o){o.hide()}},this));M.Event.on("hideTagBtn",$.proxy(function(x){if(r){r=false}},this));M.Event.on("recommend:hotel:ready",$.proxy(function(x){h.async(["/js/note/GinfoHotel"],function(z){var y=new z()})},this));M.Event.on("content:copy:success",function(){$("#plantip").remove()})},eventHandlers:{switchFaceSeries:function(y){var z=$(y.currentTarget),x=z.index();if(!z.hasClass("cur")){z.addClass("cur").siblings().removeClass("cur");$("#_js_replyExpression").children("._j_emojilist").eq(x).removeClass("hide").siblings(".art_newface").addClass("hide")}},closeTagNotice:function(x){x.preventDefault();$.post("/note/ajax_post.php",{sAction:"setTagNotice"});i.hide()}},initData:function(){this.data={};this.data.is_note=window.Env.is_new_note;if(!this.data.is_note){this.initGinfoData()}this.activeRecommendHotel()},initUI:function(){var x=new k({container:"#_j_editor_quick,#_j_editor_quote",innerSelector:"._j_show_at,._j_at_pop,._j_show_tags,._j_tags_pop,._j_show_expression,._j_face_pop",handler:function(C,B){var A=C.closest("._j_editor");if(C.hasClass("_j_show_at")){A.find(".art_pop").hide();A.find("._j_at_pop").show()}else{if(C.hasClass("_j_show_tags")){A.find(".art_pop").hide();A.find("._j_tags_pop").show()}else{if(C.hasClass("_j_show_expression")){A.find(".art_pop").hide();var D=A.find("._j_face_pop");if(D.find("ul li").length===0){$.each(g.quick,function(F,E){$('<li class="_j_emojiitem" title="'+E.title+'"><img src="'+E.file+'" /></li>').data("value",E.title).appendTo(D.find("ul"))})}D.show()}}}},outHandler:function(D,C){var B=D.closest("._j_editor");var A=B.find("._j_at_pop,._j_tags_pop,._j_face_pop");A.hide()}});var z=new e({container:$("#_j_editor_quick"),appType:"quick"});var y=new m({trigger:"._j_quick_reply",board:"._j_qr_box",handler:function(){$(this.board).hide()},triggerHandler:function(){$(this.board).show()}})},activeRecommendHotel:function(){if(!c){var z=[];var x=[];$(".link[data-poi_id]").each(function(){var A=$(this).data("poi_id");if(!z[A]){z[A]=1;x.push(A)}});if(x.length>0){var y=JSON.stringify(x);$.get("/note/ajax_any.php",{sAction:"isHotelRecommend",sIds:y},$.proxy(function(C){if(C.payload.ret==1){if(!c){c=true;if(C.payload.allow.length>0){var B=[10083,12684,10183,10184,10189,10035,10062,10171];var A=false;if(B.indexOf(parseInt(window.Env.mddid,10))!==-1){A=true}$.each(C.payload.allow,function(D,F){var E=$(".link[data-poi_id='"+F+"']");E.addClass("_j_recommend_hotel");if(A){E.addClass("poi-link-hotel").prepend("<i></i>")}});M.Event.fire("recommend:hotel:ready")}}}},this),"json")}}},checkLogin:function(){if(!window.Env.UID){M.Event.fire("login:required");return false}},setQuoteUi:function(E,D,x,z,C){var y=p.tmpl({title:E,word:D,flag:x,link:z,display:C}).html();o=new d({content:y,PANEL_CLASS:"replypop"});s=$("#_j_editor_quote");if(!r){s.find("._j_show_tags").hide()}var A=$("#_j_editor_quick");s.find("._j_tags_low").html(A.find("._j_tags_low").html());s.find("._j_tags_high").html(A.find("._j_tags_high").html());if(r&&A.find("._j_tags_low li").length>0){s.find("._j_show_tags").show()}if(A.find("._j_show_tags").hasClass("tags_tips")){s.find("._j_show_tags").addClass("tags_tips")}o.show();var B=new e({container:s,appType:"quote"})},resetQuoteData:function(z,x,y){s.find("textarea[name='reply_content']").val("");s.data("quote",z);s.data("flag",x);s.data("link",y)},resetQuoteUi:function(A,z,y){var x=s.closest("._j_comment_layer");x.find(".tit").html(A);x.find(".quoteInfo").html(z).css("display",y);s.find("._j_show_tags").removeClass("on").html("举牌");s.find(".reply_tags ul li a").removeClass("on");s.find("._j_at_inner span").remove();s.find(".art_pop").hide();s.find("._j_at_txt").val("");s.find("._j_at_inner .result").empty().hide();if(!r){s.find("._j_show_tags").hide()}},showQuoteDialog:function(B,A,x,y,z){if(!o){this.setQuoteUi(B,A,x,y,z)}else{this.resetQuoteUi(B,A,z);this.resetQuoteData(A,x,y);o.show()}},initGinfoData:function(){$.ajax({type:"GET",url:"/group/ajax_ginfo_ready.php",data:{sAction:"initGinfo",iId:window.Env.iid},dataType:"json",success:$.proxy(function(x){if(!x.error){if($("#postal_ticket").length>0&&x.payload.new_tickets_num>0){$("#postal_ticket dd").html("此篇大作已获得"+x.payload.give_tickets_user_name+"奖励的<span>明信片券 "+x.payload.new_tickets_num+" 张</span>。<br>快去DIY你的专属明信片吧！");$("#postal_ticket").show()}if($("._j_hot_wenda").length>0&&x.payload.hot_wenda){$("._j_hot_wenda").html(x.payload.hot_wenda).show()}}},this)})},showTextPop:function(y){var x=$("#_js_replyExpression");x.show().siblings(".art_pop").hide();return x}});$(function(){$(".quick_reply_tips").delegate(".close","click",function(){$(".quick_reply_tips").hide()});if(window.Env.score_article){b.show(window.Env.score_article)}$(".vc_article").delegate("a","click",function(){var B=$(this).attr("href"),y=$(this).text(),D=$.url(B);if(D.attr("host")&&D.attr("host").indexOf(".mafengwo.")===-1){var z=D.attr("host").split("."),C=["edu","com","cn","net","org","gov","hk","uc","ca","co","uk"];for(var A=(z.length-2);A>=0;A--){if($.inArray(z[A],C)<0){M.Utils.opLog({type:"tosl",key:z[A],subkey:y,params:'{"url":"'+B+'", "tid":"'+window.Env.iid+'"}'});break}}}});var x;$("body").delegate(".bs_share","mouseenter",function(y){y.preventDefault();if(x){clearTimeout(x)}$(this).find(".bs_pop").show()});$("body").delegate(".bs_share","mouseleave",function(y){y.preventDefault();var z=$(this);x=setTimeout(function(){z.find(".bs_pop").hide()},500)});M.Event.on("weixin share triggered",function(y){$.post("/group/ajax_ginfo_share.php",{action:"get_qr_url",topiid:window.Env.iid})});M.Event.on("sns share triggered",function(y){var z=y.key=="wb"?"sina":"qq";$.getJSON("/group/ajax_ginfo_share.php",{action:"ginfo_share",topiid:window.Env.iid,share_type:z})})})});$(function(){M.closure(function(c){var a=c("dialog/Dialog");var b="/note/activity/anotice.php?sAction=getNotice&mddid="+window.Env.mddid;$.get(b,function(i){if(i.payload.ret){f(i.payload)}},"json");$(".noticeClose").on("click",function(){var i=$(this).closest(".aNotice").attr("noticeId");h(i,0)});$(".noticeUrl").live("click",function(){var i=$(this).closest(".aNotice").attr("noticeId");if(i==-1){d()}else{h(i,1)}});function h(i,l){var j="/note/activity/anotice.php";var k={};k.sAction="closeNotice";k.noticeId=i;k.ifCount=l;$(".aNoticeH").hide();$(".bread-nav").show();$(".aNoticeM").hide("slow");$.post(j,k,function(m){},"json")}function f(i){$(".aNotice").attr("noticeId",i.id);$(".noticeDes").html(i.description);$(".noticeUrl").attr("href",i.url);$(".bread-nav").hide();$(".aNoticeH").show();$(".aNoticeM").show("slow");if(i.id==-1){$(".noticeUrl").removeAttr("target")}}var g=false;var e;function d(){if(!g){e=new a({content:'<div class="wx-mfw-pop" style="background:#FFF;"><p>扫描二维码</p><p>查看正在出租的蜂蜂</p><p><img width="150" height="150" src="http://css.mafengwo.net/images/post/new_notes/wx_zhuren.png"></p></div>'})}e.show()}})});M.closure(function(a){$(document).ready(function(){var i=window.Env.iid,d=window.Env.UID,g,f;var c=a("dialog/alert");var e=a("ScrollBar");if(i>0&&d>0){$.get("/note/ajax_poiofnote.php",{act:"poiofnote",iid:i,uid:d},function(j){if(!j.error&&j.data.html){$("body").append(j.data.html);g=$("#_js_dpGuide");f=g.data("poiinfo")}},"json")}$("body").delegate(".reviews-award .hd","click",function(j){j.preventDefault();$(this).parents(".reviews-award").toggleClass("extend")}).delegate("._j_poi_comment_close","click",function(j){j.preventDefault();g.hide();$.post("/note/ajax_poiofnote.php",{act:"addlog",noteid:i,action:"pop_win_close"})});M.Event.on("comment form loaded",function(j){var k=j.poi_id,l=b(k);M.Event.fire("out img insert",{imgs:l})});function b(k){var l=[];for(var j=0;j<f[k].length;j++){if(j==5){break}l[j]={imgstr:f[k][j].imgstr,src:f[k][j].imgsrc,title:""}}return l}function h(j){return f[j][0].pid}M.Event.on("comment published",function(j){$.post("/note/ajax_poiofnote.php",{act:"givehoney",commentid:j.info.comment_id,noteid:i},function(k){if(!k.error&&k.data){g.html(k.data.html);g.addClass("expand");if(k.data.msg){c.pop(k.data.msg,"",3)}}},"json")});$("body").on("click","._j_choney_tpl_poi",function(k){var m=$(k.currentTarget);var j=m.data("poi_id");var n=h(j);var l=$("#_j_photo_"+n);$("html, body").animate({scrollTop:l.offset().top-60},500)})})});if(typeof deconcept=="undefined"){var deconcept=new Object()}if(typeof deconcept.util=="undefined"){deconcept.util=new Object()}if(typeof deconcept.SWFObjectUtil=="undefined"){deconcept.SWFObjectUtil=new Object()}deconcept.SWFObject=function(m,b,n,e,j,k,g,f,d,l){if(!document.getElementById){return}this.DETECT_KEY=l?l:"detectflash";this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY);this.params=new Object();this.variables=new Object();this.attributes=new Array();if(m){this.setAttribute("swf",m)}if(b){this.setAttribute("id",b)}if(n){this.setAttribute("width",n)}if(e){this.setAttribute("height",e)}if(j){this.setAttribute("version",new deconcept.PlayerVersion(j.toString().split(".")))}this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion();if(!window.opera&&document.all&&this.installedVer.major>7){deconcept.SWFObject.doPrepUnload=true}if(k){this.addParam("bgcolor",k)}var a=g?g:"high";this.addParam("quality",a);this.setAttribute("useExpressInstall",false);this.setAttribute("doExpressInstall",false);var i=(f)?f:window.location;this.setAttribute("xiRedirectUrl",i);this.setAttribute("redirectUrl","");if(d){this.setAttribute("redirectUrl",d)}};deconcept.SWFObject.prototype={useExpressInstall:function(a){this.xiSWFPath=!a?"expressinstall.swf":a;this.setAttribute("useExpressInstall",true)},setAttribute:function(a,b){this.attributes[a]=b},getAttribute:function(a){return this.attributes[a]},addParam:function(b,a){this.params[b]=a},getParams:function(){return this.params},addVariable:function(b,a){this.variables[b]=a},getVariable:function(a){return this.variables[a]},getVariables:function(){return this.variables},getVariablePairs:function(){var c=new Array();var b;var a=this.getVariables();for(b in a){c[c.length]=b+"="+a[b]}return c},getSWFHTML:function(){var b="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");this.setAttribute("swf",this.xiSWFPath)}b='<embed type="application/x-shockwave-flash" src="'+this.getAttribute("swf")+'" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+this.getAttribute("style")+'"';b+=' id="'+this.getAttribute("id")+'" name="'+this.getAttribute("id")+'" ';var f=this.getParams();for(var e in f){b+=[e]+'="'+f[e]+'" '}var d=this.getVariablePairs().join("&");if(d.length>0){b+='flashvars="'+d+'"'}b+="/>"}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");this.setAttribute("swf",this.xiSWFPath)}b='<object id="'+this.getAttribute("id")+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+this.getAttribute("style")+'">';b+='<param name="movie" value="'+this.getAttribute("swf")+'" />';var c=this.getParams();for(var e in c){b+='<param name="'+e+'" value="'+c[e]+'" />'}var a=this.getVariablePairs().join("&");if(a.length>0){b+='<param name="flashvars" value="'+a+'" />'}b+="</object>"}return b},write:function(b){if(this.getAttribute("useExpressInstall")){var a=new deconcept.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(a)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title)}}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var c=(typeof b=="string")?document.getElementById(b):b;c.innerHTML=this.getSWFHTML();return true}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"))}}return false}};deconcept.SWFObjectUtil.getPlayerVersion=function(){var f=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var a=navigator.plugins["Shockwave Flash"];if(a&&a.description){f=new deconcept.PlayerVersion(a.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."))}}else{if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var b=1;var c=3;while(b){try{c++;b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+c);f=new deconcept.PlayerVersion([c,0,0])}catch(d){b=null}}}else{try{var b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(d){try{var b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");f=new deconcept.PlayerVersion([6,0,21]);b.AllowScriptAccess="always"}catch(d){if(f.major==6){return f}}try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(d){}}if(b!=null){f=new deconcept.PlayerVersion(b.GetVariable("$version").split(" ")[1].split(","))}}}return f};deconcept.PlayerVersion=function(a){this.major=a[0]!=null?parseInt(a[0]):0;this.minor=a[1]!=null?parseInt(a[1]):0;this.rev=a[2]!=null?parseInt(a[2]):0};deconcept.PlayerVersion.prototype.versionIsValid=function(a){if(this.major<a.major){return false}if(this.major>a.major){return true}if(this.minor<a.minor){return false}if(this.minor>a.minor){return true}if(this.rev<a.rev){return false}return true};deconcept.util={getRequestParameter:function(c){var d=document.location.search||document.location.hash;if(c==null){return d}if(d){var b=d.substring(1).split("&");for(var a=0;a<b.length;a++){if(b[a].substring(0,b[a].indexOf("="))==c){return b[a].substring((b[a].indexOf("=")+1))}}}return""}};deconcept.SWFObjectUtil.cleanupSWFs=function(){var b=document.getElementsByTagName("OBJECT");for(var c=b.length-1;c>=0;c--){b[c].style.display="none";for(var a in b[c]){if(typeof b[c][a]=="function"){b[c][a]=function(){}}}}};if(deconcept.SWFObject.doPrepUnload){if(!deconcept.unloadSet){deconcept.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",deconcept.SWFObjectUtil.cleanupSWFs)};window.attachEvent("onbeforeunload",deconcept.SWFObjectUtil.prepUnload);deconcept.unloadSet=true}}if(!document.getElementById&&document.all){document.getElementById=function(a){return document.all[a]}}var getQueryParamValue=deconcept.util.getRequestParameter;var FlashObject=deconcept.SWFObject;var SWFObject=deconcept.SWFObject;if(window.M&&typeof window.M.define=="function"){window.M.define("/js/cvideo/swfobject",function(){return SWFObject})}M.closure(function(l){l("/js/jquery.jplayer.js");var h=l("/js/cvideo/swfobject");var b={control_enable:0,loading_enable:0,progressbar_enable:0,tip_enable:0,use_lasttime_progress:0,play_start_time:0,rightmenu_enable:0,bigbutton_enable:0,fullscreen_enable:1,on_player_ready:"on_cover_player_ready",on_player_pause:"on_cover_player_pause",on_player_resume:"on_cover_player_resume",on_player_stop:"on_cover_player_stop",on_player_start:"on_cover_player_start",fullscreen_function:"customFullScreen"};var c={control_enable:1,loading_enable:1,rightmenu_enable:1};var s,C=false,r=false;var i=function(){var F=0;var H=0;var I;var G=function(){return(new Date()).getTime()};this.pre_duration=0;this.duration=0;this.cur_duration=0;this.start=function(){F=F?F:G()};this.stop=function(){H=F?H+G()-F:H;F=0};this.reset=function(){H=F=0};this.time=function(){return H+(F?G()-F:0)};this.operate_change=function(){var L=f("coverplayer");var N=L.getPosition();if(this.cur_duration==N){this.stop()}else{this.start();this.cur_duration=N;var Q=this.duration*1000;var P=this.time();var K=this.pre_duration*1000;var O=((P+K)/Q)*100;var J=$(".play_now");if(O<=100){J.find("._j_progress").css("width",O+"%")}}};this.operate_start=function(){var J=this;I=setInterval(function(){J.operate_change()},80);this.start()};this.operate_stop=function(){this.stop();clearInterval(I)};this.operate_reset=function(){clearInterval(I);this.reset()}};var D=new i();$(function(){var J=$("._j_load_cover img");if(J.length>0){var F=J.attr("src");function I(){$(".fully_loading").hide();$("._j_load_cover").css({"background-image":"url("+F+")",opacity:0}).animate({opacity:1},500);$(".play_before").show()}M.loadIMG(F,I)}var H=E();var G=function(){var L=$("#_j_swf_head").attr("url");if(typeof(L)!="undefined"&&$(".play_now").length){if(H){$("#_j_swf_head").html('<video src="http://'+window.Env.WWW_HOST+"/rest/app/note/video/"+L+'?jsondata=%7B%22data_style%22%3A%22direct%22%7D" width="100%" height="100%" controls="controls" class="_j_videoplayer"></video>');$("#_j_swf_head").children("video").get(0).addEventListener("ended",function(){var N=$("#_j_cover_box");N.find(".play_before").removeClass("play_again").show();var O=N.find(".play_now").css({"z-index":0,opacity:0});$(".person").removeClass("little");$(".view_info").css("z-index",15)})}else{var K=new h("/swf/videoPlayer.swf","coverplayer","100%","100%","8");K.addVariable("userid","06232AA4161AAAB6");K.addVariable("videoid",L);K.addVariable("mode","api");K.addVariable("autostart","false");K.addVariable("jscontrol","true");K.addVariable("playertype",2);K.addParam("allowFullscreen","true");K.addParam("allowScriptAccess","always");K.addParam("wmode","transparent");K.write("_j_swf_head")}}};G();$("#_j_cover_box").delegate("._j_play","click",function(){if(H){var N=$("#_j_cover_box");N.find(".play_before").addClass("play_again").hide();var O=N.find(".play_now").css({"z-index":10,opacity:1});$(".person").addClass("little");$(".view_info").css("z-index",0);$("#_j_swf_head").children("video").get(0).play()}else{var L=$(this).closest(".play_before").hasClass("play_again");if(L){w()}else{if(C){a()}else{var N=$("#_j_cover_box");N.find("._j_load_cover").hide();N.find(".play_before").hide();var K=$(".fully_loading").show().find("p");K.html(K.attr("vtip"));r=true}}}}).delegate("._j_control","click",function(){if($(this).hasClass("pause")){w()}else{x()}});$(".add_video").each(function(N){var L=$(this).attr("data-url");var P=+$(this).attr("data-type");var K=$(this).attr("data-ready");if(K=="1"){var O="";if(P===0){if(H){O='<video src="http://'+window.Env.WWW_HOST+"/rest/app/note/video/"+L+'?jsondata=%7B%22data_style%22%3A%22direct%22%7D" width="680" height="420" controls="controls" class="_j_videoplayer"></video>'}else{O='<embed type="application/x-shockwave-flash" src="/swf/videoPlayer.swf" id="playernote_'+N+'" name="playernote_'+N+'" quality="high" allowfullscreen="true" allowscriptaccess="always" wmode="transparent" flashvars="userid=06232AA4161AAAB6&amp;videoid='+L+'&amp;mode=api&amp;autostart=false&amp;jscontrol=false" width="600" height="400" >'}}else{if(P===1){O='<embed type="application/x-shockwave-flash" src="'+L+'" id="playernote_'+N+'" name="playernote_'+N+'" quality="high" align="middle" allowScriptAccess="never" allowFullScreen="true" wmode="transparent" width="600" height="400" ></embed>'}}$(this).html(O)}});$("._j_videoplayer").on("playing",function(){M.Event.fire("videoplaying")}).on("pause",function(){M.Event.fire("videopause")})});function E(){var G=false,F=document.createElement("video");if(F.canPlayType&&F.canPlayType("video/mp4").replace(/no/,"")){G=true}return G}var a=function(){j();B(0);z();d()};var d=function(){var F=f("coverplayer");F.start()};var x=function(){var F=f("coverplayer");F.pause()};var w=function(){var F=f("coverplayer");F.resume()};var j=function(){var F=$("#_j_cover_box");F.find(".play_before").addClass("play_again").hide();var G=F.find(".play_now").css({"z-index":10,opacity:1});G.find(".play_bar").addClass("playing");$(".person").addClass("little");$(".view_info").css("z-index",0)};var k=function(){var F=$("#_j_cover_box");F.find(".play_before").removeClass("play_again").show();var G=F.find(".play_now").css({"z-index":0,opacity:0});G.find(".play_bar").removeClass("playing");$(".person").removeClass("little");$(".view_info").css("z-index",15)};var g=function(H){H=Math.floor(H);var F=Math.floor(H/3600),I=H%3600;var G=Math.floor(I/60);I=I%60;return F+":"+(G<10?"0"+G:G)+":"+(I<10?"0"+I:I)};var v=function(G){var H=g(G);var F=H.split(":");if(F[0]=="0"){H=F[1]+":"+F[2]}return H};var B=function(I){var G=f("coverplayer");var K=parseInt(G.getDuration(),10);var H=K-I;var J=parseInt(I*100/parseInt(K,10),10);var L=v(H);var F=$(".play_now");F.find("._j_time").html(L)};var z=function(){var F=f("coverplayer");s=setInterval(function(){var G=F.getPosition();B(G)},450)};var m=window.on_cc_player_init=function(F,H){var G=f(H);if(H=="coverplayer"){G.setConfig(b)}else{G.setConfig(c)}};var f=function(F){if(navigator.appName.indexOf("Microsoft")!=-1){return window[F]}else{return document[F]}};var A=window.on_cover_player_ready=function(){C=true;if(r){$("._j_load_cover").show();$(".fully_loading").hide();a()}};var u=window.on_cover_player_pause=function(){$(".play_now .play_time a").addClass("pause");var F=$("#_j_cover_box");F.find(".play_before").show();clearTimeout(s);D.operate_stop()};var y=window.on_cover_player_resume=function(){$(".play_now .play_time a").removeClass("pause");var F=$("#_j_cover_box");F.find(".play_before").hide();z();D.operate_start()};var e=window.on_cover_player_stop=function(){k();clearTimeout(s);D.operate_reset()};var t=window.on_cover_player_start=function(){var G=$(".music_botton .hd_audio");G.jPlayer("pause");$(".music_botton .control").addClass("pause").removeClass("play");$(".vs_music .vsm_button").removeClass("vsm_pause");var F=f("coverplayer");D.duration=F.getDuration();D.operate_start()};var o=window.on_spark_player_start=function(){};var p=window.on_spark_player_pause=function(){};var n=window.on_spark_player_resume=function(){};var q=window.on_spark_player_stop=function(){}});M.closure(function(a){var b=a("Storage"),c=window.Env.iid;$.get("/note/ajax_goods.php",{act:"loadGoods",iid:c,check_in:b.getItem("hotel_check_in"),check_out:b.getItem("hotel_check_out")},function(d){if(d&&d.data&&d.data.goods){M.forEach(d.data.goods,function(f,e){$('._j_seqitem[data-seq="'+e+'"]').after(f)})}},"json");$(".va_con").on("click","._j_favor_goods",function(f){var g=$(f.currentTarget),e=g.data("type"),d=g.data("id");if(g.data("locking")){return false}g.data("locking",true);if(e==1){$.post("/plan/ajax.php?s="+(g.hasClass("favored")?"delPoiFavor":"addFav"),{id:d,type:0},function(){g.data("locking",false)})}else{if(e==2){$.post("/sales/ajax.php",{act:g.hasClass("favored")?"delCollect":"AddCollect",sales_id:d},function(){g.data("locking",false)})}}g.toggleClass("favored");if(g.hasClass("favored")){g.html("<i></i>已收藏")}else{g.html("<i></i>收藏")}})});M.define("PageAdmin",function(b){var e={},c=d();e.uuid=window.Env&&window.Env.uPageId||a();function a(){var f=c();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(h){var g=(f+Math.random()*16)%16|0;f=Math.floor(f/16);return(h==="x"?g:(g&3|8)).toString(16)})}function d(){var f=window.performance||{},g=f.now||f.mozNow||f.msNow||f.oNow||f.webkitNow||Date.now||function(){return new Date().getTime()};return g}return e});M.define("Cookie",function(f,h,e){var g=/\+/g;var i=navigator.cookieEnabled;if(!i){document.cookie="__detectCookieEnabled=1;";i=document.cookie.indexOf("__detectCookieEnabled")!=-1?true:false;if(i){document.cookie="__detectCookieEnabled=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}}if(!i){return{isSupport:false}}var d={isSupport:true,set:function(m,n,k){k=(typeof k=="object"&&k!==null)?k:{};if(typeof k.expires==="number"){var o=k.expires,l=k.expires=new Date();l.setTime(+l+o*1000)}return(document.cookie=[j(m),"=",j(String(n)),k.expires?"; expires="+k.expires.toUTCString():"",k.path?"; path="+k.path:"",k.domain?"; domain="+k.domain:"",k.secure?"; secure":""].join(""))},get:function(q){var k=q?undefined:{};var r=document.cookie?document.cookie.split("; "):[];for(var p=0,m=r.length;p<m;p++){var s=r[p].split("=");var n=a(s.shift());var o=s.join("=");if(q&&q===n){k=b(o);break}if(!q&&(o=b(o))!==undefined){k[n]=o}}return k},remove:function(l,k){if(this.get(l)===undefined){return false}k=(typeof k=="object"&&k!==null)?k:{};k.expires=-1;this.set(l,"",k)}};function j(k){return encodeURIComponent(k)}function a(k){return decodeURIComponent(k)}function c(k){if(k.indexOf('"')===0){k=k.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{k=decodeURIComponent(k.replace(g," "));return k}catch(l){}}function b(k){var l=c(k);return l}e.exports=d});M.define("ResourceKeeper",function(d){var m=b();if(!m){return{isSupport:false}}var c=[];if(window.addEventListener){window.addEventListener("onbeforeunload",l,false)}else{if(window.attachEvent){window.attachEvent("onbeforeunload",l)}}function l(){M.forEach(c,function(n){n.release()})}var e=d("PageAdmin").uuid,j="default_resource",h="__resource_keeper",f=1000,k=2000;function a(n){n=""+n;n=n||j;this.keeping=false;this.resourceKeeperStorageKey=h+"_"+n;this.keepingRefreshInterval=0;this._initStorageListener();c.push(this)}M.mix(a.prototype,{keep:function(){this._requestKeep();return this.keeping},forceKeep:function(n){this._startKeep(n)},release:function(){if(this.keeping){var n=+new Date(),o=g(this.resourceKeeperStorageKey);if(o.currentKeeperPageUUID==e&&o.expire>n){m.remove(this.resourceKeeperStorageKey);this._setKeeping(false)}}},_initStorageListener:function(){M.Event(m).on("resource_keeper_change",M.bind(function(n){if(this.keeping&&n.key==this.resourceKeeperStorageKey&&n.pageUUID&&n.pageUUID!=e){this._setKeeping(false)}},this))},_requestKeep:function(){var n=+new Date(),o=g(this.resourceKeeperStorageKey);if(!o.currentKeeperPageUUID||o.currentKeeperPageUUID==e||o.expire<=n){this._startKeep(n)}else{this._setKeeping(false)}},_startKeep:function(n){n=n||+new Date();var o=n+k;m.set(this.resourceKeeperStorageKey,e+":"+o);this._setKeeping(true)},_setKeeping:function(n){this.keeping=n;if(this.keeping){this._startKeepingRefreshRequest()}else{this._stopKeepingRefreshRequest()}},_startKeepingRefreshRequest:function(){clearInterval(this.keepingRefreshInterval);this.keepingRefreshInterval=setInterval(M.bind(this._requestKeep,this),f)},_stopKeepingRefreshRequest:function(){clearInterval(this.keepingRefreshInterval)}});function b(){var o=null,p=d("Storage");if(p&&p.isSupport){o={set:M.bind(p.setItem,p),get:M.bind(p.getItem,p),remove:M.bind(p.removeItem,p)};if(window.addEventListener){window.addEventListener("storage",function(r){var q=r.key;if(q.indexOf(h)===0){var t="";if(r.newValue){var s=r.newValue.split(":");if(s.length==2){t=s[0]}}M.Event(o).fire("resource_keeper_change",{key:q,pageUUID:t})}},false)}}else{var n=d("Cookie");if(n&&n.isSupport){o={set:function(q,r){return n.set(q,r,k)},get:M.bind(n.get,n),remove:M.bind(n.remove,n)}}}return o}function g(p){var o={currentKeeperPageUUID:"",expire:0},n=m.get(p);if(n){n=n.split(":");o.currentKeeperPageUUID=n[0];o.expire=+n[1]}return o}function i(o){var n=new a(o);return{keep:M.bind(n.keep,n),forceKeep:M.bind(n.forceKeep,n),release:M.bind(n.release,n)}}i.isSupport=true;return i});(function(a){a.jGrowl=function(b,c){if(a("#jGrowl").size()==0){a('<div id="jGrowl"></div>').addClass((c&&c.position)?c.position:a.jGrowl.defaults.position).appendTo("body")}a("#jGrowl").jGrowl(b,c)};a.fn.jGrowl=function(b,d){if(a.isFunction(this.each)){var c=arguments;return this.each(function(){var e=this;if(a(this).data("jGrowl.instance")==undefined){a(this).data("jGrowl.instance",a.extend(new a.fn.jGrowl(),{notifications:[],element:null,interval:null}));a(this).data("jGrowl.instance").startup(this)}if(a.isFunction(a(this).data("jGrowl.instance")[b])){a(this).data("jGrowl.instance")[b].apply(a(this).data("jGrowl.instance"),a.makeArray(c).slice(1))}else{a(this).data("jGrowl.instance").create(b,d)}})}};a.extend(a.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:false,position:"top-right",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3000,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:true,closeTemplate:"&times;",closerTemplate:"<div>[ 关闭 ]</div>",log:function(c,b,d){},beforeOpen:function(c,b,d){},afterOpen:function(c,b,d){},open:function(c,b,d){},beforeClose:function(c,b,d){},close:function(c,b,d){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(b,c){var c=a.extend({},this.defaults,c);if(typeof c.speed!=="undefined"){c.openDuration=c.speed;c.closeDuration=c.speed}this.notifications.push({message:b,options:c});c.log.apply(this.element,[this.element,b,c])},render:function(d){var b=this;var c=d.message;var e=d.options;var d=a('<div class="jGrowl-notification '+e.themeState+" ui-corner-all"+((e.group!=undefined&&e.group!="")?" "+e.group:"")+'"><div class="jGrowl-close">'+e.closeTemplate+'</div><div class="jGrowl-header">'+e.header+'</div><div class="jGrowl-message">'+c+"</div></div>").data("jGrowl",e).addClass(e.theme).children("div.jGrowl-close").bind("click.jGrowl",function(){a(this).parent().trigger("jGrowl.close")}).parent();a(d).bind("mouseover.jGrowl",function(){a("div.jGrowl-notification",b.element).data("jGrowl.pause",true)}).bind("mouseout.jGrowl",function(){a("div.jGrowl-notification",b.element).data("jGrowl.pause",false)}).bind("jGrowl.beforeOpen",function(){if(e.beforeOpen.apply(d,[d,c,e,b.element])!=false){a(this).trigger("jGrowl.open")}}).bind("jGrowl.open",function(){if(e.open.apply(d,[d,c,e,b.element])!=false){if(e.glue=="after"){a("div.jGrowl-notification:last",b.element).after(d)}else{a("div.jGrowl-notification:first",b.element).before(d)}a(this).animate(e.animateOpen,e.openDuration,e.easing,function(){if(a.browser.msie&&(parseInt(a(this).css("opacity"),10)===1||parseInt(a(this).css("opacity"),10)===0)){this.style.removeAttribute("filter")}a(this).data("jGrowl").created=new Date();a(this).trigger("jGrowl.afterOpen")})}}).bind("jGrowl.afterOpen",function(){e.afterOpen.apply(d,[d,c,e,b.element])}).bind("jGrowl.beforeClose",function(){if(e.beforeClose.apply(d,[d,c,e,b.element])!=false){a(this).trigger("jGrowl.close")}}).bind("jGrowl.close",function(){a(this).data("jGrowl.pause",true);a(this).animate(e.animateClose,e.closeDuration,e.easing,function(){a(this).remove();var f=e.close.apply(d,[d,c,e,b.element]);if(a.isFunction(f)){f.apply(d,[d,c,e,b.element])}})}).trigger("jGrowl.beforeOpen");if(e.corners!=""&&a.fn.corner!=undefined){a(d).corner(e.corners)}if(a("div.jGrowl-notification:parent",b.element).size()>1&&a("div.jGrowl-closer",b.element).size()==0&&this.defaults.closer!=false){a(this.defaults.closerTemplate).addClass("jGrowl-closer ui-state-highlight ui-corner-all").addClass(this.defaults.theme).appendTo(b.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){a(this).siblings().trigger("jGrowl.beforeClose");if(a.isFunction(b.defaults.closer)){b.defaults.closer.apply(a(this).parent()[0],[a(this).parent()[0]])}})}},update:function(){a(this.element).find("div.jGrowl-notification:parent").each(function(){if(a(this).data("jGrowl")!=undefined&&a(this).data("jGrowl").created!=undefined&&(a(this).data("jGrowl").created.getTime()+parseInt(a(this).data("jGrowl").life))<(new Date()).getTime()&&a(this).data("jGrowl").sticky!=true&&(a(this).data("jGrowl.pause")==undefined||a(this).data("jGrowl.pause")!=true)){a(this).trigger("jGrowl.beforeClose")}});if(this.notifications.length>0&&(this.defaults.pool==0||a(this.element).find("div.jGrowl-notification:parent").size()<this.defaults.pool)){this.render(this.notifications.shift())}if(a(this.element).find("div.jGrowl-notification:parent").size()<2){a(this.element).find("div.jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){a(this).remove()})}},startup:function(b){this.element=a(b).addClass("jGrowl").append('<div class="jGrowl-notification"></div>');this.interval=setInterval(function(){a(b).data("jGrowl.instance").update()},parseInt(this.defaults.check));if(a.browser.msie&&parseInt(a.browser.version)<7&&!window.XMLHttpRequest){a(this.element).addClass("ie6")}},shutdown:function(){a(this.element).removeClass("jGrowl").find("div.jGrowl-notification").remove();clearInterval(this.interval)},close:function(){a(this.element).find("div.jGrowl-notification").each(function(){a(this).trigger("jGrowl.beforeClose")})}});a.jGrowl.defaults=a.fn.jGrowl.prototype.defaults})(jQuery);if(window.M&&typeof window.M.define=="function"){window.M.define("jq-jgrowl",function(){return jQuery})}M.closure(function(e){var j=e("ResourceKeeper"),t=j.isSupport?new j("new_msg_loop"):null,s=e("Storage"),b=1000,r=10000,u=40000,d=120000;var v=(function(){if(j.isSupport){return $.proxy(t.keep,t)}else{return function(){return M.windowFocused}}}());var k=function(){if(j.isSupport){t.forceKeep()}};if("addEventListener" in window){window.addEventListener("focus",k,false)}else{if("attachEvent" in document){document.attachEvent("onfocusin",k)}}$(function(){if(window.Env&&window.Env.UID>0||window.__mfw_uid>0){setTimeout(n,b)}else{setTimeout(l,r)}$("body").delegate(".jGrowl-closer","click",function(x){$.getJSON("/ajax/ajax_msg.php",{a:"closetip"});s.setItem("jgrowl_close_time",+new Date())});M.Event.on("update msg",function(){setTimeout(function(){w();s.setItem("update_msg",+new Date())},1)});s.on("update_msg",function(x){w()});function w(){if(window.Env&&window.Env.UID>0||window.__mfw_uid>0){p("msgdisplay")}else{p("nologinfeed")}}});function n(){setInterval(function(){v()&&p("msgdisplay")},u)}function l(){var x,w=1;v()&&p("nologinfeed");x=setInterval(function(){v()&&p("nologinfeed");w++;if(w==3){clearInterval(x)}},d)}function p(w){$.get("/ajax/ajax_msg.php?a="+w,function(x){if(x){o(x)}},"json")}function o(w){g();M.Event.fire("get new msg",w);if(w.msg){m()}if(w.tips&&!i()){a(w)}}e("jq-jgrowl");function a(w){var x=w.tips.split(w.split_char);M.forEach(x,function(z,y){if(z){setTimeout(function(){$.jGrowl(z,{header:"新鲜事：",closer:false,life:20000})},2000*y+10)}})}function i(){var x=s.getItem("jgrowl_close_time"),w=+new Date();if(x&&w-x<24*60*60*1000){return true}return false}var c,f=0,h=1000,q=document.title;function m(){g();c=setInterval(function(){if(v()){f++;document.title=f%2===0?"【　　　】 - "+q:"【新消息】 - "+q}else{document.title=q}},h)}function g(){clearInterval(c);document.title=q}});M.define("FrequencySystemVerify",function(f,e,g){var b=f("dialog/Dialog"),h=f("dialog/Layer"),d=f("FrequencyVerifyControl");var a='<div class="popYzm" style="z-index:inherit;position: relative;width:350px;height: 250px"><div class="protectedYZM" style="border: none;box-shadow: none;padding:25px 15px;"><p>亲爱的蜂蜂，你操作的速度有点像机器人<br>来证明下自己吧~</p><div class="YZMInput"><input class="_j_fre_text" type="text" placeHolder="验证码"></div><div class="YZMInput"><img src="http://images.mafengwo.net/images/home_new2015/verify.gif" width="150px" height="40px"><label><a href="javascript:void(0);" class="_j_change_img">看不清，换一张</a></label></div><div class="YZMSubmit"><a href="javascript:void(0);" class="_j_fre_confirm" title="确定">确定</a><span class="n-error">错误次数过多，请稍候尝试</span></div></div></div>';function c(i){this.app=i.app;this.init()}c.prototype={init:function(){var i=new b({content:a});if(h.getActive()){i.getLayer().setZIndex(h.getActive().getZIndex()+1)}i.show();var j=i.getPanel().find(".popYzm");new d({container:j,app:this.app,successHandler:$.proxy(function(){M.Event.fire("frequency:system:verify:success");i.close()},this)})}};g.exports=c});M.closure(function(d){var b=d("dialog/Dialog"),c=d("FrequencySystemVerify");window.show_login=a;$.ajaxSetup({dataFilter:function(h,g){try{var j=$.parseJSON(h);if(j&&j.unsafe==1){window.location.href="http://www.mafengwo.cn";return"{}"}if(j&&j.error&&j.error.msg=="login:required"){M.Event.fire("login:required");return"{}"}if(j&&j.resource&&j.resource.onload&&j.resource.onload.length){if(j.resource.onload[0]=='K.fire("login:required");'){M.Event.fire("login:required");return"{}"}}if(j&&j.error){var f=0;var k=0;if(typeof(j.error.errno)!=="undefined"){f=j.error.errno;k=j.error.error}else{if(typeof(j.error.code)!=="undefined"){f=j.error.code;k=j.error.msg}}if(f===10000){M.Event.fire("frequency:verify",k);return"{}"}}}catch(i){}return h}});var e=null;function a(){if($.browser.msie&&parseInt($.browser.version,10)<9){document.location.href=(window.Env&&window.Env.P_HTTP)||"https://passport.mafengwo.cn";return}if(!e){e=new b({PANEL_CLASS:"login_pop",content:'<iframe frameborder="no" border="0" scrolling="no" width="580" height="292" allowtransparency="true"></iframe>',background:"#aaa",bgOpacity:0.6,reposition:true,impl:"logindialog"})}e.show();if(!e.getPanel().find("iframe").attr("src")){M.Event(e).once("aftershow",function(){var f=window.Env.P_HTTP||"https://passport.mafengwo.cn";e.getPanel().find("iframe").attr("src",f+"/login-popup.html")})}}M.Event.on("login:required",a);M.Event.on("frequency:verify",function(f){new c({app:f})});if(M.Event.isFired("login:required")){a()}});M.define("QRCode",function(b,a,c){c.exports={gen:function(e,d){var d={text:e,size:d.size||200,eclevel:d.evlevel||"H",logo:d.logo||"",__stk__:window.Env.CSTK};return"http://"+window.Env.WWW_HOST+"/qrcode.php?"+$.param(d)}}});M.closure(function(b){var l=b("ScrollObserver"),m=b("Storage"),d=window.Env||{},f=$("#_j_mfwtoolbar"),h=f.height(),a=$(window).height(),k=$(document).height(),g=$("#footer"),e=g.outerHeight();$("body").css("position","relative");$(window).resize(function(){a=$(window).height();k=$(document).height()});setInterval(function(){var n=$(document).height();if(n!=k){k=n;$(window).trigger("scroll")}},2000);if(!d.hideToolbar){if(!d.showToolbarDownArrow){f.children(".toolbar-item-down").remove()}else{f.children(".toolbar-item-down").show()}f.show();c();l.addObserver(c);f.on("click","._j_gotop",i);f.on("click","._j_gobottom",j);f.children(".toolbar-item-code").mouseenter(function(){$(this).addClass("hover")});f.children(".toolbar-item-code").mouseleave(function(){$(this).removeClass("hover")})}function c(){var n=$(window).scrollTop();if(n>500){f.children(".toolbar-item-top").show()}else{f.children(".toolbar-item-top").hide()}if(g.length){if(n+a>g.offset().top){f.css({position:"absolute",bottom:e+20})}else{f.css({position:"",bottom:""})}}}function i(){$("html, body").animate({scrollTop:0},500,function(){M.Event.fire("scroll to top")})}function j(){$("html, body").animate({scrollTop:k-a},500,function(){M.Event.fire("scroll to bottom")})}});(function(){var a=document.createElement("script"),b=window.Env&&window.Env.CNZZID||30065558;a.type="text/javascript";a.async=true;a.charset="utf-8";a.src=document.location.protocol+"//w.cnzz.com/c.php?id="+b+"&async=1";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(a,c)})();M.closure(function(a){M.log("只要你有梦想，就加入我们\n你即将见证互联网最新趋势的快速成长\n蚂蜂窝的一切资源都会成为你成长路上的最大助力\n你可以和蚂蜂窝一起书写互联网的风云奇迹\n在这里有一群和你一样，疯狂地热爱互联网和旅行的人们\n蚂蜂窝能为你实现梦想提供最广阔的平台");M.log("请将简历发送至 %csuperhr@mafengwo.com%c（ 邮件标题请以“_console”结尾）","color:#4ae;","color:inherit;");M.log("职位介绍：http://www.mafengwo.cn/s/hr.html")});M.closure(function(a){$.get("/ajax/ajax_page_onload.php",{href:document.location.href,_t:+new Date()},function(b){if(b.payload&&b.payload.apps){var c=b.payload.apps;if(!M.isEmpty(c)){var d={css_list:c.css||[]};M.loadCssJsListSeq(d,function(){if(c.html){$("body").append(c.html)}if(c.js&&c.js.length){M.loadResource(c.js)}})}}},"json")});