(function(a){a.fn.UpNum=function(d,e,b,c){return this.each(function(){var g=a(this).offset();var j=Math.round(g.left)+"px";var h=Math.round(g.top)+"px";if(d.toString().indexOf("-")==0){var k=Math.round(g.top)+30+"px"}else{var k=Math.round(g.top)-30+"px"}var f="20px";if(b){f=b}c=c||"120";var i=d||a(this).attr("money");a("<div/>").appendTo(a("body")).addClass("numeric").css({position:"absolute",top:h,left:j,color:(d.toString().indexOf("-")==0)?"#333":"red",fontFamily:"Georgia",fontSize:f,zIndex:c}).html(i).animate({top:k},{duration:1000,complete:function(){a(this).remove();if(e){e()}}})})};if(window.M&&typeof M.define=="function"){M.define("jq-upnum",function(){return jQuery})}})(jQuery);M.define("TopTip",function(b,a,c){c.exports={show:function(d){var d=$('<div id="over_container"><div id="over_message">'+d+"</div></div>").appendTo("body");setTimeout(function(){d.hide("fast",function(){d.remove()})},3000)}}});M.closure(function(a){a("jq-upnum");var c=a("TopTip");M.JApp("articleding",function(d){return b(d,d.data("iid"),d.data("vote"))});function b(f,e,d){if(f.hasClass("_j_has_voted")){c.show("一篇游记每天只能顶一次");return false}if(!f.data("inited")){f.data("inited",true);$.post("/ginfo/ajax/vote?_k=1477653529",{iid:e},function(g){if(g&&g.data){if(g.data.ret===1){$("#topvote"+e).html(d+1).UpNum("+1");$(".topvote"+e).html(d+1).UpNum("+1");f.addClass("_j_has_voted");c.show("游记被成功顶到前列！")}else{if(g.data.ret===0){c.show("游记不存在，请刷新页面后在尝试。")}else{if(g.data.ret===-1){c.show("不能顶自己的游记哦")}else{if(g.data.ret===-2){c.show("一篇游记每天只能顶一次");f.addClass("_j_has_voted")}}}}}},"json")}}});